(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Dw(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var kg={exports:{}},Sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub;function k2(){if(ub)return Sc;ub=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var m in a)m!=="key"&&(l[m]=a[m])}else l=a;return a=l.ref,{$$typeof:i,type:r,key:u,ref:a!==void 0?a:null,props:l}}return Sc.Fragment=e,Sc.jsx=t,Sc.jsxs=t,Sc}var db;function j2(){return db||(db=1,kg.exports=k2()),kg.exports}var d=j2(),jg={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb;function D2(){if(hb)return Re;hb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),E=Symbol.iterator;function j(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,Q={};function ie(M,Z,ce){this.props=M,this.context=Z,this.refs=Q,this.updater=ce||L}ie.prototype.isReactComponent={},ie.prototype.setState=function(M,Z){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Z,"setState")},ie.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ne(){}ne.prototype=ie.prototype;function re(M,Z,ce){this.props=M,this.context=Z,this.refs=Q,this.updater=ce||L}var xe=re.prototype=new ne;xe.constructor=re,F(xe,ie.prototype),xe.isPureReactComponent=!0;var be=Array.isArray;function ye(){}var k={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function I(M,Z,ce){var de=ce.ref;return{$$typeof:i,type:M,key:Z,ref:de!==void 0?de:null,props:ce}}function R(M,Z){return I(M.type,Z,M.props)}function A(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function V(M){var Z={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ce){return Z[ce]})}var C=/\/+/g;function Ce(M,Z){return typeof M=="object"&&M!==null&&M.key!=null?V(""+M.key):Z.toString(36)}function yt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ye,ye):(M.status="pending",M.then(function(Z){M.status==="pending"&&(M.status="fulfilled",M.value=Z)},function(Z){M.status==="pending"&&(M.status="rejected",M.reason=Z)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Y(M,Z,ce,de,Ne){var De=typeof M;(De==="undefined"||De==="boolean")&&(M=null);var He=!1;if(M===null)He=!0;else switch(De){case"bigint":case"string":case"number":He=!0;break;case"object":switch(M.$$typeof){case i:case e:He=!0;break;case b:return He=M._init,Y(He(M._payload),Z,ce,de,Ne)}}if(He)return Ne=Ne(M),He=de===""?"."+Ce(M,0):de,be(Ne)?(ce="",He!=null&&(ce=He.replace(C,"$&/")+"/"),Y(Ne,Z,ce,"",function(Vi){return Vi})):Ne!=null&&(A(Ne)&&(Ne=R(Ne,ce+(Ne.key==null||M&&M.key===Ne.key?"":(""+Ne.key).replace(C,"$&/")+"/")+He)),Z.push(Ne)),1;He=0;var zt=de===""?".":de+":";if(be(M))for(var ft=0;ft<M.length;ft++)de=M[ft],De=zt+Ce(de,ft),He+=Y(de,Z,ce,De,Ne);else if(ft=j(M),typeof ft=="function")for(M=ft.call(M),ft=0;!(de=M.next()).done;)de=de.value,De=zt+Ce(de,ft++),He+=Y(de,Z,ce,De,Ne);else if(De==="object"){if(typeof M.then=="function")return Y(yt(M),Z,ce,de,Ne);throw Z=String(M),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return He}function le(M,Z,ce){if(M==null)return M;var de=[],Ne=0;return Y(M,de,"","",function(De){return Z.call(ce,De,Ne++)}),de}function _e(M){if(M._status===-1){var Z=M._result;Z=Z(),Z.then(function(ce){(M._status===0||M._status===-1)&&(M._status=1,M._result=ce)},function(ce){(M._status===0||M._status===-1)&&(M._status=2,M._result=ce)}),M._status===-1&&(M._status=0,M._result=Z)}if(M._status===1)return M._result.default;throw M._result}var Fe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},$e={map:le,forEach:function(M,Z,ce){le(M,function(){Z.apply(this,arguments)},ce)},count:function(M){var Z=0;return le(M,function(){Z++}),Z},toArray:function(M){return le(M,function(Z){return Z})||[]},only:function(M){if(!A(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Re.Activity=w,Re.Children=$e,Re.Component=ie,Re.Fragment=t,Re.Profiler=a,Re.PureComponent=re,Re.StrictMode=r,Re.Suspense=p,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Re.__COMPILER_RUNTIME={__proto__:null,c:function(M){return k.H.useMemoCache(M)}},Re.cache=function(M){return function(){return M.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(M,Z,ce){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var de=F({},M.props),Ne=M.key;if(Z!=null)for(De in Z.key!==void 0&&(Ne=""+Z.key),Z)!N.call(Z,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&Z.ref===void 0||(de[De]=Z[De]);var De=arguments.length-2;if(De===1)de.children=ce;else if(1<De){for(var He=Array(De),zt=0;zt<De;zt++)He[zt]=arguments[zt+2];de.children=He}return I(M.type,Ne,de)},Re.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Re.createElement=function(M,Z,ce){var de,Ne={},De=null;if(Z!=null)for(de in Z.key!==void 0&&(De=""+Z.key),Z)N.call(Z,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Ne[de]=Z[de]);var He=arguments.length-2;if(He===1)Ne.children=ce;else if(1<He){for(var zt=Array(He),ft=0;ft<He;ft++)zt[ft]=arguments[ft+2];Ne.children=zt}if(M&&M.defaultProps)for(de in He=M.defaultProps,He)Ne[de]===void 0&&(Ne[de]=He[de]);return I(M,De,Ne)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(M){return{$$typeof:m,render:M}},Re.isValidElement=A,Re.lazy=function(M){return{$$typeof:b,_payload:{_status:-1,_result:M},_init:_e}},Re.memo=function(M,Z){return{$$typeof:y,type:M,compare:Z===void 0?null:Z}},Re.startTransition=function(M){var Z=k.T,ce={};k.T=ce;try{var de=M(),Ne=k.S;Ne!==null&&Ne(ce,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ye,Fe)}catch(De){Fe(De)}finally{Z!==null&&ce.types!==null&&(Z.types=ce.types),k.T=Z}},Re.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Re.use=function(M){return k.H.use(M)},Re.useActionState=function(M,Z,ce){return k.H.useActionState(M,Z,ce)},Re.useCallback=function(M,Z){return k.H.useCallback(M,Z)},Re.useContext=function(M){return k.H.useContext(M)},Re.useDebugValue=function(){},Re.useDeferredValue=function(M,Z){return k.H.useDeferredValue(M,Z)},Re.useEffect=function(M,Z){return k.H.useEffect(M,Z)},Re.useEffectEvent=function(M){return k.H.useEffectEvent(M)},Re.useId=function(){return k.H.useId()},Re.useImperativeHandle=function(M,Z,ce){return k.H.useImperativeHandle(M,Z,ce)},Re.useInsertionEffect=function(M,Z){return k.H.useInsertionEffect(M,Z)},Re.useLayoutEffect=function(M,Z){return k.H.useLayoutEffect(M,Z)},Re.useMemo=function(M,Z){return k.H.useMemo(M,Z)},Re.useOptimistic=function(M,Z){return k.H.useOptimistic(M,Z)},Re.useReducer=function(M,Z,ce){return k.H.useReducer(M,Z,ce)},Re.useRef=function(M){return k.H.useRef(M)},Re.useState=function(M){return k.H.useState(M)},Re.useSyncExternalStore=function(M,Z,ce){return k.H.useSyncExternalStore(M,Z,ce)},Re.useTransition=function(){return k.H.useTransition()},Re.version="19.2.3",Re}var fb;function Mp(){return fb||(fb=1,jg.exports=D2()),jg.exports}var ee=Mp();const V2=Dw(ee);var Dg={exports:{}},Ac={},Vg={exports:{}},Og={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb;function O2(){return mb||(mb=1,(function(i){function e(Y,le){var _e=Y.length;Y.push(le);e:for(;0<_e;){var Fe=_e-1>>>1,$e=Y[Fe];if(0<a($e,le))Y[Fe]=le,Y[_e]=$e,_e=Fe;else break e}}function t(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var le=Y[0],_e=Y.pop();if(_e!==le){Y[0]=_e;e:for(var Fe=0,$e=Y.length,M=$e>>>1;Fe<M;){var Z=2*(Fe+1)-1,ce=Y[Z],de=Z+1,Ne=Y[de];if(0>a(ce,_e))de<$e&&0>a(Ne,ce)?(Y[Fe]=Ne,Y[de]=_e,Fe=de):(Y[Fe]=ce,Y[Z]=_e,Fe=Z);else if(de<$e&&0>a(Ne,_e))Y[Fe]=Ne,Y[de]=_e,Fe=de;else break e}}return le}function a(Y,le){var _e=Y.sortIndex-le.sortIndex;return _e!==0?_e:Y.id-le.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,m=u.now();i.unstable_now=function(){return u.now()-m}}var p=[],y=[],b=1,w=null,E=3,j=!1,L=!1,F=!1,Q=!1,ie=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function xe(Y){for(var le=t(y);le!==null;){if(le.callback===null)r(y);else if(le.startTime<=Y)r(y),le.sortIndex=le.expirationTime,e(p,le);else break;le=t(y)}}function be(Y){if(F=!1,xe(Y),!L)if(t(p)!==null)L=!0,ye||(ye=!0,V());else{var le=t(y);le!==null&&yt(be,le.startTime-Y)}}var ye=!1,k=-1,N=5,I=-1;function R(){return Q?!0:!(i.unstable_now()-I<N)}function A(){if(Q=!1,ye){var Y=i.unstable_now();I=Y;var le=!0;try{e:{L=!1,F&&(F=!1,ne(k),k=-1),j=!0;var _e=E;try{t:{for(xe(Y),w=t(p);w!==null&&!(w.expirationTime>Y&&R());){var Fe=w.callback;if(typeof Fe=="function"){w.callback=null,E=w.priorityLevel;var $e=Fe(w.expirationTime<=Y);if(Y=i.unstable_now(),typeof $e=="function"){w.callback=$e,xe(Y),le=!0;break t}w===t(p)&&r(p),xe(Y)}else r(p);w=t(p)}if(w!==null)le=!0;else{var M=t(y);M!==null&&yt(be,M.startTime-Y),le=!1}}break e}finally{w=null,E=_e,j=!1}le=void 0}}finally{le?V():ye=!1}}}var V;if(typeof re=="function")V=function(){re(A)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ce=C.port2;C.port1.onmessage=A,V=function(){Ce.postMessage(null)}}else V=function(){ie(A,0)};function yt(Y,le){k=ie(function(){Y(i.unstable_now())},le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Y){Y.callback=null},i.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Y?Math.floor(1e3/Y):5},i.unstable_getCurrentPriorityLevel=function(){return E},i.unstable_next=function(Y){switch(E){case 1:case 2:case 3:var le=3;break;default:le=E}var _e=E;E=le;try{return Y()}finally{E=_e}},i.unstable_requestPaint=function(){Q=!0},i.unstable_runWithPriority=function(Y,le){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var _e=E;E=Y;try{return le()}finally{E=_e}},i.unstable_scheduleCallback=function(Y,le,_e){var Fe=i.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Fe+_e:Fe):_e=Fe,Y){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=_e+$e,Y={id:b++,callback:le,priorityLevel:Y,startTime:_e,expirationTime:$e,sortIndex:-1},_e>Fe?(Y.sortIndex=_e,e(y,Y),t(p)===null&&Y===t(y)&&(F?(ne(k),k=-1):F=!0,yt(be,_e-Fe))):(Y.sortIndex=$e,e(p,Y),L||j||(L=!0,ye||(ye=!0,V()))),Y},i.unstable_shouldYield=R,i.unstable_wrapCallback=function(Y){var le=E;return function(){var _e=E;E=le;try{return Y.apply(this,arguments)}finally{E=_e}}}})(Og)),Og}var gb;function M2(){return gb||(gb=1,Vg.exports=O2()),Vg.exports}var Mg={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb;function P2(){if(pb)return sn;pb=1;var i=Mp();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,y,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:p,containerInfo:y,implementation:b}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sn.createPortal=function(p,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(p,y,null,b)},sn.flushSync=function(p){var y=u.T,b=r.p;try{if(u.T=null,r.p=2,p)return p()}finally{u.T=y,r.p=b,r.d.f()}},sn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},sn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},sn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var b=y.as,w=m(b,y.crossOrigin),E=typeof y.integrity=="string"?y.integrity:void 0,j=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:E,fetchPriority:j}):b==="script"&&r.d.X(p,{crossOrigin:w,integrity:E,fetchPriority:j,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},sn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=m(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},sn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,w=m(b,y.crossOrigin);r.d.L(p,b,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},sn.preloadModule=function(p,y){if(typeof p=="string")if(y){var b=m(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},sn.requestFormReset=function(p){r.d.r(p)},sn.unstable_batchedUpdates=function(p,y){return p(y)},sn.useFormState=function(p,y,b){return u.H.useFormState(p,y,b)},sn.useFormStatus=function(){return u.H.useHostTransitionStatus()},sn.version="19.2.3",sn}var yb;function L2(){if(yb)return Mg.exports;yb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Mg.exports=P2(),Mg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xb;function U2(){if(xb)return Ac;xb=1;var i=M2(),e=Mp(),t=L2();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(r(188))}function y(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,c=s;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return p(f),n;if(g===c)return p(f),s;g=g.sibling}throw Error(r(188))}if(o.return!==c.return)o=f,c=g;else{for(var v=!1,T=f.child;T;){if(T===o){v=!0,o=f,c=g;break}if(T===c){v=!0,c=f,o=g;break}T=T.sibling}if(!v){for(T=g.child;T;){if(T===o){v=!0,o=g,c=f;break}if(T===c){v=!0,c=g,o=f;break}T=T.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function b(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=b(n),s!==null)return s;n=n.sibling}return null}var w=Object.assign,E=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),re=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function V(n){return n===null||typeof n!="object"?null:(n=A&&n[A]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function Ce(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case ie:return"Profiler";case Q:return"StrictMode";case be:return"Suspense";case ye:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case L:return"Portal";case re:return n.displayName||"Context";case ne:return(n._context.displayName||"Context")+".Consumer";case xe:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case k:return s=n.displayName||null,s!==null?s:Ce(n.type)||"Memo";case N:s=n._payload,n=n._init;try{return Ce(n(s))}catch{}}return null}var yt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Fe=[],$e=-1;function M(n){return{current:n}}function Z(n){0>$e||(n.current=Fe[$e],Fe[$e]=null,$e--)}function ce(n,s){$e++,Fe[$e]=n.current,n.current=s}var de=M(null),Ne=M(null),De=M(null),He=M(null);function zt(n,s){switch(ce(De,s),ce(Ne,n),ce(de,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Dv(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Dv(s),n=Vv(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Z(de),ce(de,n)}function ft(){Z(de),Z(Ne),Z(De)}function Vi(n){n.memoizedState!==null&&ce(He,n);var s=de.current,o=Vv(s,n.type);s!==o&&(ce(Ne,n),ce(de,o))}function La(n){Ne.current===n&&(Z(de),Z(Ne)),He.current===n&&(Z(He),_c._currentValue=_e)}var Ua,za;function xr(n){if(Ua===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Ua=s&&s[1]||"",za=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ua+n+za}var _l=!1;function Oi(n,s){if(!n||_l)return"";_l=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(K){var G=K}Reflect.construct(n,[],J)}else{try{J.call()}catch(K){G=K}n.call(J.prototype)}}else{try{throw Error()}catch(K){G=K}(J=n())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),v=g[0],T=g[1];if(v&&T){var D=v.split(`
`),q=T.split(`
`);for(f=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(c===D.length||f===q.length)for(c=D.length-1,f=q.length-1;1<=c&&0<=f&&D[c]!==q[f];)f--;for(;1<=c&&0<=f;c--,f--)if(D[c]!==q[f]){if(c!==1||f!==1)do if(c--,f--,0>f||D[c]!==q[f]){var $=`
`+D[c].replace(" at new "," at ");return n.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",n.displayName)),$}while(1<=c&&0<=f);break}}}finally{_l=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?xr(o):""}function wl(n,s){switch(n.tag){case 26:case 27:case 5:return xr(n.type);case 16:return xr("Lazy");case 13:return n.child!==s&&s!==null?xr("Suspense Fallback"):xr("Suspense");case 19:return xr("SuspenseList");case 0:case 15:return Oi(n.type,!1);case 11:return Oi(n.type.render,!1);case 1:return Oi(n.type,!0);case 31:return xr("Activity");default:return""}}function El(n){try{var s="",o=null;do s+=wl(n,o),o=n,n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ct=Object.prototype.hasOwnProperty,Bt=i.unstable_scheduleCallback,Is=i.unstable_cancelCallback,Df=i.unstable_shouldYield,Ru=i.unstable_requestPaint,hn=i.unstable_now,Mi=i.unstable_getCurrentPriorityLevel,Tl=i.unstable_ImmediatePriority,Sl=i.unstable_UserBlockingPriority,Cs=i.unstable_NormalPriority,Vf=i.unstable_LowPriority,ku=i.unstable_IdlePriority,ju=i.log,Du=i.unstable_setDisableYieldValue,nr=null,Wt=null;function Bn(n){if(typeof ju=="function"&&Du(n),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(nr,n)}catch{}}var Et=Math.clz32?Math.clz32:Ou,Vu=Math.log,Ba=Math.LN2;function Ou(n){return n>>>=0,n===0?32:31-(Vu(n)/Ba|0)|0}var vr=256,Pi=262144,Rt=4194304;function br(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function _r(n,s,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,g=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var T=c&134217727;return T!==0?(c=T&~g,c!==0?f=br(c):(v&=T,v!==0?f=br(v):o||(o=T&~n,o!==0&&(f=br(o))))):(T=c&~g,T!==0?f=br(T):v!==0?f=br(v):o||(o=c&~n,o!==0&&(f=br(o)))),f===0?0:s!==0&&s!==f&&(s&g)===0&&(g=f&-f,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:f}function rr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Of(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mu(){var n=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),n}function wr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Li(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Mf(n,s,o,c,f,g){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,D=n.expirationTimes,q=n.hiddenUpdates;for(o=v&~o;0<o;){var $=31-Et(o),J=1<<$;T[$]=0,D[$]=-1;var G=q[$];if(G!==null)for(q[$]=null,$=0;$<G.length;$++){var K=G[$];K!==null&&(K.lane&=-536870913)}o&=~J}c!==0&&Ui(n,c,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(v&~s))}function Ui(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-Et(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Al(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var c=31-Et(o),f=1<<c;f&s|n[c]&s&&(n[c]|=s),o&=~f}}function Nl(n,s){var o=s&-s;return o=(o&42)!==0?1:zi(o),(o&(n.suspendedLanes|s))!==0?0:o}function zi(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function $r(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Pu(){var n=le.p;return n!==0?n:(n=window.event,n===void 0?32:rb(n.type))}function sr(n,s){var o=le.p;try{return le.p=n,s()}finally{le.p=o}}var ir=Math.random().toString(36).slice(2),kt="__reactFiber$"+ir,Kt="__reactProps$"+ir,Er="__reactContainer$"+ir,qa="__reactEvents$"+ir,Pf="__reactListeners$"+ir,Lu="__reactHandles$"+ir,Uu="__reactResources$"+ir,Tr="__reactMarker$"+ir;function Fa(n){delete n[kt],delete n[Kt],delete n[qa],delete n[Pf],delete n[Lu]}function Sr(n){var s=n[kt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Er]||o[kt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=Bv(n);n!==null;){if(o=n[kt])return o;n=Bv(n)}return s}n=o,o=n.parentNode}return null}function qn(n){if(n=n[kt]||n[Er]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function An(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Ar(n){var s=n[Uu];return s||(s=n[Uu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function jt(n){n[Tr]=!0}var Il=new Set,Cl={};function Nr(n,s){Ir(n,s),Ir(n+"Capture",s)}function Ir(n,s){for(Cl[n]=s,n=0;n<s.length;n++)Il.add(s[n])}var Rl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kl={},jl={};function zu(n){return Ct.call(jl,n)?!0:Ct.call(kl,n)?!1:Rl.test(n)?jl[n]=!0:(kl[n]=!0,!1)}function Ga(n,s,o){if(zu(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function Nn(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Dt(n,s,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+c)}}function Qt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Rs(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Dl(n,s,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,g=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,g.call(this,v)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ze(n){if(!n._valueTracker){var s=Rs(n)?"checked":"value";n._valueTracker=Dl(n,s,""+n[s])}}function Bi(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return n&&(c=Rs(n)?n.checked?"true":"false":n.value),n=c,n!==o?(s.setValue(n),!0):!1}function Cr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var qi=/[\n"\\]/g;function yn(n){return n.replace(qi,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ha(n,s,o,c,f,g,v,T){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),s!=null?v==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Qt(s)):n.value!==""+Qt(s)&&(n.value=""+Qt(s)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),s!=null?Vl(n,v,Qt(s)):o!=null?Vl(n,v,Qt(o)):c!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Qt(T):n.removeAttribute("name")}function Bu(n,s,o,c,f,g,v,T){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){Ze(n);return}o=o!=null?""+Qt(o):"",s=s!=null?""+Qt(s):o,T||s===n.value||(n.value=s),n.defaultValue=s}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=T?n.checked:!!c,n.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Ze(n)}function Vl(n,s,o){s==="number"&&Cr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function ks(n,s,o,c){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Qt(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function qu(n,s,o){if(s!=null&&(s=""+Qt(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Qt(o):""}function js(n,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(r(92));if(yt(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=Qt(s),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),Ze(n)}function xn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var Fu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ol(n,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,o):typeof o!="number"||o===0||Fu.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Ml(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in s)c=s[f],s.hasOwnProperty(f)&&o[f]!==c&&Ol(n,f,c)}else for(var g in s)s.hasOwnProperty(g)&&Ol(n,g,s[g])}function Ka(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ds=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qa(n){return Ds.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ar(){}var Pl=null;function Fn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vs=null,Rr=null;function Fi(n){var s=qn(n);if(s&&(n=s.stateNode)){var o=n[Kt]||null;e:switch(n=s.stateNode,s.type){case"input":if(Ha(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+yn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==n&&c.form===n.form){var f=c[Kt]||null;if(!f)throw Error(r(90));Ha(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===n.form&&Bi(c)}break e;case"textarea":qu(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&ks(n,!!o.multiple,s,!1)}}}var Ya=!1;function Os(n,s,o){if(Ya)return n(s,o);Ya=!0;try{var c=n(s);return c}finally{if(Ya=!1,(Vs!==null||Rr!==null)&&(Pd(),Vs&&(s=Vs,n=Rr,Rr=Vs=null,Fi(s),n)))for(s=0;s<n.length;s++)Fi(n[s])}}function or(n,s){var o=n.stateNode;if(o===null)return null;var c=o[Kt]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gi=!1;if(Gn)try{var it={};Object.defineProperty(it,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Gi=!1}var kr=null,Ll=null,Hi=null;function Ul(){if(Hi)return Hi;var n,s=Ll,o=s.length,c,f="value"in kr?kr.value:kr.textContent,g=f.length;for(n=0;n<o&&s[n]===f[n];n++);var v=o-n;for(c=1;c<=v&&s[o-c]===f[g-c];c++);return Hi=f.slice(n,1<c?1-c:void 0)}function Ki(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Xr(){return!0}function lr(){return!1}function Jt(n){function s(o,c,f,g,v){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Xr:lr,this.isPropagationStopped=lr,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),s}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jr=Jt(Wr),Ms=w({},Wr,{view:0,detail:0}),zl=Jt(Ms),Ps,$a,Dr,Xa=w({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Dr&&(Dr&&n.type==="mousemove"?(Ps=n.screenX-Dr.screenX,$a=n.screenY-Dr.screenY):$a=Ps=0,Dr=n),Ps)},movementY:function(n){return"movementY"in n?n.movementY:$a}}),Bl=Jt(Xa),Qi=w({},Xa,{dataTransfer:0}),Hu=Jt(Qi),Ku=w({},Ms,{relatedTarget:0}),Yi=Jt(Ku),ql=w({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qu=Jt(ql),Wa=w({},Wr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Yu=Jt(Wa),$u=w({},Wr,{data:0}),Vr=Jt($u),Xu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zu(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ju[n])?!!s[n]:!1}function Ls(){return Zu}var fn=w({},Ms,{key:function(n){if(n.key){var s=Xu[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ki(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Wu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(n){return n.type==="keypress"?Ki(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ki(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ed=Jt(fn),td=w({},Xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jr=Jt(td),h=w({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),x=Jt(h),_=w({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Jt(_),z=w({},Xa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),H=Jt(z),ae=w({},Wr,{newState:0,oldState:0}),ke=Jt(ae),Tt=[9,13,27,32],Xe=Gn&&"CompositionEvent"in window,mt=null;Gn&&"documentMode"in document&&(mt=document.documentMode);var Hn=Gn&&"TextEvent"in window&&!mt,Or=Gn&&(!Xe||mt&&8<mt&&11>=mt),cr=" ",ur=!1;function $i(n,s){switch(n){case"keyup":return Tt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ja(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Za=!1;function tS(n,s){switch(n){case"compositionend":return Ja(s);case"keypress":return s.which!==32?null:(ur=!0,cr);case"textInput":return n=s.data,n===cr&&ur?null:n;default:return null}}function nS(n,s){if(Za)return n==="compositionend"||!Xe&&$i(n,s)?(n=Ul(),Hi=Ll=kr=null,Za=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Or&&s.locale!=="ko"?null:s.data;default:return null}}var rS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function G0(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!rS[n.type]:s==="textarea"}function H0(n,s,o,c){Vs?Rr?Rr.push(c):Rr=[c]:Vs=c,s=Gd(s,"onChange"),0<s.length&&(o=new jr("onChange","change",null,o,c),n.push({event:o,listeners:s}))}var Fl=null,Gl=null;function sS(n){Nv(n,0)}function nd(n){var s=An(n);if(Bi(s))return n}function K0(n,s){if(n==="change")return s}var Q0=!1;if(Gn){var Lf;if(Gn){var Uf="oninput"in document;if(!Uf){var Y0=document.createElement("div");Y0.setAttribute("oninput","return;"),Uf=typeof Y0.oninput=="function"}Lf=Uf}else Lf=!1;Q0=Lf&&(!document.documentMode||9<document.documentMode)}function $0(){Fl&&(Fl.detachEvent("onpropertychange",X0),Gl=Fl=null)}function X0(n){if(n.propertyName==="value"&&nd(Gl)){var s=[];H0(s,Gl,n,Fn(n)),Os(sS,s)}}function iS(n,s,o){n==="focusin"?($0(),Fl=s,Gl=o,Fl.attachEvent("onpropertychange",X0)):n==="focusout"&&$0()}function aS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return nd(Gl)}function oS(n,s){if(n==="click")return nd(s)}function lS(n,s){if(n==="input"||n==="change")return nd(s)}function cS(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var In=typeof Object.is=="function"?Object.is:cS;function Hl(n,s){if(In(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!Ct.call(s,f)||!In(n[f],s[f]))return!1}return!0}function W0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function J0(n,s){var o=W0(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=s&&c>=s)return{node:o,offset:s-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=W0(o)}}function Z0(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Z0(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function ey(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Cr(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Cr(n.document)}return s}function zf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var uS=Gn&&"documentMode"in document&&11>=document.documentMode,eo=null,Bf=null,Kl=null,qf=!1;function ty(n,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;qf||eo==null||eo!==Cr(c)||(c=eo,"selectionStart"in c&&zf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Kl&&Hl(Kl,c)||(Kl=c,c=Gd(Bf,"onSelect"),0<c.length&&(s=new jr("onSelect","select",null,s,o),n.push({event:s,listeners:c}),s.target=eo)))}function Xi(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var to={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionrun:Xi("Transition","TransitionRun"),transitionstart:Xi("Transition","TransitionStart"),transitioncancel:Xi("Transition","TransitionCancel"),transitionend:Xi("Transition","TransitionEnd")},Ff={},ny={};Gn&&(ny=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function Wi(n){if(Ff[n])return Ff[n];if(!to[n])return n;var s=to[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in ny)return Ff[n]=s[o];return n}var ry=Wi("animationend"),sy=Wi("animationiteration"),iy=Wi("animationstart"),dS=Wi("transitionrun"),hS=Wi("transitionstart"),fS=Wi("transitioncancel"),ay=Wi("transitionend"),oy=new Map,Gf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gf.push("scrollEnd");function dr(n,s){oy.set(n,s),Nr(s,[n])}var rd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Kn=[],no=0,Hf=0;function sd(){for(var n=no,s=Hf=no=0;s<n;){var o=Kn[s];Kn[s++]=null;var c=Kn[s];Kn[s++]=null;var f=Kn[s];Kn[s++]=null;var g=Kn[s];if(Kn[s++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}g!==0&&ly(o,f,g)}}function id(n,s,o,c){Kn[no++]=n,Kn[no++]=s,Kn[no++]=o,Kn[no++]=c,Hf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Kf(n,s,o,c){return id(n,s,o,c),ad(n)}function Ji(n,s){return id(n,null,null,s),ad(n)}function ly(n,s,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&s!==null&&(f=31-Et(o),n=g.hiddenUpdates,c=n[f],c===null?n[f]=[s]:c.push(s),s.lane=o|536870912),g):null}function ad(n){if(50<mc)throw mc=0,tg=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ro={};function mS(n,s,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(n,s,o,c){return new mS(n,s,o,c)}function Qf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Zr(n,s){var o=n.alternate;return o===null?(o=Cn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function cy(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function od(n,s,o,c,f,g){var v=0;if(c=n,typeof n=="function")Qf(n)&&(v=1);else if(typeof n=="string")v=v2(n,o,de.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=Cn(31,o,s,f),n.elementType=I,n.lanes=g,n;case F:return Zi(o.children,f,g,s);case Q:v=8,f|=24;break;case ie:return n=Cn(12,o,s,f|2),n.elementType=ie,n.lanes=g,n;case be:return n=Cn(13,o,s,f),n.elementType=be,n.lanes=g,n;case ye:return n=Cn(19,o,s,f),n.elementType=ye,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case re:v=10;break e;case ne:v=9;break e;case xe:v=11;break e;case k:v=14;break e;case N:v=16,c=null;break e}v=29,o=Error(r(130,n===null?"null":typeof n,"")),c=null}return s=Cn(v,o,s,f),s.elementType=n,s.type=c,s.lanes=g,s}function Zi(n,s,o,c){return n=Cn(7,n,c,s),n.lanes=o,n}function Yf(n,s,o){return n=Cn(6,n,null,s),n.lanes=o,n}function uy(n){var s=Cn(18,null,null,0);return s.stateNode=n,s}function $f(n,s,o){return s=Cn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var dy=new WeakMap;function Qn(n,s){if(typeof n=="object"&&n!==null){var o=dy.get(n);return o!==void 0?o:(s={value:n,source:s,stack:El(s)},dy.set(n,s),s)}return{value:n,source:s,stack:El(s)}}var so=[],io=0,ld=null,Ql=0,Yn=[],$n=0,Us=null,Mr=1,Pr="";function es(n,s){so[io++]=Ql,so[io++]=ld,ld=n,Ql=s}function hy(n,s,o){Yn[$n++]=Mr,Yn[$n++]=Pr,Yn[$n++]=Us,Us=n;var c=Mr;n=Pr;var f=32-Et(c)-1;c&=~(1<<f),o+=1;var g=32-Et(s)+f;if(30<g){var v=f-f%5;g=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Mr=1<<32-Et(s)+f|o<<f|c,Pr=g+n}else Mr=1<<g|o<<f|c,Pr=n}function Xf(n){n.return!==null&&(es(n,1),hy(n,1,0))}function Wf(n){for(;n===ld;)ld=so[--io],so[io]=null,Ql=so[--io],so[io]=null;for(;n===Us;)Us=Yn[--$n],Yn[$n]=null,Pr=Yn[--$n],Yn[$n]=null,Mr=Yn[--$n],Yn[$n]=null}function fy(n,s){Yn[$n++]=Mr,Yn[$n++]=Pr,Yn[$n++]=Us,Mr=s.id,Pr=s.overflow,Us=n}var Zt=null,dt=null,Ge=!1,zs=null,Xn=!1,Jf=Error(r(519));function Bs(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yl(Qn(s,n)),Jf}function my(n){var s=n.stateNode,o=n.type,c=n.memoizedProps;switch(s[kt]=n,s[Kt]=c,o){case"dialog":Le("cancel",s),Le("close",s);break;case"iframe":case"object":case"embed":Le("load",s);break;case"video":case"audio":for(o=0;o<pc.length;o++)Le(pc[o],s);break;case"source":Le("error",s);break;case"img":case"image":case"link":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"input":Le("invalid",s),Bu(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Le("invalid",s);break;case"textarea":Le("invalid",s),js(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||kv(s.textContent,o)?(c.popover!=null&&(Le("beforetoggle",s),Le("toggle",s)),c.onScroll!=null&&Le("scroll",s),c.onScrollEnd!=null&&Le("scrollend",s),c.onClick!=null&&(s.onclick=ar),s=!0):s=!1,s||Bs(n,!0)}function gy(n){for(Zt=n.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:Xn=!1;return;case 27:case 3:Xn=!0;return;default:Zt=Zt.return}}function ao(n){if(n!==Zt)return!1;if(!Ge)return gy(n),Ge=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||pg(n.type,n.memoizedProps)),o=!o),o&&dt&&Bs(n),gy(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));dt=zv(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));dt=zv(n)}else s===27?(s=dt,ti(n.type)?(n=_g,_g=null,dt=n):dt=s):dt=Zt?Jn(n.stateNode.nextSibling):null;return!0}function ea(){dt=Zt=null,Ge=!1}function Zf(){var n=zs;return n!==null&&(wn===null?wn=n:wn.push.apply(wn,n),zs=null),n}function Yl(n){zs===null?zs=[n]:zs.push(n)}var em=M(null),ta=null,ts=null;function qs(n,s,o){ce(em,s._currentValue),s._currentValue=o}function ns(n){n._currentValue=em.current,Z(em)}function tm(n,s,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===o)break;n=n.return}}function nm(n,s,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var v=f.child;g=g.firstContext;e:for(;g!==null;){var T=g;g=f;for(var D=0;D<s.length;D++)if(T.context===s[D]){g.lanes|=o,T=g.alternate,T!==null&&(T.lanes|=o),tm(g.return,o,n),c||(v=null);break e}g=T.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=o,g=v.alternate,g!==null&&(g.lanes|=o),tm(v,o,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function oo(n,s,o,c){n=null;for(var f=s,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=f.type;In(f.pendingProps.value,v.value)||(n!==null?n.push(T):n=[T])}}else if(f===He.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(_c):n=[_c])}f=f.return}n!==null&&nm(s,n,o,c),s.flags|=262144}function cd(n){for(n=n.firstContext;n!==null;){if(!In(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function na(n){ta=n,ts=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function en(n){return py(ta,n)}function ud(n,s){return ta===null&&na(n),py(n,s)}function py(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ts===null){if(n===null)throw Error(r(308));ts=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ts=ts.next=s;return o}var gS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},pS=i.unstable_scheduleCallback,yS=i.unstable_NormalPriority,Vt={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rm(){return{controller:new gS,data:new Map,refCount:0}}function $l(n){n.refCount--,n.refCount===0&&pS(yS,function(){n.controller.abort()})}var Xl=null,sm=0,lo=0,co=null;function xS(n,s){if(Xl===null){var o=Xl=[];sm=0,lo=og(),co={status:"pending",value:void 0,then:function(c){o.push(c)}}}return sm++,s.then(yy,yy),s}function yy(){if(--sm===0&&Xl!==null){co!==null&&(co.status="fulfilled");var n=Xl;Xl=null,lo=0,co=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function vS(n,s){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var xy=Y.S;Y.S=function(n,s){tv=hn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&xS(n,s),xy!==null&&xy(n,s)};var ra=M(null);function im(){var n=ra.current;return n!==null?n:ct.pooledCache}function dd(n,s){s===null?ce(ra,ra.current):ce(ra,s.pool)}function vy(){var n=im();return n===null?null:{parent:Vt._currentValue,pool:n}}var uo=Error(r(460)),am=Error(r(474)),hd=Error(r(542)),fd={then:function(){}};function by(n){return n=n.status,n==="fulfilled"||n==="rejected"}function _y(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(ar,ar),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Ey(n),n;default:if(typeof s.status=="string")s.then(ar,ar);else{if(n=ct,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=c}},function(c){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Ey(n),n}throw ia=s,uo}}function sa(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ia=o,uo):o}}var ia=null;function wy(){if(ia===null)throw Error(r(459));var n=ia;return ia=null,n}function Ey(n){if(n===uo||n===hd)throw Error(r(483))}var ho=null,Wl=0;function md(n){var s=Wl;return Wl+=1,ho===null&&(ho=[]),_y(ho,n,s)}function Jl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function gd(n,s){throw s.$$typeof===E?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Ty(n){function s(P,O){if(n){var B=P.deletions;B===null?(P.deletions=[O],P.flags|=16):B.push(O)}}function o(P,O){if(!n)return null;for(;O!==null;)s(P,O),O=O.sibling;return null}function c(P){for(var O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function f(P,O){return P=Zr(P,O),P.index=0,P.sibling=null,P}function g(P,O,B){return P.index=B,n?(B=P.alternate,B!==null?(B=B.index,B<O?(P.flags|=67108866,O):B):(P.flags|=67108866,O)):(P.flags|=1048576,O)}function v(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function T(P,O,B,W){return O===null||O.tag!==6?(O=Yf(B,P.mode,W),O.return=P,O):(O=f(O,B),O.return=P,O)}function D(P,O,B,W){var we=B.type;return we===F?$(P,O,B.props.children,W,B.key):O!==null&&(O.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===N&&sa(we)===O.type)?(O=f(O,B.props),Jl(O,B),O.return=P,O):(O=od(B.type,B.key,B.props,null,P.mode,W),Jl(O,B),O.return=P,O)}function q(P,O,B,W){return O===null||O.tag!==4||O.stateNode.containerInfo!==B.containerInfo||O.stateNode.implementation!==B.implementation?(O=$f(B,P.mode,W),O.return=P,O):(O=f(O,B.children||[]),O.return=P,O)}function $(P,O,B,W,we){return O===null||O.tag!==7?(O=Zi(B,P.mode,W,we),O.return=P,O):(O=f(O,B),O.return=P,O)}function J(P,O,B){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Yf(""+O,P.mode,B),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case j:return B=od(O.type,O.key,O.props,null,P.mode,B),Jl(B,O),B.return=P,B;case L:return O=$f(O,P.mode,B),O.return=P,O;case N:return O=sa(O),J(P,O,B)}if(yt(O)||V(O))return O=Zi(O,P.mode,B,null),O.return=P,O;if(typeof O.then=="function")return J(P,md(O),B);if(O.$$typeof===re)return J(P,ud(P,O),B);gd(P,O)}return null}function G(P,O,B,W){var we=O!==null?O.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return we!==null?null:T(P,O,""+B,W);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case j:return B.key===we?D(P,O,B,W):null;case L:return B.key===we?q(P,O,B,W):null;case N:return B=sa(B),G(P,O,B,W)}if(yt(B)||V(B))return we!==null?null:$(P,O,B,W,null);if(typeof B.then=="function")return G(P,O,md(B),W);if(B.$$typeof===re)return G(P,O,ud(P,B),W);gd(P,B)}return null}function K(P,O,B,W,we){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return P=P.get(B)||null,T(O,P,""+W,we);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case j:return P=P.get(W.key===null?B:W.key)||null,D(O,P,W,we);case L:return P=P.get(W.key===null?B:W.key)||null,q(O,P,W,we);case N:return W=sa(W),K(P,O,B,W,we)}if(yt(W)||V(W))return P=P.get(B)||null,$(O,P,W,we,null);if(typeof W.then=="function")return K(P,O,B,md(W),we);if(W.$$typeof===re)return K(P,O,B,ud(O,W),we);gd(O,W)}return null}function fe(P,O,B,W){for(var we=null,Qe=null,pe=O,Ve=O=0,ze=null;pe!==null&&Ve<B.length;Ve++){pe.index>Ve?(ze=pe,pe=null):ze=pe.sibling;var Ye=G(P,pe,B[Ve],W);if(Ye===null){pe===null&&(pe=ze);break}n&&pe&&Ye.alternate===null&&s(P,pe),O=g(Ye,O,Ve),Qe===null?we=Ye:Qe.sibling=Ye,Qe=Ye,pe=ze}if(Ve===B.length)return o(P,pe),Ge&&es(P,Ve),we;if(pe===null){for(;Ve<B.length;Ve++)pe=J(P,B[Ve],W),pe!==null&&(O=g(pe,O,Ve),Qe===null?we=pe:Qe.sibling=pe,Qe=pe);return Ge&&es(P,Ve),we}for(pe=c(pe);Ve<B.length;Ve++)ze=K(pe,P,Ve,B[Ve],W),ze!==null&&(n&&ze.alternate!==null&&pe.delete(ze.key===null?Ve:ze.key),O=g(ze,O,Ve),Qe===null?we=ze:Qe.sibling=ze,Qe=ze);return n&&pe.forEach(function(ai){return s(P,ai)}),Ge&&es(P,Ve),we}function Te(P,O,B,W){if(B==null)throw Error(r(151));for(var we=null,Qe=null,pe=O,Ve=O=0,ze=null,Ye=B.next();pe!==null&&!Ye.done;Ve++,Ye=B.next()){pe.index>Ve?(ze=pe,pe=null):ze=pe.sibling;var ai=G(P,pe,Ye.value,W);if(ai===null){pe===null&&(pe=ze);break}n&&pe&&ai.alternate===null&&s(P,pe),O=g(ai,O,Ve),Qe===null?we=ai:Qe.sibling=ai,Qe=ai,pe=ze}if(Ye.done)return o(P,pe),Ge&&es(P,Ve),we;if(pe===null){for(;!Ye.done;Ve++,Ye=B.next())Ye=J(P,Ye.value,W),Ye!==null&&(O=g(Ye,O,Ve),Qe===null?we=Ye:Qe.sibling=Ye,Qe=Ye);return Ge&&es(P,Ve),we}for(pe=c(pe);!Ye.done;Ve++,Ye=B.next())Ye=K(pe,P,Ve,Ye.value,W),Ye!==null&&(n&&Ye.alternate!==null&&pe.delete(Ye.key===null?Ve:Ye.key),O=g(Ye,O,Ve),Qe===null?we=Ye:Qe.sibling=Ye,Qe=Ye);return n&&pe.forEach(function(R2){return s(P,R2)}),Ge&&es(P,Ve),we}function lt(P,O,B,W){if(typeof B=="object"&&B!==null&&B.type===F&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case j:e:{for(var we=B.key;O!==null;){if(O.key===we){if(we=B.type,we===F){if(O.tag===7){o(P,O.sibling),W=f(O,B.props.children),W.return=P,P=W;break e}}else if(O.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===N&&sa(we)===O.type){o(P,O.sibling),W=f(O,B.props),Jl(W,B),W.return=P,P=W;break e}o(P,O);break}else s(P,O);O=O.sibling}B.type===F?(W=Zi(B.props.children,P.mode,W,B.key),W.return=P,P=W):(W=od(B.type,B.key,B.props,null,P.mode,W),Jl(W,B),W.return=P,P=W)}return v(P);case L:e:{for(we=B.key;O!==null;){if(O.key===we)if(O.tag===4&&O.stateNode.containerInfo===B.containerInfo&&O.stateNode.implementation===B.implementation){o(P,O.sibling),W=f(O,B.children||[]),W.return=P,P=W;break e}else{o(P,O);break}else s(P,O);O=O.sibling}W=$f(B,P.mode,W),W.return=P,P=W}return v(P);case N:return B=sa(B),lt(P,O,B,W)}if(yt(B))return fe(P,O,B,W);if(V(B)){if(we=V(B),typeof we!="function")throw Error(r(150));return B=we.call(B),Te(P,O,B,W)}if(typeof B.then=="function")return lt(P,O,md(B),W);if(B.$$typeof===re)return lt(P,O,ud(P,B),W);gd(P,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,O!==null&&O.tag===6?(o(P,O.sibling),W=f(O,B),W.return=P,P=W):(o(P,O),W=Yf(B,P.mode,W),W.return=P,P=W),v(P)):o(P,O)}return function(P,O,B,W){try{Wl=0;var we=lt(P,O,B,W);return ho=null,we}catch(pe){if(pe===uo||pe===hd)throw pe;var Qe=Cn(29,pe,null,P.mode);return Qe.lanes=W,Qe.return=P,Qe}finally{}}}var aa=Ty(!0),Sy=Ty(!1),Fs=!1;function om(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Gs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Hs(n,s,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,s=ad(n),ly(n,null,o),s}return id(n,c,s,o),ad(n)}function Zl(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,Al(n,o)}}function cm(n,s){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=v:g=g.next=v,o=o.next}while(o!==null);g===null?f=g=s:g=g.next=s}else f=g=s;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var um=!1;function ec(){if(um){var n=co;if(n!==null)throw n}}function tc(n,s,o,c){um=!1;var f=n.updateQueue;Fs=!1;var g=f.firstBaseUpdate,v=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var D=T,q=D.next;D.next=null,v===null?g=q:v.next=q,v=D;var $=n.alternate;$!==null&&($=$.updateQueue,T=$.lastBaseUpdate,T!==v&&(T===null?$.firstBaseUpdate=q:T.next=q,$.lastBaseUpdate=D))}if(g!==null){var J=f.baseState;v=0,$=q=D=null,T=g;do{var G=T.lane&-536870913,K=G!==T.lane;if(K?(Ue&G)===G:(c&G)===G){G!==0&&G===lo&&(um=!0),$!==null&&($=$.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var fe=n,Te=T;G=s;var lt=o;switch(Te.tag){case 1:if(fe=Te.payload,typeof fe=="function"){J=fe.call(lt,J,G);break e}J=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=Te.payload,G=typeof fe=="function"?fe.call(lt,J,G):fe,G==null)break e;J=w({},J,G);break e;case 2:Fs=!0}}G=T.callback,G!==null&&(n.flags|=64,K&&(n.flags|=8192),K=f.callbacks,K===null?f.callbacks=[G]:K.push(G))}else K={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},$===null?(q=$=K,D=J):$=$.next=K,v|=G;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;K=T,T=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);$===null&&(D=J),f.baseState=D,f.firstBaseUpdate=q,f.lastBaseUpdate=$,g===null&&(f.shared.lanes=0),Xs|=v,n.lanes=v,n.memoizedState=J}}function Ay(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function Ny(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Ay(o[n],s)}var fo=M(null),pd=M(0);function Iy(n,s){n=ds,ce(pd,n),ce(fo,s),ds=n|s.baseLanes}function dm(){ce(pd,ds),ce(fo,fo.current)}function hm(){ds=pd.current,Z(fo),Z(pd)}var Rn=M(null),Wn=null;function Ks(n){var s=n.alternate;ce(St,St.current&1),ce(Rn,n),Wn===null&&(s===null||fo.current!==null||s.memoizedState!==null)&&(Wn=n)}function fm(n){ce(St,St.current),ce(Rn,n),Wn===null&&(Wn=n)}function Cy(n){n.tag===22?(ce(St,St.current),ce(Rn,n),Wn===null&&(Wn=n)):Qs()}function Qs(){ce(St,St.current),ce(Rn,Rn.current)}function kn(n){Z(Rn),Wn===n&&(Wn=null),Z(St)}var St=M(0);function yd(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||vg(o)||bg(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var rs=0,je=null,at=null,Ot=null,xd=!1,mo=!1,oa=!1,vd=0,nc=0,go=null,bS=0;function vt(){throw Error(r(321))}function mm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!In(n[o],s[o]))return!1;return!0}function gm(n,s,o,c,f,g){return rs=g,je=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Y.H=n===null||n.memoizedState===null?hx:Rm,oa=!1,g=o(c,f),oa=!1,mo&&(g=ky(s,o,c,f)),Ry(n),g}function Ry(n){Y.H=ic;var s=at!==null&&at.next!==null;if(rs=0,Ot=at=je=null,xd=!1,nc=0,go=null,s)throw Error(r(300));n===null||Mt||(n=n.dependencies,n!==null&&cd(n)&&(Mt=!0))}function ky(n,s,o,c){je=n;var f=0;do{if(mo&&(go=null),nc=0,mo=!1,25<=f)throw Error(r(301));if(f+=1,Ot=at=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}Y.H=fx,g=s(o,c)}while(mo);return g}function _S(){var n=Y.H,s=n.useState()[0];return s=typeof s.then=="function"?rc(s):s,n=n.useState()[0],(at!==null?at.memoizedState:null)!==n&&(je.flags|=1024),s}function pm(){var n=vd!==0;return vd=0,n}function ym(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function xm(n){if(xd){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}xd=!1}rs=0,Ot=at=je=null,mo=!1,nc=vd=0,go=null}function mn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?je.memoizedState=Ot=n:Ot=Ot.next=n,Ot}function At(){if(at===null){var n=je.alternate;n=n!==null?n.memoizedState:null}else n=at.next;var s=Ot===null?je.memoizedState:Ot.next;if(s!==null)Ot=s,at=n;else{if(n===null)throw je.alternate===null?Error(r(467)):Error(r(310));at=n,n={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Ot===null?je.memoizedState=Ot=n:Ot=Ot.next=n}return Ot}function bd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rc(n){var s=nc;return nc+=1,go===null&&(go=[]),n=_y(go,n,s),s=je,(Ot===null?s.memoizedState:Ot.next)===null&&(s=s.alternate,Y.H=s===null||s.memoizedState===null?hx:Rm),n}function _d(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return rc(n);if(n.$$typeof===re)return en(n)}throw Error(r(438,String(n)))}function vm(n){var s=null,o=je.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=je.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=bd(),je.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),c=0;c<n;c++)o[c]=R;return s.index++,o}function ss(n,s){return typeof s=="function"?s(n):s}function wd(n){var s=At();return bm(s,at,n)}function bm(n,s,o){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var f=n.baseQueue,g=c.pending;if(g!==null){if(f!==null){var v=f.next;f.next=g.next,g.next=v}s.baseQueue=f=g,c.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{s=f.next;var T=v=null,D=null,q=s,$=!1;do{var J=q.lane&-536870913;if(J!==q.lane?(Ue&J)===J:(rs&J)===J){var G=q.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),J===lo&&($=!0);else if((rs&G)===G){q=q.next,G===lo&&($=!0);continue}else J={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(T=D=J,v=g):D=D.next=J,je.lanes|=G,Xs|=G;J=q.action,oa&&o(g,J),g=q.hasEagerState?q.eagerState:o(g,J)}else G={lane:J,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(T=D=G,v=g):D=D.next=G,je.lanes|=J,Xs|=J;q=q.next}while(q!==null&&q!==s);if(D===null?v=g:D.next=T,!In(g,n.memoizedState)&&(Mt=!0,$&&(o=co,o!==null)))throw o;n.memoizedState=g,n.baseState=v,n.baseQueue=D,c.lastRenderedState=g}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function _m(n){var s=At(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,g=s.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do g=n(g,v.action),v=v.next;while(v!==f);In(g,s.memoizedState)||(Mt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,c]}function jy(n,s,o){var c=je,f=At(),g=Ge;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=s();var v=!In((at||f).memoizedState,o);if(v&&(f.memoizedState=o,Mt=!0),f=f.queue,Tm(Oy.bind(null,c,f,n),[n]),f.getSnapshot!==s||v||Ot!==null&&Ot.memoizedState.tag&1){if(c.flags|=2048,po(9,{destroy:void 0},Vy.bind(null,c,f,o,s),null),ct===null)throw Error(r(349));g||(rs&127)!==0||Dy(c,s,o)}return o}function Dy(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=je.updateQueue,s===null?(s=bd(),je.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function Vy(n,s,o,c){s.value=o,s.getSnapshot=c,My(s)&&Py(n)}function Oy(n,s,o){return o(function(){My(s)&&Py(n)})}function My(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!In(n,o)}catch{return!0}}function Py(n){var s=Ji(n,2);s!==null&&En(s,n,2)}function wm(n){var s=mn();if(typeof n=="function"){var o=n;if(n=o(),oa){Bn(!0);try{o()}finally{Bn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:n},s}function Ly(n,s,o,c){return n.baseState=o,bm(n,at,typeof c=="function"?c:ss)}function wS(n,s,o,c,f){if(Sd(n))throw Error(r(485));if(n=s.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){g.listeners.push(v)}};Y.T!==null?o(!0):g.isTransition=!1,c(g),o=s.pending,o===null?(g.next=s.pending=g,Uy(s,g)):(g.next=o.next,s.pending=o.next=g)}}function Uy(n,s){var o=s.action,c=s.payload,f=n.state;if(s.isTransition){var g=Y.T,v={};Y.T=v;try{var T=o(f,c),D=Y.S;D!==null&&D(v,T),zy(n,s,T)}catch(q){Em(n,s,q)}finally{g!==null&&v.types!==null&&(g.types=v.types),Y.T=g}}else try{g=o(f,c),zy(n,s,g)}catch(q){Em(n,s,q)}}function zy(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){By(n,s,c)},function(c){return Em(n,s,c)}):By(n,s,o)}function By(n,s,o){s.status="fulfilled",s.value=o,qy(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Uy(n,o)))}function Em(n,s,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,qy(s),s=s.next;while(s!==c)}n.action=null}function qy(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Fy(n,s){return s}function Gy(n,s){if(Ge){var o=ct.formState;if(o!==null){e:{var c=je;if(Ge){if(dt){t:{for(var f=dt,g=Xn;f.nodeType!==8;){if(!g){f=null;break t}if(f=Jn(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){dt=Jn(f.nextSibling),c=f.data==="F!";break e}}Bs(c)}c=!1}c&&(s=o[0])}}return o=mn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fy,lastRenderedState:s},o.queue=c,o=cx.bind(null,je,c),c.dispatch=o,c=wm(!1),g=Cm.bind(null,je,!1,c.queue),c=mn(),f={state:s,dispatch:null,action:n,pending:null},c.queue=f,o=wS.bind(null,je,f,g,o),f.dispatch=o,c.memoizedState=n,[s,o,!1]}function Hy(n){var s=At();return Ky(s,at,n)}function Ky(n,s,o){if(s=bm(n,s,Fy)[0],n=wd(ss)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=rc(s)}catch(v){throw v===uo?hd:v}else c=s;s=At();var f=s.queue,g=f.dispatch;return o!==s.memoizedState&&(je.flags|=2048,po(9,{destroy:void 0},ES.bind(null,f,o),null)),[c,g,n]}function ES(n,s){n.action=s}function Qy(n){var s=At(),o=at;if(o!==null)return Ky(s,o,n);At(),s=s.memoizedState,o=At();var c=o.queue.dispatch;return o.memoizedState=n,[s,c,!1]}function po(n,s,o,c){return n={tag:n,create:o,deps:c,inst:s,next:null},s=je.updateQueue,s===null&&(s=bd(),je.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,s.lastEffect=n),n}function Yy(){return At().memoizedState}function Ed(n,s,o,c){var f=mn();je.flags|=n,f.memoizedState=po(1|s,{destroy:void 0},o,c===void 0?null:c)}function Td(n,s,o,c){var f=At();c=c===void 0?null:c;var g=f.memoizedState.inst;at!==null&&c!==null&&mm(c,at.memoizedState.deps)?f.memoizedState=po(s,g,o,c):(je.flags|=n,f.memoizedState=po(1|s,g,o,c))}function $y(n,s){Ed(8390656,8,n,s)}function Tm(n,s){Td(2048,8,n,s)}function TS(n){je.flags|=4;var s=je.updateQueue;if(s===null)s=bd(),je.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function Xy(n){var s=At().memoizedState;return TS({ref:s,nextImpl:n}),function(){if((We&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Wy(n,s){return Td(4,2,n,s)}function Jy(n,s){return Td(4,4,n,s)}function Zy(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function ex(n,s,o){o=o!=null?o.concat([n]):null,Td(4,4,Zy.bind(null,s,n),o)}function Sm(){}function tx(n,s){var o=At();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&mm(s,c[1])?c[0]:(o.memoizedState=[n,s],n)}function nx(n,s){var o=At();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&mm(s,c[1]))return c[0];if(c=n(),oa){Bn(!0);try{n()}finally{Bn(!1)}}return o.memoizedState=[c,s],c}function Am(n,s,o){return o===void 0||(rs&1073741824)!==0&&(Ue&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=rv(),je.lanes|=n,Xs|=n,o)}function rx(n,s,o,c){return In(o,s)?o:fo.current!==null?(n=Am(n,o,c),In(n,s)||(Mt=!0),n):(rs&42)===0||(rs&1073741824)!==0&&(Ue&261930)===0?(Mt=!0,n.memoizedState=o):(n=rv(),je.lanes|=n,Xs|=n,s)}function sx(n,s,o,c,f){var g=le.p;le.p=g!==0&&8>g?g:8;var v=Y.T,T={};Y.T=T,Cm(n,!1,s,o);try{var D=f(),q=Y.S;if(q!==null&&q(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var $=vS(D,c);sc(n,s,$,Vn(n))}else sc(n,s,c,Vn(n))}catch(J){sc(n,s,{then:function(){},status:"rejected",reason:J},Vn())}finally{le.p=g,v!==null&&T.types!==null&&(v.types=T.types),Y.T=v}}function SS(){}function Nm(n,s,o,c){if(n.tag!==5)throw Error(r(476));var f=ix(n).queue;sx(n,f,s,_e,o===null?SS:function(){return ax(n),o(c)})}function ix(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:_e},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function ax(n){var s=ix(n);s.next===null&&(s=n.alternate.memoizedState),sc(n,s.next.queue,{},Vn())}function Im(){return en(_c)}function ox(){return At().memoizedState}function lx(){return At().memoizedState}function AS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Vn();n=Gs(o);var c=Hs(s,n,o);c!==null&&(En(c,s,o),Zl(c,s,o)),s={cache:rm()},n.payload=s;return}s=s.return}}function NS(n,s,o){var c=Vn();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Sd(n)?ux(s,o):(o=Kf(n,s,o,c),o!==null&&(En(o,n,c),dx(o,s,c)))}function cx(n,s,o){var c=Vn();sc(n,s,o,c)}function sc(n,s,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Sd(n))ux(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var v=s.lastRenderedState,T=g(v,o);if(f.hasEagerState=!0,f.eagerState=T,In(T,v))return id(n,s,f,0),ct===null&&sd(),!1}catch{}finally{}if(o=Kf(n,s,f,c),o!==null)return En(o,n,c),dx(o,s,c),!0}return!1}function Cm(n,s,o,c){if(c={lane:2,revertLane:og(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Sd(n)){if(s)throw Error(r(479))}else s=Kf(n,o,c,2),s!==null&&En(s,n,2)}function Sd(n){var s=n.alternate;return n===je||s!==null&&s===je}function ux(n,s){mo=xd=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function dx(n,s,o){if((o&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,Al(n,o)}}var ic={readContext:en,use:_d,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};ic.useEffectEvent=vt;var hx={readContext:en,use:_d,useCallback:function(n,s){return mn().memoizedState=[n,s===void 0?null:s],n},useContext:en,useEffect:$y,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Ed(4194308,4,Zy.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Ed(4194308,4,n,s)},useInsertionEffect:function(n,s){Ed(4,2,n,s)},useMemo:function(n,s){var o=mn();s=s===void 0?null:s;var c=n();if(oa){Bn(!0);try{n()}finally{Bn(!1)}}return o.memoizedState=[c,s],c},useReducer:function(n,s,o){var c=mn();if(o!==void 0){var f=o(s);if(oa){Bn(!0);try{o(s)}finally{Bn(!1)}}}else f=s;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=NS.bind(null,je,n),[c.memoizedState,n]},useRef:function(n){var s=mn();return n={current:n},s.memoizedState=n},useState:function(n){n=wm(n);var s=n.queue,o=cx.bind(null,je,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Sm,useDeferredValue:function(n,s){var o=mn();return Am(o,n,s)},useTransition:function(){var n=wm(!1);return n=sx.bind(null,je,n.queue,!0,!1),mn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var c=je,f=mn();if(Ge){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),ct===null)throw Error(r(349));(Ue&127)!==0||Dy(c,s,o)}f.memoizedState=o;var g={value:o,getSnapshot:s};return f.queue=g,$y(Oy.bind(null,c,g,n),[n]),c.flags|=2048,po(9,{destroy:void 0},Vy.bind(null,c,g,o,s),null),o},useId:function(){var n=mn(),s=ct.identifierPrefix;if(Ge){var o=Pr,c=Mr;o=(c&~(1<<32-Et(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=vd++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=bS++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Im,useFormState:Gy,useActionState:Gy,useOptimistic:function(n){var s=mn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Cm.bind(null,je,!0,o),o.dispatch=s,[n,s]},useMemoCache:vm,useCacheRefresh:function(){return mn().memoizedState=AS.bind(null,je)},useEffectEvent:function(n){var s=mn(),o={impl:n};return s.memoizedState=o,function(){if((We&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Rm={readContext:en,use:_d,useCallback:tx,useContext:en,useEffect:Tm,useImperativeHandle:ex,useInsertionEffect:Wy,useLayoutEffect:Jy,useMemo:nx,useReducer:wd,useRef:Yy,useState:function(){return wd(ss)},useDebugValue:Sm,useDeferredValue:function(n,s){var o=At();return rx(o,at.memoizedState,n,s)},useTransition:function(){var n=wd(ss)[0],s=At().memoizedState;return[typeof n=="boolean"?n:rc(n),s]},useSyncExternalStore:jy,useId:ox,useHostTransitionStatus:Im,useFormState:Hy,useActionState:Hy,useOptimistic:function(n,s){var o=At();return Ly(o,at,n,s)},useMemoCache:vm,useCacheRefresh:lx};Rm.useEffectEvent=Xy;var fx={readContext:en,use:_d,useCallback:tx,useContext:en,useEffect:Tm,useImperativeHandle:ex,useInsertionEffect:Wy,useLayoutEffect:Jy,useMemo:nx,useReducer:_m,useRef:Yy,useState:function(){return _m(ss)},useDebugValue:Sm,useDeferredValue:function(n,s){var o=At();return at===null?Am(o,n,s):rx(o,at.memoizedState,n,s)},useTransition:function(){var n=_m(ss)[0],s=At().memoizedState;return[typeof n=="boolean"?n:rc(n),s]},useSyncExternalStore:jy,useId:ox,useHostTransitionStatus:Im,useFormState:Qy,useActionState:Qy,useOptimistic:function(n,s){var o=At();return at!==null?Ly(o,at,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:vm,useCacheRefresh:lx};fx.useEffectEvent=Xy;function km(n,s,o,c){s=n.memoizedState,o=o(c,s),o=o==null?s:w({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var jm={enqueueSetState:function(n,s,o){n=n._reactInternals;var c=Vn(),f=Gs(c);f.payload=s,o!=null&&(f.callback=o),s=Hs(n,f,c),s!==null&&(En(s,n,c),Zl(s,n,c))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var c=Vn(),f=Gs(c);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Hs(n,f,c),s!==null&&(En(s,n,c),Zl(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Vn(),c=Gs(o);c.tag=2,s!=null&&(c.callback=s),s=Hs(n,c,o),s!==null&&(En(s,n,o),Zl(s,n,o))}};function mx(n,s,o,c,f,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,v):s.prototype&&s.prototype.isPureReactComponent?!Hl(o,c)||!Hl(f,g):!0}function gx(n,s,o,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==n&&jm.enqueueReplaceState(s,s.state,null)}function la(n,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(n=n.defaultProps){o===s&&(o=w({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function px(n){rd(n)}function yx(n){console.error(n)}function xx(n){rd(n)}function Ad(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function vx(n,s,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Dm(n,s,o){return o=Gs(o),o.tag=3,o.payload={element:null},o.callback=function(){Ad(n,s)},o}function bx(n){return n=Gs(n),n.tag=3,n}function _x(n,s,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;n.payload=function(){return f(g)},n.callback=function(){vx(s,o,c)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){vx(s,o,c),typeof f!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var T=c.stack;this.componentDidCatch(c.value,{componentStack:T!==null?T:""})})}function IS(n,s,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&oo(s,o,f,!0),o=Rn.current,o!==null){switch(o.tag){case 31:case 13:return Wn===null?Ld():o.alternate===null&&bt===0&&(bt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===fd?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),sg(n,c,f)),!1;case 22:return o.flags|=65536,c===fd?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),sg(n,c,f)),!1}throw Error(r(435,o.tag))}return sg(n,c,f),Ld(),!1}if(Ge)return s=Rn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,c!==Jf&&(n=Error(r(422),{cause:c}),Yl(Qn(n,o)))):(c!==Jf&&(s=Error(r(423),{cause:c}),Yl(Qn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Qn(c,o),f=Dm(n.stateNode,c,f),cm(n,f),bt!==4&&(bt=2)),!1;var g=Error(r(520),{cause:c});if(g=Qn(g,o),fc===null?fc=[g]:fc.push(g),bt!==4&&(bt=2),s===null)return!0;c=Qn(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Dm(o.stateNode,c,n),cm(o,n),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ws===null||!Ws.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=bx(f),_x(f,n,o,c),cm(o,f),!1}o=o.return}while(o!==null);return!1}var Vm=Error(r(461)),Mt=!1;function tn(n,s,o,c){s.child=n===null?Sy(s,null,o,c):aa(s,n.child,o,c)}function wx(n,s,o,c,f){o=o.render;var g=s.ref;if("ref"in c){var v={};for(var T in c)T!=="ref"&&(v[T]=c[T])}else v=c;return na(s),c=gm(n,s,o,v,g,f),T=pm(),n!==null&&!Mt?(ym(n,s,f),is(n,s,f)):(Ge&&T&&Xf(s),s.flags|=1,tn(n,s,c,f),s.child)}function Ex(n,s,o,c,f){if(n===null){var g=o.type;return typeof g=="function"&&!Qf(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,Tx(n,s,g,c,f)):(n=od(o.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!qm(n,f)){var v=g.memoizedProps;if(o=o.compare,o=o!==null?o:Hl,o(v,c)&&n.ref===s.ref)return is(n,s,f)}return s.flags|=1,n=Zr(g,c),n.ref=s.ref,n.return=s,s.child=n}function Tx(n,s,o,c,f){if(n!==null){var g=n.memoizedProps;if(Hl(g,c)&&n.ref===s.ref)if(Mt=!1,s.pendingProps=c=g,qm(n,f))(n.flags&131072)!==0&&(Mt=!0);else return s.lanes=n.lanes,is(n,s,f)}return Om(n,s,o,c,f)}function Sx(n,s,o,c){var f=c.children,g=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,n!==null){for(c=s.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~g}else c=0,s.child=null;return Ax(n,s,g,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&dd(s,g!==null?g.cachePool:null),g!==null?Iy(s,g):dm(),Cy(s);else return c=s.lanes=536870912,Ax(n,s,g!==null?g.baseLanes|o:o,o,c)}else g!==null?(dd(s,g.cachePool),Iy(s,g),Qs(),s.memoizedState=null):(n!==null&&dd(s,null),dm(),Qs());return tn(n,s,f,o),s.child}function ac(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Ax(n,s,o,c,f){var g=im();return g=g===null?null:{parent:Vt._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},n!==null&&dd(s,null),dm(),Cy(s),n!==null&&oo(n,s,c,!0),s.childLanes=f,null}function Nd(n,s){return s=Cd({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Nx(n,s,o){return aa(s,n.child,null,o),n=Nd(s,s.pendingProps),n.flags|=2,kn(s),s.memoizedState=null,n}function CS(n,s,o){var c=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Ge){if(c.mode==="hidden")return n=Nd(s,c),s.lanes=536870912,ac(null,n);if(fm(s),(n=dt)?(n=Uv(n,Xn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Us!==null?{id:Mr,overflow:Pr}:null,retryLane:536870912,hydrationErrors:null},o=uy(n),o.return=s,s.child=o,Zt=s,dt=null)):n=null,n===null)throw Bs(s);return s.lanes=536870912,null}return Nd(s,c)}var g=n.memoizedState;if(g!==null){var v=g.dehydrated;if(fm(s),f)if(s.flags&256)s.flags&=-257,s=Nx(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(Mt||oo(n,s,o,!1),f=(o&n.childLanes)!==0,Mt||f){if(c=ct,c!==null&&(v=Nl(c,o),v!==0&&v!==g.retryLane))throw g.retryLane=v,Ji(n,v),En(c,n,v),Vm;Ld(),s=Nx(n,s,o)}else n=g.treeContext,dt=Jn(v.nextSibling),Zt=s,Ge=!0,zs=null,Xn=!1,n!==null&&fy(s,n),s=Nd(s,c),s.flags|=4096;return s}return n=Zr(n.child,{mode:c.mode,children:c.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Id(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Om(n,s,o,c,f){return na(s),o=gm(n,s,o,c,void 0,f),c=pm(),n!==null&&!Mt?(ym(n,s,f),is(n,s,f)):(Ge&&c&&Xf(s),s.flags|=1,tn(n,s,o,f),s.child)}function Ix(n,s,o,c,f,g){return na(s),s.updateQueue=null,o=ky(s,c,o,f),Ry(n),c=pm(),n!==null&&!Mt?(ym(n,s,g),is(n,s,g)):(Ge&&c&&Xf(s),s.flags|=1,tn(n,s,o,g),s.child)}function Cx(n,s,o,c,f){if(na(s),s.stateNode===null){var g=ro,v=o.contextType;typeof v=="object"&&v!==null&&(g=en(v)),g=new o(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=jm,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},om(s),v=o.contextType,g.context=typeof v=="object"&&v!==null?en(v):ro,g.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(km(s,o,v,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(v=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),v!==g.state&&jm.enqueueReplaceState(g,g.state,null),tc(s,c,g,f),ec(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){g=s.stateNode;var T=s.memoizedProps,D=la(o,T);g.props=D;var q=g.context,$=o.contextType;v=ro,typeof $=="object"&&$!==null&&(v=en($));var J=o.getDerivedStateFromProps;$=typeof J=="function"||typeof g.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,$||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T||q!==v)&&gx(s,g,c,v),Fs=!1;var G=s.memoizedState;g.state=G,tc(s,c,g,f),ec(),q=s.memoizedState,T||G!==q||Fs?(typeof J=="function"&&(km(s,o,J,c),q=s.memoizedState),(D=Fs||mx(s,o,D,c,G,q,v))?($||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=q),g.props=c,g.state=q,g.context=v,c=D):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,lm(n,s),v=s.memoizedProps,$=la(o,v),g.props=$,J=s.pendingProps,G=g.context,q=o.contextType,D=ro,typeof q=="object"&&q!==null&&(D=en(q)),T=o.getDerivedStateFromProps,(q=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(v!==J||G!==D)&&gx(s,g,c,D),Fs=!1,G=s.memoizedState,g.state=G,tc(s,c,g,f),ec();var K=s.memoizedState;v!==J||G!==K||Fs||n!==null&&n.dependencies!==null&&cd(n.dependencies)?(typeof T=="function"&&(km(s,o,T,c),K=s.memoizedState),($=Fs||mx(s,o,$,c,G,K,D)||n!==null&&n.dependencies!==null&&cd(n.dependencies))?(q||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,K,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,K,D)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=K),g.props=c,g.state=K,g.context=D,c=$):(typeof g.componentDidUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),c=!1)}return g=c,Id(n,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,n!==null&&c?(s.child=aa(s,n.child,null,f),s.child=aa(s,null,o,f)):tn(n,s,o,f),s.memoizedState=g.state,n=s.child):n=is(n,s,f),n}function Rx(n,s,o,c){return ea(),s.flags|=256,tn(n,s,o,c),s.child}var Mm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pm(n){return{baseLanes:n,cachePool:vy()}}function Lm(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Dn),n}function kx(n,s,o){var c=s.pendingProps,f=!1,g=(s.flags&128)!==0,v;if((v=g)||(v=n!==null&&n.memoizedState===null?!1:(St.current&2)!==0),v&&(f=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ge){if(f?Ks(s):Qs(),(n=dt)?(n=Uv(n,Xn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Us!==null?{id:Mr,overflow:Pr}:null,retryLane:536870912,hydrationErrors:null},o=uy(n),o.return=s,s.child=o,Zt=s,dt=null)):n=null,n===null)throw Bs(s);return bg(n)?s.lanes=32:s.lanes=536870912,null}var T=c.children;return c=c.fallback,f?(Qs(),f=s.mode,T=Cd({mode:"hidden",children:T},f),c=Zi(c,f,o,null),T.return=s,c.return=s,T.sibling=c,s.child=T,c=s.child,c.memoizedState=Pm(o),c.childLanes=Lm(n,v,o),s.memoizedState=Mm,ac(null,c)):(Ks(s),Um(s,T))}var D=n.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(g)s.flags&256?(Ks(s),s.flags&=-257,s=zm(n,s,o)):s.memoizedState!==null?(Qs(),s.child=n.child,s.flags|=128,s=null):(Qs(),T=c.fallback,f=s.mode,c=Cd({mode:"visible",children:c.children},f),T=Zi(T,f,o,null),T.flags|=2,c.return=s,T.return=s,c.sibling=T,s.child=c,aa(s,n.child,null,o),c=s.child,c.memoizedState=Pm(o),c.childLanes=Lm(n,v,o),s.memoizedState=Mm,s=ac(null,c));else if(Ks(s),bg(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var q=v.dgst;v=q,c=Error(r(419)),c.stack="",c.digest=v,Yl({value:c,source:null,stack:null}),s=zm(n,s,o)}else if(Mt||oo(n,s,o,!1),v=(o&n.childLanes)!==0,Mt||v){if(v=ct,v!==null&&(c=Nl(v,o),c!==0&&c!==D.retryLane))throw D.retryLane=c,Ji(n,c),En(v,n,c),Vm;vg(T)||Ld(),s=zm(n,s,o)}else vg(T)?(s.flags|=192,s.child=n.child,s=null):(n=D.treeContext,dt=Jn(T.nextSibling),Zt=s,Ge=!0,zs=null,Xn=!1,n!==null&&fy(s,n),s=Um(s,c.children),s.flags|=4096);return s}return f?(Qs(),T=c.fallback,f=s.mode,D=n.child,q=D.sibling,c=Zr(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,q!==null?T=Zr(q,T):(T=Zi(T,f,o,null),T.flags|=2),T.return=s,c.return=s,c.sibling=T,s.child=c,ac(null,c),c=s.child,T=n.child.memoizedState,T===null?T=Pm(o):(f=T.cachePool,f!==null?(D=Vt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=vy(),T={baseLanes:T.baseLanes|o,cachePool:f}),c.memoizedState=T,c.childLanes=Lm(n,v,o),s.memoizedState=Mm,ac(n.child,c)):(Ks(s),o=n.child,n=o.sibling,o=Zr(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,n!==null&&(v=s.deletions,v===null?(s.deletions=[n],s.flags|=16):v.push(n)),s.child=o,s.memoizedState=null,o)}function Um(n,s){return s=Cd({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Cd(n,s){return n=Cn(22,n,null,s),n.lanes=0,n}function zm(n,s,o){return aa(s,n.child,null,o),n=Um(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function jx(n,s,o){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),tm(n.return,s,o)}function Bm(n,s,o,c,f,g){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:g}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=o,v.tailMode=f,v.treeForkCount=g)}function Dx(n,s,o){var c=s.pendingProps,f=c.revealOrder,g=c.tail;c=c.children;var v=St.current,T=(v&2)!==0;if(T?(v=v&1|2,s.flags|=128):v&=1,ce(St,v),tn(n,s,c,o),c=Ge?Ql:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&jx(n,o,s);else if(n.tag===19)jx(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&yd(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Bm(s,!1,f,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&yd(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Bm(s,!0,o,null,g,c);break;case"together":Bm(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function is(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Xs|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(oo(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=Zr(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Zr(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function qm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&cd(n)))}function RS(n,s,o){switch(s.tag){case 3:zt(s,s.stateNode.containerInfo),qs(s,Vt,n.memoizedState.cache),ea();break;case 27:case 5:Vi(s);break;case 4:zt(s,s.stateNode.containerInfo);break;case 10:qs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,fm(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Ks(s),s.flags|=128,null):(o&s.child.childLanes)!==0?kx(n,s,o):(Ks(s),n=is(n,s,o),n!==null?n.sibling:null);Ks(s);break;case 19:var f=(n.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(oo(n,s,o,!1),c=(o&s.childLanes)!==0),f){if(c)return Dx(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(St,St.current),c)break;return null;case 22:return s.lanes=0,Sx(n,s,o,s.pendingProps);case 24:qs(s,Vt,n.memoizedState.cache)}return is(n,s,o)}function Vx(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Mt=!0;else{if(!qm(n,o)&&(s.flags&128)===0)return Mt=!1,RS(n,s,o);Mt=(n.flags&131072)!==0}else Mt=!1,Ge&&(s.flags&1048576)!==0&&hy(s,Ql,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(n=sa(s.elementType),s.type=n,typeof n=="function")Qf(n)?(c=la(n,c),s.tag=1,s=Cx(null,s,n,c,o)):(s.tag=0,s=Om(null,s,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===xe){s.tag=11,s=wx(null,s,n,c,o);break e}else if(f===k){s.tag=14,s=Ex(null,s,n,c,o);break e}}throw s=Ce(n)||n,Error(r(306,s,""))}}return s;case 0:return Om(n,s,s.type,s.pendingProps,o);case 1:return c=s.type,f=la(c,s.pendingProps),Cx(n,s,c,f,o);case 3:e:{if(zt(s,s.stateNode.containerInfo),n===null)throw Error(r(387));c=s.pendingProps;var g=s.memoizedState;f=g.element,lm(n,s),tc(s,c,null,o);var v=s.memoizedState;if(c=v.cache,qs(s,Vt,c),c!==g.cache&&nm(s,[Vt],o,!0),ec(),c=v.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=Rx(n,s,c,o);break e}else if(c!==f){f=Qn(Error(r(424)),s),Yl(f),s=Rx(n,s,c,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(dt=Jn(n.firstChild),Zt=s,Ge=!0,zs=null,Xn=!0,o=Sy(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ea(),c===f){s=is(n,s,o);break e}tn(n,s,c,o)}s=s.child}return s;case 26:return Id(n,s),n===null?(o=Hv(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ge||(o=s.type,n=s.pendingProps,c=Hd(De.current).createElement(o),c[kt]=s,c[Kt]=n,nn(c,o,n),jt(c),s.stateNode=c):s.memoizedState=Hv(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Vi(s),n===null&&Ge&&(c=s.stateNode=qv(s.type,s.pendingProps,De.current),Zt=s,Xn=!0,f=dt,ti(s.type)?(_g=f,dt=Jn(c.firstChild)):dt=f),tn(n,s,s.pendingProps.children,o),Id(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ge&&((f=c=dt)&&(c=a2(c,s.type,s.pendingProps,Xn),c!==null?(s.stateNode=c,Zt=s,dt=Jn(c.firstChild),Xn=!1,f=!0):f=!1),f||Bs(s)),Vi(s),f=s.type,g=s.pendingProps,v=n!==null?n.memoizedProps:null,c=g.children,pg(f,g)?c=null:v!==null&&pg(f,v)&&(s.flags|=32),s.memoizedState!==null&&(f=gm(n,s,_S,null,null,o),_c._currentValue=f),Id(n,s),tn(n,s,c,o),s.child;case 6:return n===null&&Ge&&((n=o=dt)&&(o=o2(o,s.pendingProps,Xn),o!==null?(s.stateNode=o,Zt=s,dt=null,n=!0):n=!1),n||Bs(s)),null;case 13:return kx(n,s,o);case 4:return zt(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=aa(s,null,c,o):tn(n,s,c,o),s.child;case 11:return wx(n,s,s.type,s.pendingProps,o);case 7:return tn(n,s,s.pendingProps,o),s.child;case 8:return tn(n,s,s.pendingProps.children,o),s.child;case 12:return tn(n,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,qs(s,s.type,c.value),tn(n,s,c.children,o),s.child;case 9:return f=s.type._context,c=s.pendingProps.children,na(s),f=en(f),c=c(f),s.flags|=1,tn(n,s,c,o),s.child;case 14:return Ex(n,s,s.type,s.pendingProps,o);case 15:return Tx(n,s,s.type,s.pendingProps,o);case 19:return Dx(n,s,o);case 31:return CS(n,s,o);case 22:return Sx(n,s,o,s.pendingProps);case 24:return na(s),c=en(Vt),n===null?(f=im(),f===null&&(f=ct,g=rm(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),s.memoizedState={parent:c,cache:f},om(s),qs(s,Vt,f)):((n.lanes&o)!==0&&(lm(n,s),tc(s,null,null,o),ec()),f=n.memoizedState,g=s.memoizedState,f.parent!==c?(f={parent:c,cache:c},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),qs(s,Vt,c)):(c=g.cache,qs(s,Vt,c),c!==f.cache&&nm(s,[Vt],o,!0))),tn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function as(n){n.flags|=4}function Fm(n,s,o,c,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(ov())n.flags|=8192;else throw ia=fd,am}else n.flags&=-16777217}function Ox(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Xv(s))if(ov())n.flags|=8192;else throw ia=fd,am}function Rd(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Mu():536870912,n.lanes|=s,bo|=s)}function oc(n,s){if(!Ge)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function ht(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,s}function kS(n,s,o){var c=s.pendingProps;switch(Wf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(s),null;case 1:return ht(s),null;case 3:return o=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ns(Vt),ft(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ao(s)?as(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Zf())),ht(s),null;case 26:var f=s.type,g=s.memoizedState;return n===null?(as(s),g!==null?(ht(s),Ox(s,g)):(ht(s),Fm(s,f,null,c,o))):g?g!==n.memoizedState?(as(s),ht(s),Ox(s,g)):(ht(s),s.flags&=-16777217):(n=n.memoizedProps,n!==c&&as(s),ht(s),Fm(s,f,n,c,o)),null;case 27:if(La(s),o=De.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&as(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return ht(s),null}n=de.current,ao(s)?my(s):(n=qv(f,c,o),s.stateNode=n,as(s))}return ht(s),null;case 5:if(La(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&as(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return ht(s),null}if(g=de.current,ao(s))my(s);else{var v=Hd(De.current);switch(g){case 1:g=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=v.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}g[kt]=s,g[Kt]=c;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)g.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=g;e:switch(nn(g,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&as(s)}}return ht(s),Fm(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&as(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(n=De.current,ao(s)){if(n=s.stateNode,o=s.memoizedProps,c=null,f=Zt,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[kt]=s,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||kv(n.nodeValue,o)),n||Bs(s,!0)}else n=Hd(n).createTextNode(c),n[kt]=s,s.stateNode=n}return ht(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(c=ao(s),o!==null){if(n===null){if(!c)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[kt]=s}else ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),n=!1}else o=Zf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(kn(s),s):(kn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return ht(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ao(s),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[kt]=s}else ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),f=!1}else f=Zf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(kn(s),s):(kn(s),null)}return kn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=s.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),Rd(s,s.updateQueue),ht(s),null);case 4:return ft(),n===null&&dg(s.stateNode.containerInfo),ht(s),null;case 10:return ns(s.type),ht(s),null;case 19:if(Z(St),c=s.memoizedState,c===null)return ht(s),null;if(f=(s.flags&128)!==0,g=c.rendering,g===null)if(f)oc(c,!1);else{if(bt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(g=yd(n),g!==null){for(s.flags|=128,oc(c,!1),n=g.updateQueue,s.updateQueue=n,Rd(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)cy(o,n),o=o.sibling;return ce(St,St.current&1|2),Ge&&es(s,c.treeForkCount),s.child}n=n.sibling}c.tail!==null&&hn()>Od&&(s.flags|=128,f=!0,oc(c,!1),s.lanes=4194304)}else{if(!f)if(n=yd(g),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,Rd(s,n),oc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Ge)return ht(s),null}else 2*hn()-c.renderingStartTime>Od&&o!==536870912&&(s.flags|=128,f=!0,oc(c,!1),s.lanes=4194304);c.isBackwards?(g.sibling=s.child,s.child=g):(n=c.last,n!==null?n.sibling=g:s.child=g,c.last=g)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=hn(),n.sibling=null,o=St.current,ce(St,f?o&1|2:o&1),Ge&&es(s,c.treeForkCount),n):(ht(s),null);case 22:case 23:return kn(s),hm(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(ht(s),s.subtreeFlags&6&&(s.flags|=8192)):ht(s),o=s.updateQueue,o!==null&&Rd(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),n!==null&&Z(ra),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ns(Vt),ht(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function jS(n,s){switch(Wf(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ns(Vt),ft(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return La(s),null;case 31:if(s.memoizedState!==null){if(kn(s),s.alternate===null)throw Error(r(340));ea()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(kn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));ea()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Z(St),null;case 4:return ft(),null;case 10:return ns(s.type),null;case 22:case 23:return kn(s),hm(),n!==null&&Z(ra),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ns(Vt),null;case 25:return null;default:return null}}function Mx(n,s){switch(Wf(s),s.tag){case 3:ns(Vt),ft();break;case 26:case 27:case 5:La(s);break;case 4:ft();break;case 31:s.memoizedState!==null&&kn(s);break;case 13:kn(s);break;case 19:Z(St);break;case 10:ns(s.type);break;case 22:case 23:kn(s),hm(),n!==null&&Z(ra);break;case 24:ns(Vt)}}function lc(n,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var g=o.create,v=o.inst;c=g(),v.destroy=c}o=o.next}while(o!==f)}}catch(T){tt(s,s.return,T)}}function Ys(n,s,o){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&n)===n){var v=c.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,f=s;var D=o,q=T;try{q()}catch($){tt(f,D,$)}}}c=c.next}while(c!==g)}}catch($){tt(s,s.return,$)}}function Px(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Ny(s,o)}catch(c){tt(n,n.return,c)}}}function Lx(n,s,o){o.props=la(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){tt(n,s,c)}}function cc(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){tt(n,s,f)}}function Lr(n,s){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){tt(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){tt(n,s,f)}else o.current=null}function Ux(n){var s=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){tt(n,n.return,f)}}function Gm(n,s,o){try{var c=n.stateNode;e2(c,n.type,o,s),c[Kt]=s}catch(f){tt(n,n.return,f)}}function zx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ti(n.type)||n.tag===4}function Hm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||zx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ti(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Km(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=ar));else if(c!==4&&(c===27&&ti(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Km(n,s,o),n=n.sibling;n!==null;)Km(n,s,o),n=n.sibling}function kd(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(c!==4&&(c===27&&ti(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(kd(n,s,o),n=n.sibling;n!==null;)kd(n,s,o),n=n.sibling}function Bx(n){var s=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);nn(s,c,o),s[kt]=n,s[Kt]=o}catch(g){tt(n,n.return,g)}}var os=!1,Pt=!1,Qm=!1,qx=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function DS(n,s){if(n=n.containerInfo,mg=Jd,n=ey(n),zf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var v=0,T=-1,D=-1,q=0,$=0,J=n,G=null;t:for(;;){for(var K;J!==o||f!==0&&J.nodeType!==3||(T=v+f),J!==g||c!==0&&J.nodeType!==3||(D=v+c),J.nodeType===3&&(v+=J.nodeValue.length),(K=J.firstChild)!==null;)G=J,J=K;for(;;){if(J===n)break t;if(G===o&&++q===f&&(T=v),G===g&&++$===c&&(D=v),(K=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=K}o=T===-1||D===-1?null:{start:T,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(gg={focusedElem:n,selectionRange:o},Jd=!1,Yt=s;Yt!==null;)if(s=Yt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Yt=n;else for(;Yt!==null;){switch(s=Yt,g=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=s,f=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var fe=la(o.type,f);n=c.getSnapshotBeforeUpdate(fe,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(Te){tt(o,o.return,Te)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)xg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":xg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,Yt=n;break}Yt=s.return}}function Fx(n,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:cs(n,o),c&4&&lc(5,o);break;case 1:if(cs(n,o),c&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(v){tt(o,o.return,v)}else{var f=la(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(v){tt(o,o.return,v)}}c&64&&Px(o),c&512&&cc(o,o.return);break;case 3:if(cs(n,o),c&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Ny(n,s)}catch(v){tt(o,o.return,v)}}break;case 27:s===null&&c&4&&Bx(o);case 26:case 5:cs(n,o),s===null&&c&4&&Ux(o),c&512&&cc(o,o.return);break;case 12:cs(n,o);break;case 31:cs(n,o),c&4&&Kx(n,o);break;case 13:cs(n,o),c&4&&Qx(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=qS.bind(null,o),l2(n,o))));break;case 22:if(c=o.memoizedState!==null||os,!c){s=s!==null&&s.memoizedState!==null||Pt,f=os;var g=Pt;os=c,(Pt=s)&&!g?us(n,o,(o.subtreeFlags&8772)!==0):cs(n,o),os=f,Pt=g}break;case 30:break;default:cs(n,o)}}function Gx(n){var s=n.alternate;s!==null&&(n.alternate=null,Gx(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Fa(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var gt=null,vn=!1;function ls(n,s,o){for(o=o.child;o!==null;)Hx(n,s,o),o=o.sibling}function Hx(n,s,o){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(nr,o)}catch{}switch(o.tag){case 26:Pt||Lr(o,s),ls(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Pt||Lr(o,s);var c=gt,f=vn;ti(o.type)&&(gt=o.stateNode,vn=!1),ls(n,s,o),xc(o.stateNode),gt=c,vn=f;break;case 5:Pt||Lr(o,s);case 6:if(c=gt,f=vn,gt=null,ls(n,s,o),gt=c,vn=f,gt!==null)if(vn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(o.stateNode)}catch(g){tt(o,s,g)}else try{gt.removeChild(o.stateNode)}catch(g){tt(o,s,g)}break;case 18:gt!==null&&(vn?(n=gt,Pv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Io(n)):Pv(gt,o.stateNode));break;case 4:c=gt,f=vn,gt=o.stateNode.containerInfo,vn=!0,ls(n,s,o),gt=c,vn=f;break;case 0:case 11:case 14:case 15:Ys(2,o,s),Pt||Ys(4,o,s),ls(n,s,o);break;case 1:Pt||(Lr(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Lx(o,s,c)),ls(n,s,o);break;case 21:ls(n,s,o);break;case 22:Pt=(c=Pt)||o.memoizedState!==null,ls(n,s,o),Pt=c;break;default:ls(n,s,o)}}function Kx(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Io(n)}catch(o){tt(s,s.return,o)}}}function Qx(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Io(n)}catch(o){tt(s,s.return,o)}}function VS(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new qx),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new qx),s;default:throw Error(r(435,n.tag))}}function jd(n,s){var o=VS(n);s.forEach(function(c){if(!o.has(c)){o.add(c);var f=FS.bind(null,n,c);c.then(f,f)}})}function bn(n,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],g=n,v=s,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(ti(T.type)){gt=T.stateNode,vn=!1;break e}break;case 5:gt=T.stateNode,vn=!1;break e;case 3:case 4:gt=T.stateNode.containerInfo,vn=!0;break e}T=T.return}if(gt===null)throw Error(r(160));Hx(g,v,f),gt=null,vn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Yx(s,n),s=s.sibling}var hr=null;function Yx(n,s){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:bn(s,n),_n(n),c&4&&(Ys(3,n,n.return),lc(3,n),Ys(5,n,n.return));break;case 1:bn(s,n),_n(n),c&512&&(Pt||o===null||Lr(o,o.return)),c&64&&os&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=hr;if(bn(s,n),_n(n),c&512&&(Pt||o===null||Lr(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Tr]||g[kt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),nn(g,c,o),g[kt]=n,jt(g),c=g;break e;case"link":var v=Yv("link","href",f).get(c+(o.href||""));if(v){for(var T=0;T<v.length;T++)if(g=v[T],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(T,1);break t}}g=f.createElement(c),nn(g,c,o),f.head.appendChild(g);break;case"meta":if(v=Yv("meta","content",f).get(c+(o.content||""))){for(T=0;T<v.length;T++)if(g=v[T],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(T,1);break t}}g=f.createElement(c),nn(g,c,o),f.head.appendChild(g);break;default:throw Error(r(468,c))}g[kt]=n,jt(g),c=g}n.stateNode=c}else $v(f,n.type,n.stateNode);else n.stateNode=Qv(f,c,n.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?$v(f,n.type,n.stateNode):Qv(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Gm(n,n.memoizedProps,o.memoizedProps)}break;case 27:bn(s,n),_n(n),c&512&&(Pt||o===null||Lr(o,o.return)),o!==null&&c&4&&Gm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(bn(s,n),_n(n),c&512&&(Pt||o===null||Lr(o,o.return)),n.flags&32){f=n.stateNode;try{xn(f,"")}catch(fe){tt(n,n.return,fe)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Gm(n,f,o!==null?o.memoizedProps:f)),c&1024&&(Qm=!0);break;case 6:if(bn(s,n),_n(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(fe){tt(n,n.return,fe)}}break;case 3:if(Yd=null,f=hr,hr=Kd(s.containerInfo),bn(s,n),hr=f,_n(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Io(s.containerInfo)}catch(fe){tt(n,n.return,fe)}Qm&&(Qm=!1,$x(n));break;case 4:c=hr,hr=Kd(n.stateNode.containerInfo),bn(s,n),_n(n),hr=c;break;case 12:bn(s,n),_n(n);break;case 31:bn(s,n),_n(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,jd(n,c)));break;case 13:bn(s,n),_n(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Vd=hn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,jd(n,c)));break;case 22:f=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,q=os,$=Pt;if(os=q||f,Pt=$||D,bn(s,n),Pt=$,os=q,_n(n),c&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||D||os||Pt||ca(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){D=o=s;try{if(g=D.stateNode,f)v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=D.stateNode;var J=D.memoizedProps.style,G=J!=null&&J.hasOwnProperty("display")?J.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(fe){tt(D,D.return,fe)}}}else if(s.tag===6){if(o===null){D=s;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(fe){tt(D,D.return,fe)}}}else if(s.tag===18){if(o===null){D=s;try{var K=D.stateNode;f?Lv(K,!0):Lv(D.stateNode,!1)}catch(fe){tt(D,D.return,fe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,jd(n,o))));break;case 19:bn(s,n),_n(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,jd(n,c)));break;case 30:break;case 21:break;default:bn(s,n),_n(n)}}function _n(n){var s=n.flags;if(s&2){try{for(var o,c=n.return;c!==null;){if(zx(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,g=Hm(n);kd(n,g,f);break;case 5:var v=o.stateNode;o.flags&32&&(xn(v,""),o.flags&=-33);var T=Hm(n);kd(n,T,v);break;case 3:case 4:var D=o.stateNode.containerInfo,q=Hm(n);Km(n,q,D);break;default:throw Error(r(161))}}catch($){tt(n,n.return,$)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function $x(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;$x(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function cs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Fx(n,s.alternate,s),s=s.sibling}function ca(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ys(4,s,s.return),ca(s);break;case 1:Lr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Lx(s,s.return,o),ca(s);break;case 27:xc(s.stateNode);case 26:case 5:Lr(s,s.return),ca(s);break;case 22:s.memoizedState===null&&ca(s);break;case 30:ca(s);break;default:ca(s)}n=n.sibling}}function us(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,f=n,g=s,v=g.flags;switch(g.tag){case 0:case 11:case 15:us(f,g,o),lc(4,g);break;case 1:if(us(f,g,o),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){tt(c,c.return,q)}if(c=g,f=c.updateQueue,f!==null){var T=c.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Ay(D[f],T)}catch(q){tt(c,c.return,q)}}o&&v&64&&Px(g),cc(g,g.return);break;case 27:Bx(g);case 26:case 5:us(f,g,o),o&&c===null&&v&4&&Ux(g),cc(g,g.return);break;case 12:us(f,g,o);break;case 31:us(f,g,o),o&&v&4&&Kx(f,g);break;case 13:us(f,g,o),o&&v&4&&Qx(f,g);break;case 22:g.memoizedState===null&&us(f,g,o),cc(g,g.return);break;case 30:break;default:us(f,g,o)}s=s.sibling}}function Ym(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&$l(o))}function $m(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&$l(n))}function fr(n,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Xx(n,s,o,c),s=s.sibling}function Xx(n,s,o,c){var f=s.flags;switch(s.tag){case 0:case 11:case 15:fr(n,s,o,c),f&2048&&lc(9,s);break;case 1:fr(n,s,o,c);break;case 3:fr(n,s,o,c),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&$l(n)));break;case 12:if(f&2048){fr(n,s,o,c),n=s.stateNode;try{var g=s.memoizedProps,v=g.id,T=g.onPostCommit;typeof T=="function"&&T(v,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){tt(s,s.return,D)}}else fr(n,s,o,c);break;case 31:fr(n,s,o,c);break;case 13:fr(n,s,o,c);break;case 23:break;case 22:g=s.stateNode,v=s.alternate,s.memoizedState!==null?g._visibility&2?fr(n,s,o,c):uc(n,s):g._visibility&2?fr(n,s,o,c):(g._visibility|=2,yo(n,s,o,c,(s.subtreeFlags&10256)!==0||!1)),f&2048&&Ym(v,s);break;case 24:fr(n,s,o,c),f&2048&&$m(s.alternate,s);break;default:fr(n,s,o,c)}}function yo(n,s,o,c,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=n,v=s,T=o,D=c,q=v.flags;switch(v.tag){case 0:case 11:case 15:yo(g,v,T,D,f),lc(8,v);break;case 23:break;case 22:var $=v.stateNode;v.memoizedState!==null?$._visibility&2?yo(g,v,T,D,f):uc(g,v):($._visibility|=2,yo(g,v,T,D,f)),f&&q&2048&&Ym(v.alternate,v);break;case 24:yo(g,v,T,D,f),f&&q&2048&&$m(v.alternate,v);break;default:yo(g,v,T,D,f)}s=s.sibling}}function uc(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,c=s,f=c.flags;switch(c.tag){case 22:uc(o,c),f&2048&&Ym(c.alternate,c);break;case 24:uc(o,c),f&2048&&$m(c.alternate,c);break;default:uc(o,c)}s=s.sibling}}var dc=8192;function xo(n,s,o){if(n.subtreeFlags&dc)for(n=n.child;n!==null;)Wx(n,s,o),n=n.sibling}function Wx(n,s,o){switch(n.tag){case 26:xo(n,s,o),n.flags&dc&&n.memoizedState!==null&&b2(o,hr,n.memoizedState,n.memoizedProps);break;case 5:xo(n,s,o);break;case 3:case 4:var c=hr;hr=Kd(n.stateNode.containerInfo),xo(n,s,o),hr=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=dc,dc=16777216,xo(n,s,o),dc=c):xo(n,s,o));break;default:xo(n,s,o)}}function Jx(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function hc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Yt=c,ev(c,n)}Jx(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Zx(n),n=n.sibling}function Zx(n){switch(n.tag){case 0:case 11:case 15:hc(n),n.flags&2048&&Ys(9,n,n.return);break;case 3:hc(n);break;case 12:hc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Dd(n)):hc(n);break;default:hc(n)}}function Dd(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Yt=c,ev(c,n)}Jx(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ys(8,s,s.return),Dd(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Dd(s));break;default:Dd(s)}n=n.sibling}}function ev(n,s){for(;Yt!==null;){var o=Yt;switch(o.tag){case 0:case 11:case 15:Ys(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:$l(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Yt=c;else e:for(o=n;Yt!==null;){c=Yt;var f=c.sibling,g=c.return;if(Gx(c),c===o){Yt=null;break e}if(f!==null){f.return=g,Yt=f;break e}Yt=g}}}var OS={getCacheForType:function(n){var s=en(Vt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return en(Vt).controller.signal}},MS=typeof WeakMap=="function"?WeakMap:Map,We=0,ct=null,Pe=null,Ue=0,et=0,jn=null,$s=!1,vo=!1,Xm=!1,ds=0,bt=0,Xs=0,ua=0,Wm=0,Dn=0,bo=0,fc=null,wn=null,Jm=!1,Vd=0,tv=0,Od=1/0,Md=null,Ws=null,qt=0,Js=null,_o=null,hs=0,Zm=0,eg=null,nv=null,mc=0,tg=null;function Vn(){return(We&2)!==0&&Ue!==0?Ue&-Ue:Y.T!==null?og():Pu()}function rv(){if(Dn===0)if((Ue&536870912)===0||Ge){var n=Pi;Pi<<=1,(Pi&3932160)===0&&(Pi=262144),Dn=n}else Dn=536870912;return n=Rn.current,n!==null&&(n.flags|=32),Dn}function En(n,s,o){(n===ct&&(et===2||et===9)||n.cancelPendingCommit!==null)&&(wo(n,0),Zs(n,Ue,Dn,!1)),Li(n,o),((We&2)===0||n!==ct)&&(n===ct&&((We&2)===0&&(ua|=o),bt===4&&Zs(n,Ue,Dn,!1)),Ur(n))}function sv(n,s,o){if((We&6)!==0)throw Error(r(327));var c=!o&&(s&127)===0&&(s&n.expiredLanes)===0||rr(n,s),f=c?US(n,s):rg(n,s,!0),g=c;do{if(f===0){vo&&!c&&Zs(n,s,0,!1);break}else{if(o=n.current.alternate,g&&!PS(o)){f=rg(n,s,!1),g=!1;continue}if(f===2){if(g=s,n.errorRecoveryDisabledLanes&g)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var T=n;f=fc;var D=T.current.memoizedState.isDehydrated;if(D&&(wo(T,v).flags|=256),v=rg(T,v,!1),v!==2){if(Xm&&!D){T.errorRecoveryDisabledLanes|=g,ua|=g,f=4;break e}g=wn,wn=f,g!==null&&(wn===null?wn=g:wn.push.apply(wn,g))}f=v}if(g=!1,f!==2)continue}}if(f===1){wo(n,0),Zs(n,s,0,!0);break}e:{switch(c=n,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Zs(c,s,Dn,!$s);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Vd+300-hn(),10<f)){if(Zs(c,s,Dn,!$s),_r(c,0,!0)!==0)break e;hs=s,c.timeoutHandle=Ov(iv.bind(null,c,o,wn,Md,Jm,s,Dn,ua,bo,$s,g,"Throttled",-0,0),f);break e}iv(c,o,wn,Md,Jm,s,Dn,ua,bo,$s,g,null,-0,0)}}break}while(!0);Ur(n)}function iv(n,s,o,c,f,g,v,T,D,q,$,J,G,K){if(n.timeoutHandle=-1,J=s.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ar},Wx(s,g,J);var fe=(g&62914560)===g?Vd-hn():(g&4194048)===g?tv-hn():0;if(fe=_2(J,fe),fe!==null){hs=g,n.cancelPendingCommit=fe(fv.bind(null,n,s,g,o,c,f,v,T,D,$,J,null,G,K)),Zs(n,g,v,!q);return}}fv(n,s,g,o,c,f,v,T,D)}function PS(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],g=f.getSnapshot;f=f.value;try{if(!In(g(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Zs(n,s,o,c){s&=~Wm,s&=~ua,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var f=s;0<f;){var g=31-Et(f),v=1<<g;c[g]=-1,f&=~v}o!==0&&Ui(n,o,s)}function Pd(){return(We&6)===0?(gc(0),!1):!0}function ng(){if(Pe!==null){if(et===0)var n=Pe.return;else n=Pe,ts=ta=null,xm(n),ho=null,Wl=0,n=Pe;for(;n!==null;)Mx(n.alternate,n),n=n.return;Pe=null}}function wo(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,r2(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),hs=0,ng(),ct=n,Pe=o=Zr(n.current,null),Ue=s,et=0,jn=null,$s=!1,vo=rr(n,s),Xm=!1,bo=Dn=Wm=ua=Xs=bt=0,wn=fc=null,Jm=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var f=31-Et(c),g=1<<f;s|=n[f],c&=~g}return ds=s,sd(),o}function av(n,s){je=null,Y.H=ic,s===uo||s===hd?(s=wy(),et=3):s===am?(s=wy(),et=4):et=s===Vm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,jn=s,Pe===null&&(bt=1,Ad(n,Qn(s,n.current)))}function ov(){var n=Rn.current;return n===null?!0:(Ue&4194048)===Ue?Wn===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?n===Wn:!1}function lv(){var n=Y.H;return Y.H=ic,n===null?ic:n}function cv(){var n=Y.A;return Y.A=OS,n}function Ld(){bt=4,$s||(Ue&4194048)!==Ue&&Rn.current!==null||(vo=!0),(Xs&134217727)===0&&(ua&134217727)===0||ct===null||Zs(ct,Ue,Dn,!1)}function rg(n,s,o){var c=We;We|=2;var f=lv(),g=cv();(ct!==n||Ue!==s)&&(Md=null,wo(n,s)),s=!1;var v=bt;e:do try{if(et!==0&&Pe!==null){var T=Pe,D=jn;switch(et){case 8:ng(),v=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(s=!0);var q=et;if(et=0,jn=null,Eo(n,T,D,q),o&&vo){v=0;break e}break;default:q=et,et=0,jn=null,Eo(n,T,D,q)}}LS(),v=bt;break}catch($){av(n,$)}while(!0);return s&&n.shellSuspendCounter++,ts=ta=null,We=c,Y.H=f,Y.A=g,Pe===null&&(ct=null,Ue=0,sd()),v}function LS(){for(;Pe!==null;)uv(Pe)}function US(n,s){var o=We;We|=2;var c=lv(),f=cv();ct!==n||Ue!==s?(Md=null,Od=hn()+500,wo(n,s)):vo=rr(n,s);e:do try{if(et!==0&&Pe!==null){s=Pe;var g=jn;t:switch(et){case 1:et=0,jn=null,Eo(n,s,g,1);break;case 2:case 9:if(by(g)){et=0,jn=null,dv(s);break}s=function(){et!==2&&et!==9||ct!==n||(et=7),Ur(n)},g.then(s,s);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:by(g)?(et=0,jn=null,dv(s)):(et=0,jn=null,Eo(n,s,g,7));break;case 5:var v=null;switch(Pe.tag){case 26:v=Pe.memoizedState;case 5:case 27:var T=Pe;if(v?Xv(v):T.stateNode.complete){et=0,jn=null;var D=T.sibling;if(D!==null)Pe=D;else{var q=T.return;q!==null?(Pe=q,Ud(q)):Pe=null}break t}}et=0,jn=null,Eo(n,s,g,5);break;case 6:et=0,jn=null,Eo(n,s,g,6);break;case 8:ng(),bt=6;break e;default:throw Error(r(462))}}zS();break}catch($){av(n,$)}while(!0);return ts=ta=null,Y.H=c,Y.A=f,We=o,Pe!==null?0:(ct=null,Ue=0,sd(),bt)}function zS(){for(;Pe!==null&&!Df();)uv(Pe)}function uv(n){var s=Vx(n.alternate,n,ds);n.memoizedProps=n.pendingProps,s===null?Ud(n):Pe=s}function dv(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Ix(o,s,s.pendingProps,s.type,void 0,Ue);break;case 11:s=Ix(o,s,s.pendingProps,s.type.render,s.ref,Ue);break;case 5:xm(s);default:Mx(o,s),s=Pe=cy(s,ds),s=Vx(o,s,ds)}n.memoizedProps=n.pendingProps,s===null?Ud(n):Pe=s}function Eo(n,s,o,c){ts=ta=null,xm(s),ho=null,Wl=0;var f=s.return;try{if(IS(n,f,s,o,Ue)){bt=1,Ad(n,Qn(o,n.current)),Pe=null;return}}catch(g){if(f!==null)throw Pe=f,g;bt=1,Ad(n,Qn(o,n.current)),Pe=null;return}s.flags&32768?(Ge||c===1?n=!0:vo||(Ue&536870912)!==0?n=!1:($s=n=!0,(c===2||c===9||c===3||c===6)&&(c=Rn.current,c!==null&&c.tag===13&&(c.flags|=16384))),hv(s,n)):Ud(s)}function Ud(n){var s=n;do{if((s.flags&32768)!==0){hv(s,$s);return}n=s.return;var o=kS(s.alternate,s,ds);if(o!==null){Pe=o;return}if(s=s.sibling,s!==null){Pe=s;return}Pe=s=n}while(s!==null);bt===0&&(bt=5)}function hv(n,s){do{var o=jS(n.alternate,n);if(o!==null){o.flags&=32767,Pe=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Pe=n;return}Pe=n=o}while(n!==null);bt=6,Pe=null}function fv(n,s,o,c,f,g,v,T,D){n.cancelPendingCommit=null;do zd();while(qt!==0);if((We&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(g=s.lanes|s.childLanes,g|=Hf,Mf(n,o,g,v,T,D),n===ct&&(Pe=ct=null,Ue=0),_o=s,Js=n,hs=o,Zm=g,eg=f,nv=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,GS(Cs,function(){return xv(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,f=le.p,le.p=2,v=We,We|=4;try{DS(n,s,o)}finally{We=v,le.p=f,Y.T=c}}qt=1,mv(),gv(),pv()}}function mv(){if(qt===1){qt=0;var n=Js,s=_o,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var c=le.p;le.p=2;var f=We;We|=4;try{Yx(s,n);var g=gg,v=ey(n.containerInfo),T=g.focusedElem,D=g.selectionRange;if(v!==T&&T&&T.ownerDocument&&Z0(T.ownerDocument.documentElement,T)){if(D!==null&&zf(T)){var q=D.start,$=D.end;if($===void 0&&($=q),"selectionStart"in T)T.selectionStart=q,T.selectionEnd=Math.min($,T.value.length);else{var J=T.ownerDocument||document,G=J&&J.defaultView||window;if(G.getSelection){var K=G.getSelection(),fe=T.textContent.length,Te=Math.min(D.start,fe),lt=D.end===void 0?Te:Math.min(D.end,fe);!K.extend&&Te>lt&&(v=lt,lt=Te,Te=v);var P=J0(T,Te),O=J0(T,lt);if(P&&O&&(K.rangeCount!==1||K.anchorNode!==P.node||K.anchorOffset!==P.offset||K.focusNode!==O.node||K.focusOffset!==O.offset)){var B=J.createRange();B.setStart(P.node,P.offset),K.removeAllRanges(),Te>lt?(K.addRange(B),K.extend(O.node,O.offset)):(B.setEnd(O.node,O.offset),K.addRange(B))}}}}for(J=[],K=T;K=K.parentNode;)K.nodeType===1&&J.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<J.length;T++){var W=J[T];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Jd=!!mg,gg=mg=null}finally{We=f,le.p=c,Y.T=o}}n.current=s,qt=2}}function gv(){if(qt===2){qt=0;var n=Js,s=_o,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var c=le.p;le.p=2;var f=We;We|=4;try{Fx(n,s.alternate,s)}finally{We=f,le.p=c,Y.T=o}}qt=3}}function pv(){if(qt===4||qt===3){qt=0,Ru();var n=Js,s=_o,o=hs,c=nv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?qt=5:(qt=0,_o=Js=null,yv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ws=null),$r(o),s=s.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(nr,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=Y.T,f=le.p,le.p=2,Y.T=null;try{for(var g=n.onRecoverableError,v=0;v<c.length;v++){var T=c[v];g(T.value,{componentStack:T.stack})}}finally{Y.T=s,le.p=f}}(hs&3)!==0&&zd(),Ur(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===tg?mc++:(mc=0,tg=n):mc=0,gc(0)}}function yv(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,$l(s)))}function zd(){return mv(),gv(),pv(),xv()}function xv(){if(qt!==5)return!1;var n=Js,s=Zm;Zm=0;var o=$r(hs),c=Y.T,f=le.p;try{le.p=32>o?32:o,Y.T=null,o=eg,eg=null;var g=Js,v=hs;if(qt=0,_o=Js=null,hs=0,(We&6)!==0)throw Error(r(331));var T=We;if(We|=4,Zx(g.current),Xx(g,g.current,v,o),We=T,gc(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(nr,g)}catch{}return!0}finally{le.p=f,Y.T=c,yv(n,s)}}function vv(n,s,o){s=Qn(o,s),s=Dm(n.stateNode,s,2),n=Hs(n,s,2),n!==null&&(Li(n,2),Ur(n))}function tt(n,s,o){if(n.tag===3)vv(n,n,o);else for(;s!==null;){if(s.tag===3){vv(s,n,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ws===null||!Ws.has(c))){n=Qn(o,n),o=bx(2),c=Hs(s,o,2),c!==null&&(_x(o,c,s,n),Li(c,2),Ur(c));break}}s=s.return}}function sg(n,s,o){var c=n.pingCache;if(c===null){c=n.pingCache=new MS;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(o)||(Xm=!0,f.add(o),n=BS.bind(null,n,s,o),s.then(n,n))}function BS(n,s,o){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ct===n&&(Ue&o)===o&&(bt===4||bt===3&&(Ue&62914560)===Ue&&300>hn()-Vd?(We&2)===0&&wo(n,0):Wm|=o,bo===Ue&&(bo=0)),Ur(n)}function bv(n,s){s===0&&(s=Mu()),n=Ji(n,s),n!==null&&(Li(n,s),Ur(n))}function qS(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),bv(n,o)}function FS(n,s){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),bv(n,o)}function GS(n,s){return Bt(n,s)}var Bd=null,To=null,ig=!1,qd=!1,ag=!1,ei=0;function Ur(n){n!==To&&n.next===null&&(To===null?Bd=To=n:To=To.next=n),qd=!0,ig||(ig=!0,KS())}function gc(n,s){if(!ag&&qd){ag=!0;do for(var o=!1,c=Bd;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var v=c.suspendedLanes,T=c.pingedLanes;g=(1<<31-Et(42|n)+1)-1,g&=f&~(v&~T),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,Tv(c,g))}else g=Ue,g=_r(c,c===ct?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||rr(c,g)||(o=!0,Tv(c,g));c=c.next}while(o);ag=!1}}function HS(){_v()}function _v(){qd=ig=!1;var n=0;ei!==0&&n2()&&(n=ei);for(var s=hn(),o=null,c=Bd;c!==null;){var f=c.next,g=wv(c,s);g===0?(c.next=null,o===null?Bd=f:o.next=f,f===null&&(To=o)):(o=c,(n!==0||(g&3)!==0)&&(qd=!0)),c=f}qt!==0&&qt!==5||gc(n),ei!==0&&(ei=0)}function wv(n,s){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var v=31-Et(g),T=1<<v,D=f[v];D===-1?((T&o)===0||(T&c)!==0)&&(f[v]=Of(T,s)):D<=s&&(n.expiredLanes|=T),g&=~T}if(s=ct,o=Ue,o=_r(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===s&&(et===2||et===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Is(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||rr(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(c!==null&&Is(c),$r(o)){case 2:case 8:o=Sl;break;case 32:o=Cs;break;case 268435456:o=ku;break;default:o=Cs}return c=Ev.bind(null,n),o=Bt(o,c),n.callbackPriority=s,n.callbackNode=o,s}return c!==null&&c!==null&&Is(c),n.callbackPriority=2,n.callbackNode=null,2}function Ev(n,s){if(qt!==0&&qt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(zd()&&n.callbackNode!==o)return null;var c=Ue;return c=_r(n,n===ct?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(sv(n,c,s),wv(n,hn()),n.callbackNode!=null&&n.callbackNode===o?Ev.bind(null,n):null)}function Tv(n,s){if(zd())return null;sv(n,s,!0)}function KS(){s2(function(){(We&6)!==0?Bt(Tl,HS):_v()})}function og(){if(ei===0){var n=lo;n===0&&(n=vr,vr<<=1,(vr&261888)===0&&(vr=256)),ei=n}return ei}function Sv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Qa(""+n)}function Av(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function QS(n,s,o,c,f){if(s==="submit"&&o&&o.stateNode===f){var g=Sv((f[Kt]||null).action),v=c.submitter;v&&(s=(s=v[Kt]||null)?Sv(s.formAction):v.getAttribute("formAction"),s!==null&&(g=s,v=null));var T=new jr("action","action",null,c,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ei!==0){var D=v?Av(f,v):new FormData(f);Nm(o,{pending:!0,data:D,method:f.method,action:g},null,D)}}else typeof g=="function"&&(T.preventDefault(),D=v?Av(f,v):new FormData(f),Nm(o,{pending:!0,data:D,method:f.method,action:g},g,D))},currentTarget:f}]})}}for(var lg=0;lg<Gf.length;lg++){var cg=Gf[lg],YS=cg.toLowerCase(),$S=cg[0].toUpperCase()+cg.slice(1);dr(YS,"on"+$S)}dr(ry,"onAnimationEnd"),dr(sy,"onAnimationIteration"),dr(iy,"onAnimationStart"),dr("dblclick","onDoubleClick"),dr("focusin","onFocus"),dr("focusout","onBlur"),dr(dS,"onTransitionRun"),dr(hS,"onTransitionStart"),dr(fS,"onTransitionCancel"),dr(ay,"onTransitionEnd"),Ir("onMouseEnter",["mouseout","mouseover"]),Ir("onMouseLeave",["mouseout","mouseover"]),Ir("onPointerEnter",["pointerout","pointerover"]),Ir("onPointerLeave",["pointerout","pointerover"]),Nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Nr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function Nv(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var v=c.length-1;0<=v;v--){var T=c[v],D=T.instance,q=T.currentTarget;if(T=T.listener,D!==g&&f.isPropagationStopped())break e;g=T,f.currentTarget=q;try{g(f)}catch($){rd($)}f.currentTarget=null,g=D}else for(v=0;v<c.length;v++){if(T=c[v],D=T.instance,q=T.currentTarget,T=T.listener,D!==g&&f.isPropagationStopped())break e;g=T,f.currentTarget=q;try{g(f)}catch($){rd($)}f.currentTarget=null,g=D}}}}function Le(n,s){var o=s[qa];o===void 0&&(o=s[qa]=new Set);var c=n+"__bubble";o.has(c)||(Iv(s,n,2,!1),o.add(c))}function ug(n,s,o){var c=0;s&&(c|=4),Iv(o,n,c,s)}var Fd="_reactListening"+Math.random().toString(36).slice(2);function dg(n){if(!n[Fd]){n[Fd]=!0,Il.forEach(function(o){o!=="selectionchange"&&(XS.has(o)||ug(o,!1,n),ug(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Fd]||(s[Fd]=!0,ug("selectionchange",!1,s))}}function Iv(n,s,o,c){switch(rb(s)){case 2:var f=T2;break;case 8:f=S2;break;default:f=Ag}o=f.bind(null,s,o,n),f=void 0,!Gi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function hg(n,s,o,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var T=c.stateNode.containerInfo;if(T===f)break;if(v===4)for(v=c.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;T!==null;){if(v=Sr(T),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){c=g=v;continue e}T=T.parentNode}}c=c.return}Os(function(){var q=g,$=Fn(o),J=[];e:{var G=oy.get(n);if(G!==void 0){var K=jr,fe=n;switch(n){case"keypress":if(Ki(o)===0)break e;case"keydown":case"keyup":K=ed;break;case"focusin":fe="focus",K=Yi;break;case"focusout":fe="blur",K=Yi;break;case"beforeblur":case"afterblur":K=Yi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=x;break;case ry:case sy:case iy:K=Qu;break;case ay:K=S;break;case"scroll":case"scrollend":K=zl;break;case"wheel":K=H;break;case"copy":case"cut":case"paste":K=Yu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Jr;break;case"toggle":case"beforetoggle":K=ke}var Te=(s&4)!==0,lt=!Te&&(n==="scroll"||n==="scrollend"),P=Te?G!==null?G+"Capture":null:G;Te=[];for(var O=q,B;O!==null;){var W=O;if(B=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||B===null||P===null||(W=or(O,P),W!=null&&Te.push(yc(O,W,B))),lt)break;O=O.return}0<Te.length&&(G=new K(G,fe,null,o,$),J.push({event:G,listeners:Te}))}}if((s&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",K=n==="mouseout"||n==="pointerout",G&&o!==Pl&&(fe=o.relatedTarget||o.fromElement)&&(Sr(fe)||fe[Er]))break e;if((K||G)&&(G=$.window===$?$:(G=$.ownerDocument)?G.defaultView||G.parentWindow:window,K?(fe=o.relatedTarget||o.toElement,K=q,fe=fe?Sr(fe):null,fe!==null&&(lt=l(fe),Te=fe.tag,fe!==lt||Te!==5&&Te!==27&&Te!==6)&&(fe=null)):(K=null,fe=q),K!==fe)){if(Te=Bl,W="onMouseLeave",P="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(Te=Jr,W="onPointerLeave",P="onPointerEnter",O="pointer"),lt=K==null?G:An(K),B=fe==null?G:An(fe),G=new Te(W,O+"leave",K,o,$),G.target=lt,G.relatedTarget=B,W=null,Sr($)===q&&(Te=new Te(P,O+"enter",fe,o,$),Te.target=B,Te.relatedTarget=lt,W=Te),lt=W,K&&fe)t:{for(Te=WS,P=K,O=fe,B=0,W=P;W;W=Te(W))B++;W=0;for(var we=O;we;we=Te(we))W++;for(;0<B-W;)P=Te(P),B--;for(;0<W-B;)O=Te(O),W--;for(;B--;){if(P===O||O!==null&&P===O.alternate){Te=P;break t}P=Te(P),O=Te(O)}Te=null}else Te=null;K!==null&&Cv(J,G,K,Te,!1),fe!==null&&lt!==null&&Cv(J,lt,fe,Te,!0)}}e:{if(G=q?An(q):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var Qe=K0;else if(G0(G))if(Q0)Qe=lS;else{Qe=aS;var pe=iS}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?q&&Ka(q.elementType)&&(Qe=K0):Qe=oS;if(Qe&&(Qe=Qe(n,q))){H0(J,Qe,o,$);break e}pe&&pe(n,G,q),n==="focusout"&&q&&G.type==="number"&&q.memoizedProps.value!=null&&Vl(G,"number",G.value)}switch(pe=q?An(q):window,n){case"focusin":(G0(pe)||pe.contentEditable==="true")&&(eo=pe,Bf=q,Kl=null);break;case"focusout":Kl=Bf=eo=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,ty(J,o,$);break;case"selectionchange":if(uS)break;case"keydown":case"keyup":ty(J,o,$)}var Ve;if(Xe)e:{switch(n){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Za?$i(n,o)&&(ze="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ze="onCompositionStart");ze&&(Or&&o.locale!=="ko"&&(Za||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Za&&(Ve=Ul()):(kr=$,Ll="value"in kr?kr.value:kr.textContent,Za=!0)),pe=Gd(q,ze),0<pe.length&&(ze=new Vr(ze,n,null,o,$),J.push({event:ze,listeners:pe}),Ve?ze.data=Ve:(Ve=Ja(o),Ve!==null&&(ze.data=Ve)))),(Ve=Hn?tS(n,o):nS(n,o))&&(ze=Gd(q,"onBeforeInput"),0<ze.length&&(pe=new Vr("onBeforeInput","beforeinput",null,o,$),J.push({event:pe,listeners:ze}),pe.data=Ve)),QS(J,n,q,o,$)}Nv(J,s)})}function yc(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Gd(n,s){for(var o=s+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=or(n,o),f!=null&&c.unshift(yc(n,f,g)),f=or(n,s),f!=null&&c.push(yc(n,f,g))),n.tag===3)return c;n=n.return}return[]}function WS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Cv(n,s,o,c,f){for(var g=s._reactName,v=[];o!==null&&o!==c;){var T=o,D=T.alternate,q=T.stateNode;if(T=T.tag,D!==null&&D===c)break;T!==5&&T!==26&&T!==27||q===null||(D=q,f?(q=or(o,g),q!=null&&v.unshift(yc(o,q,D))):f||(q=or(o,g),q!=null&&v.push(yc(o,q,D)))),o=o.return}v.length!==0&&n.push({event:s,listeners:v})}var JS=/\r\n?/g,ZS=/\u0000|\uFFFD/g;function Rv(n){return(typeof n=="string"?n:""+n).replace(JS,`
`).replace(ZS,"")}function kv(n,s){return s=Rv(s),Rv(n)===s}function ot(n,s,o,c,f,g){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||xn(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&xn(n,""+c);break;case"className":Nn(n,"class",c);break;case"tabIndex":Nn(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Nn(n,o,c);break;case"style":Ml(n,c,g);break;case"data":if(s!=="object"){Nn(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Qa(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&ot(n,s,"name",f.name,f,null),ot(n,s,"formEncType",f.formEncType,f,null),ot(n,s,"formMethod",f.formMethod,f,null),ot(n,s,"formTarget",f.formTarget,f,null)):(ot(n,s,"encType",f.encType,f,null),ot(n,s,"method",f.method,f,null),ot(n,s,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Qa(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=ar);break;case"onScroll":c!=null&&Le("scroll",n);break;case"onScrollEnd":c!=null&&Le("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=Qa(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Le("beforetoggle",n),Le("toggle",n),Ga(n,"popover",c);break;case"xlinkActuate":Dt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Dt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Dt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Dt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Dt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Dt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Dt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Dt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Dt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ga(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Gu.get(o)||o,Ga(n,o,c))}}function fg(n,s,o,c,f,g){switch(o){case"style":Ml(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof c=="string"?xn(n,c):(typeof c=="number"||typeof c=="bigint")&&xn(n,""+c);break;case"onScroll":c!=null&&Le("scroll",n);break;case"onScrollEnd":c!=null&&Le("scrollend",n);break;case"onClick":c!=null&&(n.onclick=ar);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),g=n[Kt]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(s,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):Ga(n,o,c)}}}function nn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",n),Le("load",n);var c=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var v=o[g];if(v!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ot(n,s,g,v,o,null)}}f&&ot(n,s,"srcSet",o.srcSet,o,null),c&&ot(n,s,"src",o.src,o,null);return;case"input":Le("invalid",n);var T=g=v=f=null,D=null,q=null;for(c in o)if(o.hasOwnProperty(c)){var $=o[c];if($!=null)switch(c){case"name":f=$;break;case"type":v=$;break;case"checked":D=$;break;case"defaultChecked":q=$;break;case"value":g=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,s));break;default:ot(n,s,c,$,o,null)}}Bu(n,g,T,D,q,v,f,!1);return;case"select":Le("invalid",n),c=v=g=null;for(f in o)if(o.hasOwnProperty(f)&&(T=o[f],T!=null))switch(f){case"value":g=T;break;case"defaultValue":v=T;break;case"multiple":c=T;default:ot(n,s,f,T,o,null)}s=g,o=v,n.multiple=!!c,s!=null?ks(n,!!c,s,!1):o!=null&&ks(n,!!c,o,!0);return;case"textarea":Le("invalid",n),g=f=c=null;for(v in o)if(o.hasOwnProperty(v)&&(T=o[v],T!=null))switch(v){case"value":c=T;break;case"defaultValue":f=T;break;case"children":g=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:ot(n,s,v,T,o,null)}js(n,c,f,g);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(c=o[D],c!=null))switch(D){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ot(n,s,D,c,o,null)}return;case"dialog":Le("beforetoggle",n),Le("toggle",n),Le("cancel",n),Le("close",n);break;case"iframe":case"object":Le("load",n);break;case"video":case"audio":for(c=0;c<pc.length;c++)Le(pc[c],n);break;case"image":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"embed":case"source":case"link":Le("error",n),Le("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in o)if(o.hasOwnProperty(q)&&(c=o[q],c!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ot(n,s,q,c,o,null)}return;default:if(Ka(s)){for($ in o)o.hasOwnProperty($)&&(c=o[$],c!==void 0&&fg(n,s,$,c,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(c=o[T],c!=null&&ot(n,s,T,c,o,null))}function e2(n,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,v=null,T=null,D=null,q=null,$=null;for(K in o){var J=o[K];if(o.hasOwnProperty(K)&&J!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":D=J;default:c.hasOwnProperty(K)||ot(n,s,K,null,c,J)}}for(var G in c){var K=c[G];if(J=o[G],c.hasOwnProperty(G)&&(K!=null||J!=null))switch(G){case"type":g=K;break;case"name":f=K;break;case"checked":q=K;break;case"defaultChecked":$=K;break;case"value":v=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:K!==J&&ot(n,s,G,K,c,J)}}Ha(n,v,T,D,q,$,g,f);return;case"select":K=v=T=G=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":K=D;default:c.hasOwnProperty(g)||ot(n,s,g,null,c,D)}for(f in c)if(g=c[f],D=o[f],c.hasOwnProperty(f)&&(g!=null||D!=null))switch(f){case"value":G=g;break;case"defaultValue":T=g;break;case"multiple":v=g;default:g!==D&&ot(n,s,f,g,c,D)}s=T,o=v,c=K,G!=null?ks(n,!!o,G,!1):!!c!=!!o&&(s!=null?ks(n,!!o,s,!0):ks(n,!!o,o?[]:"",!1));return;case"textarea":K=G=null;for(T in o)if(f=o[T],o.hasOwnProperty(T)&&f!=null&&!c.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ot(n,s,T,null,c,f)}for(v in c)if(f=c[v],g=o[v],c.hasOwnProperty(v)&&(f!=null||g!=null))switch(v){case"value":G=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&ot(n,s,v,f,c,g)}qu(n,G,K);return;case"option":for(var fe in o)if(G=o[fe],o.hasOwnProperty(fe)&&G!=null&&!c.hasOwnProperty(fe))switch(fe){case"selected":n.selected=!1;break;default:ot(n,s,fe,null,c,G)}for(D in c)if(G=c[D],K=o[D],c.hasOwnProperty(D)&&G!==K&&(G!=null||K!=null))switch(D){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ot(n,s,D,G,c,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)G=o[Te],o.hasOwnProperty(Te)&&G!=null&&!c.hasOwnProperty(Te)&&ot(n,s,Te,null,c,G);for(q in c)if(G=c[q],K=o[q],c.hasOwnProperty(q)&&G!==K&&(G!=null||K!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,s));break;default:ot(n,s,q,G,c,K)}return;default:if(Ka(s)){for(var lt in o)G=o[lt],o.hasOwnProperty(lt)&&G!==void 0&&!c.hasOwnProperty(lt)&&fg(n,s,lt,void 0,c,G);for($ in c)G=c[$],K=o[$],!c.hasOwnProperty($)||G===K||G===void 0&&K===void 0||fg(n,s,$,G,c,K);return}}for(var P in o)G=o[P],o.hasOwnProperty(P)&&G!=null&&!c.hasOwnProperty(P)&&ot(n,s,P,null,c,G);for(J in c)G=c[J],K=o[J],!c.hasOwnProperty(J)||G===K||G==null&&K==null||ot(n,s,J,G,c,K)}function jv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function t2(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],g=f.transferSize,v=f.initiatorType,T=f.duration;if(g&&T&&jv(v)){for(v=0,T=f.responseEnd,c+=1;c<o.length;c++){var D=o[c],q=D.startTime;if(q>T)break;var $=D.transferSize,J=D.initiatorType;$&&jv(J)&&(D=D.responseEnd,v+=$*(D<T?1:(T-q)/(D-q)))}if(--c,s+=8*(g+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var mg=null,gg=null;function Hd(n){return n.nodeType===9?n:n.ownerDocument}function Dv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vv(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function pg(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var yg=null;function n2(){var n=window.event;return n&&n.type==="popstate"?n===yg?!1:(yg=n,!0):(yg=null,!1)}var Ov=typeof setTimeout=="function"?setTimeout:void 0,r2=typeof clearTimeout=="function"?clearTimeout:void 0,Mv=typeof Promise=="function"?Promise:void 0,s2=typeof queueMicrotask=="function"?queueMicrotask:typeof Mv<"u"?function(n){return Mv.resolve(null).then(n).catch(i2)}:Ov;function i2(n){setTimeout(function(){throw n})}function ti(n){return n==="head"}function Pv(n,s){var o=s,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),Io(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")xc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,xc(o);for(var g=o.firstChild;g;){var v=g.nextSibling,T=g.nodeName;g[Tr]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=v}}else o==="body"&&xc(n.ownerDocument.body);o=f}while(o);Io(s)}function Lv(n,s){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function xg(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":xg(o),Fa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function a2(n,s,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Tr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Jn(n.nextSibling),n===null)break}return null}function o2(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Jn(n.nextSibling),n===null))return null;return n}function Uv(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Jn(n.nextSibling),n===null))return null;return n}function vg(n){return n.data==="$?"||n.data==="$~"}function bg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function l2(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Jn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var _g=null;function zv(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Jn(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function Bv(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function qv(n,s,o){switch(s=Hd(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function xc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Fa(n)}var Zn=new Map,Fv=new Set;function Kd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var fs=le.d;le.d={f:c2,r:u2,D:d2,C:h2,L:f2,m:m2,X:p2,S:g2,M:y2};function c2(){var n=fs.f(),s=Pd();return n||s}function u2(n){var s=qn(n);s!==null&&s.tag===5&&s.type==="form"?ax(s):fs.r(n)}var So=typeof document>"u"?null:document;function Gv(n,s,o){var c=So;if(c&&typeof s=="string"&&s){var f=yn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Fv.has(f)||(Fv.add(f),n={rel:n,crossOrigin:o,href:s},c.querySelector(f)===null&&(s=c.createElement("link"),nn(s,"link",n),jt(s),c.head.appendChild(s)))}}function d2(n){fs.D(n),Gv("dns-prefetch",n,null)}function h2(n,s){fs.C(n,s),Gv("preconnect",n,s)}function f2(n,s,o){fs.L(n,s,o);var c=So;if(c&&n&&s){var f='link[rel="preload"][as="'+yn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+yn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+yn(o.imageSizes)+'"]')):f+='[href="'+yn(n)+'"]';var g=f;switch(s){case"style":g=Ao(n);break;case"script":g=No(n)}Zn.has(g)||(n=w({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Zn.set(g,n),c.querySelector(f)!==null||s==="style"&&c.querySelector(vc(g))||s==="script"&&c.querySelector(bc(g))||(s=c.createElement("link"),nn(s,"link",n),jt(s),c.head.appendChild(s)))}}function m2(n,s){fs.m(n,s);var o=So;if(o&&n){var c=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+yn(c)+'"][href="'+yn(n)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=No(n)}if(!Zn.has(g)&&(n=w({rel:"modulepreload",href:n},s),Zn.set(g,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(bc(g)))return}c=o.createElement("link"),nn(c,"link",n),jt(c),o.head.appendChild(c)}}}function g2(n,s,o){fs.S(n,s,o);var c=So;if(c&&n){var f=Ar(c).hoistableStyles,g=Ao(n);s=s||"default";var v=f.get(g);if(!v){var T={loading:0,preload:null};if(v=c.querySelector(vc(g)))T.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Zn.get(g))&&wg(n,o);var D=v=c.createElement("link");jt(D),nn(D,"link",n),D._p=new Promise(function(q,$){D.onload=q,D.onerror=$}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Qd(v,s,c)}v={type:"stylesheet",instance:v,count:1,state:T},f.set(g,v)}}}function p2(n,s){fs.X(n,s);var o=So;if(o&&n){var c=Ar(o).hoistableScripts,f=No(n),g=c.get(f);g||(g=o.querySelector(bc(f)),g||(n=w({src:n,async:!0},s),(s=Zn.get(f))&&Eg(n,s),g=o.createElement("script"),jt(g),nn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function y2(n,s){fs.M(n,s);var o=So;if(o&&n){var c=Ar(o).hoistableScripts,f=No(n),g=c.get(f);g||(g=o.querySelector(bc(f)),g||(n=w({src:n,async:!0,type:"module"},s),(s=Zn.get(f))&&Eg(n,s),g=o.createElement("script"),jt(g),nn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function Hv(n,s,o,c){var f=(f=De.current)?Kd(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Ao(o.href),o=Ar(f).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Ao(o.href);var g=Ar(f).hoistableStyles,v=g.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,v),(g=f.querySelector(vc(n)))&&!g._p&&(v.instance=g,v.state.loading=5),Zn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Zn.set(n,o),g||x2(f,n,o,v.state))),s&&c===null)throw Error(r(528,""));return v}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=No(o),o=Ar(f).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Ao(n){return'href="'+yn(n)+'"'}function vc(n){return'link[rel="stylesheet"]['+n+"]"}function Kv(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function x2(n,s,o,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),nn(s,"link",o),jt(s),n.head.appendChild(s))}function No(n){return'[src="'+yn(n)+'"]'}function bc(n){return"script[async]"+n}function Qv(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+yn(o.href)+'"]');if(c)return s.instance=c,jt(c),c;var f=w({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),jt(c),nn(c,"style",f),Qd(c,o.precedence,n),s.instance=c;case"stylesheet":f=Ao(o.href);var g=n.querySelector(vc(f));if(g)return s.state.loading|=4,s.instance=g,jt(g),g;c=Kv(o),(f=Zn.get(f))&&wg(c,f),g=(n.ownerDocument||n).createElement("link"),jt(g);var v=g;return v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),nn(g,"link",c),s.state.loading|=4,Qd(g,o.precedence,n),s.instance=g;case"script":return g=No(o.src),(f=n.querySelector(bc(g)))?(s.instance=f,jt(f),f):(c=o,(f=Zn.get(g))&&(c=w({},o),Eg(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),jt(f),nn(f,"link",c),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Qd(c,o.precedence,n));return s.instance}function Qd(n,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,v=0;v<c.length;v++){var T=c[v];if(T.dataset.precedence===s)g=T;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function wg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Eg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Yd=null;function Yv(n,s,o){if(Yd===null){var c=new Map,f=Yd=new Map;f.set(o,c)}else f=Yd,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[Tr]||g[kt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var v=g.getAttribute(s)||"";v=n+v;var T=c.get(v);T?T.push(g):c.set(v,[g])}}return c}function $v(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function v2(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Xv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function b2(n,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Ao(c.href),g=s.querySelector(vc(f));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=$d.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=g,jt(g);return}g=s.ownerDocument||s,c=Kv(c),(f=Zn.get(f))&&wg(c,f),g=g.createElement("link"),jt(g);var v=g;v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),nn(g,"link",c),o.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=$d.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Tg=0;function _2(n,s){return n.stylesheets&&n.count===0&&Wd(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&Wd(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+s);0<n.imgBytes&&Tg===0&&(Tg=62500*t2());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Wd(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>Tg?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function $d(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Xd=null;function Wd(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Xd=new Map,s.forEach(w2,n),Xd=null,$d.call(n))}function w2(n,s){if(!(s.state.loading&4)){var o=Xd.get(n);if(o)var c=o.get(null);else{o=new Map,Xd.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var v=f[g];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),c=v)}c&&o.set(null,c)}f=s.instance,v=f.getAttribute("data-precedence"),g=o.get(v)||c,g===c&&o.set(null,f),o.set(v,f),this.count++,c=$d.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var _c={$$typeof:re,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function E2(n,s,o,c,f,g,v,T,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wr(0),this.hiddenUpdates=wr(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Wv(n,s,o,c,f,g,v,T,D,q,$,J){return n=new E2(n,s,o,v,D,q,$,J,T),s=1,g===!0&&(s|=24),g=Cn(3,null,null,s),n.current=g,g.stateNode=n,s=rm(),s.refCount++,n.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:s},om(g),n}function Jv(n){return n?(n=ro,n):ro}function Zv(n,s,o,c,f,g){f=Jv(f),c.context===null?c.context=f:c.pendingContext=f,c=Gs(s),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Hs(n,c,s),o!==null&&(En(o,n,s),Zl(o,n,s))}function eb(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Sg(n,s){eb(n,s),(n=n.alternate)&&eb(n,s)}function tb(n){if(n.tag===13||n.tag===31){var s=Ji(n,67108864);s!==null&&En(s,n,67108864),Sg(n,67108864)}}function nb(n){if(n.tag===13||n.tag===31){var s=Vn();s=zi(s);var o=Ji(n,s);o!==null&&En(o,n,s),Sg(n,s)}}var Jd=!0;function T2(n,s,o,c){var f=Y.T;Y.T=null;var g=le.p;try{le.p=2,Ag(n,s,o,c)}finally{le.p=g,Y.T=f}}function S2(n,s,o,c){var f=Y.T;Y.T=null;var g=le.p;try{le.p=8,Ag(n,s,o,c)}finally{le.p=g,Y.T=f}}function Ag(n,s,o,c){if(Jd){var f=Ng(c);if(f===null)hg(n,s,c,Zd,o),sb(n,c);else if(N2(f,n,s,o,c))c.stopPropagation();else if(sb(n,c),s&4&&-1<A2.indexOf(n)){for(;f!==null;){var g=qn(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var v=br(g.pendingLanes);if(v!==0){var T=g;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var D=1<<31-Et(v);T.entanglements[1]|=D,v&=~D}Ur(g),(We&6)===0&&(Od=hn()+500,gc(0))}}break;case 31:case 13:T=Ji(g,2),T!==null&&En(T,g,2),Pd(),Sg(g,2)}if(g=Ng(c),g===null&&hg(n,s,c,Zd,o),g===f)break;f=g}f!==null&&c.stopPropagation()}else hg(n,s,c,null,o)}}function Ng(n){return n=Fn(n),Ig(n)}var Zd=null;function Ig(n){if(Zd=null,n=Sr(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=u(s),n!==null)return n;n=null}else if(o===31){if(n=m(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Zd=n,null}function rb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mi()){case Tl:return 2;case Sl:return 8;case Cs:case Vf:return 32;case ku:return 268435456;default:return 32}default:return 32}}var Cg=!1,ni=null,ri=null,si=null,wc=new Map,Ec=new Map,ii=[],A2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sb(n,s){switch(n){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":wc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ec.delete(s.pointerId)}}function Tc(n,s,o,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=qn(s),s!==null&&tb(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function N2(n,s,o,c,f){switch(s){case"focusin":return ni=Tc(ni,n,s,o,c,f),!0;case"dragenter":return ri=Tc(ri,n,s,o,c,f),!0;case"mouseover":return si=Tc(si,n,s,o,c,f),!0;case"pointerover":var g=f.pointerId;return wc.set(g,Tc(wc.get(g)||null,n,s,o,c,f)),!0;case"gotpointercapture":return g=f.pointerId,Ec.set(g,Tc(Ec.get(g)||null,n,s,o,c,f)),!0}return!1}function ib(n){var s=Sr(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){n.blockedOn=s,sr(n.priority,function(){nb(o)});return}}else if(s===31){if(s=m(o),s!==null){n.blockedOn=s,sr(n.priority,function(){nb(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function eh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Ng(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Pl=c,o.target.dispatchEvent(c),Pl=null}else return s=qn(o),s!==null&&tb(s),n.blockedOn=o,!1;s.shift()}return!0}function ab(n,s,o){eh(n)&&o.delete(s)}function I2(){Cg=!1,ni!==null&&eh(ni)&&(ni=null),ri!==null&&eh(ri)&&(ri=null),si!==null&&eh(si)&&(si=null),wc.forEach(ab),Ec.forEach(ab)}function th(n,s){n.blockedOn===s&&(n.blockedOn=null,Cg||(Cg=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,I2)))}var nh=null;function ob(n){nh!==n&&(nh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){nh===n&&(nh=null);for(var s=0;s<n.length;s+=3){var o=n[s],c=n[s+1],f=n[s+2];if(typeof c!="function"){if(Ig(c||o)===null)continue;break}var g=qn(o);g!==null&&(n.splice(s,3),s-=3,Nm(g,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function Io(n){function s(D){return th(D,n)}ni!==null&&th(ni,n),ri!==null&&th(ri,n),si!==null&&th(si,n),wc.forEach(s),Ec.forEach(s);for(var o=0;o<ii.length;o++){var c=ii[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<ii.length&&(o=ii[0],o.blockedOn===null);)ib(o),o.blockedOn===null&&ii.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],g=o[c+1],v=f[Kt]||null;if(typeof g=="function")v||ob(o);else if(v){var T=null;if(g&&g.hasAttribute("formAction")){if(f=g,v=g[Kt]||null)T=v.formAction;else if(Ig(f)!==null)continue}else T=v.action;typeof T=="function"?o[c+1]=T:(o.splice(c,3),c-=3),ob(o)}}}function lb(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Rg(n){this._internalRoot=n}rh.prototype.render=Rg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,c=Vn();Zv(o,c,n,s,null,null)},rh.prototype.unmount=Rg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Zv(n.current,2,null,n,null,null),Pd(),s[Er]=null}};function rh(n){this._internalRoot=n}rh.prototype.unstable_scheduleHydration=function(n){if(n){var s=Pu();n={blockedOn:null,target:n,priority:s};for(var o=0;o<ii.length&&s!==0&&s<ii[o].priority;o++);ii.splice(o,0,n),o===0&&ib(n)}};var cb=e.version;if(cb!=="19.2.3")throw Error(r(527,cb,"19.2.3"));le.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(s),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var C2={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{nr=sh.inject(C2),Wt=sh}catch{}}return Ac.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,c="",f=px,g=yx,v=xx;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=Wv(n,1,!1,null,null,o,c,null,f,g,v,lb),n[Er]=s.current,dg(n),new Rg(s)},Ac.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var c=!1,f="",g=px,v=yx,T=xx,D=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),s=Wv(n,1,!0,s,o??null,c,f,D,g,v,T,lb),s.context=Jv(null),o=s.current,c=Vn(),c=zi(c),f=Gs(c),f.callback=null,Hs(o,f,c),o=c,s.current.lanes=o,Li(s,o),Ur(s),n[Er]=s.current,dg(n),new rh(s)},Ac.version="19.2.3",Ac}var vb;function z2(){if(vb)return Dg.exports;vb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Dg.exports=U2(),Dg.exports}var B2=z2();const q2=Dw(B2);var gn=(i=>(i.ADMIN="ADMIN",i.AGENT="AGENT",i.SUPERVISOR="SUPERVISOR",i))(gn||{}),Mn=(i=>(i.PENDING="PENDING",i.ACTIVE="ACTIVE",i.DISABLED="DISABLED",i))(Mn||{}),$t=(i=>(i.PENDING="PENDING",i.CONVERTED="CONVERTED",i))($t||{});const me={Dashboard:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}),d.jsx("rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}),d.jsx("rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}),d.jsx("rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"})]}),Users:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"9",cy:"7",r:"4"}),d.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),d.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Lock:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),d.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),Prospect:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"9",cy:"7",r:"4"}),d.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),d.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Client:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Sales:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),d.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),Commission:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),Notification:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),d.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Settings:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"12",cy:"12",r:"3"}),d.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),Globe:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),d.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),Profile:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Plus:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),d.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Logout:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),d.jsx("polyline",{points:"16 17 21 12 16 7"}),d.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Copy:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),d.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Refresh:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),d.jsx("path",{d:"M3 3v5h5"}),d.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),d.jsx("path",{d:"M16 16h5v5"})]}),Eye:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),d.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),EyeOff:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}),d.jsx("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}),d.jsx("path",{d:"M6.61 6.61A13.52 13.52 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"}),d.jsx("line",{x1:"2",x2:"22",y1:"2",y2:"22"})]})},F2=()=>{};var bb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},G2=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],u=i[t++],m=i[t++],p=((a&7)<<18|(l&63)<<12|(u&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=i[t++],u=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Ow={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const l=i[a],u=a+1<i.length,m=u?i[a+1]:0,p=a+2<i.length,y=p?i[a+2]:0,b=l>>2,w=(l&3)<<4|m>>4;let E=(m&15)<<2|y>>6,j=y&63;p||(j=64,u||(E=64)),r.push(t[b],t[w],t[E],t[j])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Vw(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):G2(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],m=a<i.length?t[i.charAt(a)]:0;++a;const y=a<i.length?t[i.charAt(a)]:64;++a;const w=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||m==null||y==null||w==null)throw new H2;const E=l<<2|m>>4;if(r.push(E),y!==64){const j=m<<4&240|y>>2;if(r.push(j),w!==64){const L=y<<6&192|w;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class H2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const K2=function(i){const e=Vw(i);return Ow.encodeByteArray(e,!0)},Mw=function(i){return K2(i).replace(/\./g,"")},Pw=function(i){try{return Ow.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=()=>Lw().__FIREBASE_DEFAULTS__,Y2=()=>{if(typeof process>"u"||typeof bb>"u")return;const i=bb.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},$2=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Pw(i[1]);return e&&JSON.parse(e)},sf=()=>{try{return F2()||Q2()||Y2()||$2()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},X2=i=>{var e,t;return(t=(e=sf())==null?void 0:e.emulatorHosts)==null?void 0:t[i]},Uw=()=>{var i;return(i=sf())==null?void 0:i.config},zw=i=>{var e;return(e=sf())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bw(i){return(await fetch(i,{credentials:"include"})).ok}const zc={};function J2(){const i={prod:[],emulator:[]};for(const e of Object.keys(zc))zc[e]?i.emulator.push(e):i.prod.push(e);return i}function Z2(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let _b=!1;function eA(i,e){if(typeof window>"u"||typeof document>"u"||!fl(window.location.host)||zc[i]===e||zc[i]||_b)return;zc[i]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",l=J2().prod.length>0;function u(){const E=document.getElementById(r);E&&E.remove()}function m(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function p(E,j){E.setAttribute("width","24"),E.setAttribute("id",j),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function y(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{_b=!0,u()},E}function b(E,j){E.setAttribute("id",j),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function w(){const E=Z2(r),j=t("text"),L=document.getElementById(j)||document.createElement("span"),F=t("learnmore"),Q=document.getElementById(F)||document.createElement("a"),ie=t("preprendIcon"),ne=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const re=E.element;m(re),b(Q,F);const xe=y();p(ne,ie),re.append(ne,L,Q,xe),document.body.appendChild(re)}l?(L.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function qw(){var e;const i=(e=sf())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function sA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iA(){const i=Ft();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Fw(){return!qw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gw(){return!qw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Hw(){try{return typeof indexedDB=="object"}catch{return!1}}function aA(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="FirebaseError";class Es extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=oA,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mu.prototype.create)}}class mu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?lA(l,r):"Error",m=`${this.serviceName}: ${u} (${a}).`;return new Es(a,m,r)}}function lA(i,e){return i.replace(cA,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const cA=/\{\$([^}]+)}/g;function uA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Sa(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=i[a],u=e[a];if(wb(l)&&wb(u)){if(!Sa(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function wb(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Dc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Vc(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function dA(i,e){const t=new hA(i,e);return t.subscribe.bind(t)}class hA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");fA(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Pg),a.error===void 0&&(a.error=Pg),a.complete===void 0&&(a.complete=Pg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fA(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Pg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(i){return i&&i._delegate?i._delegate:i}class Aa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new W2;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pA(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);r===m&&u.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gA(i){return i===ha?void 0:i}function pA(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Be||(Be={}));const xA={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},vA=Be.INFO,bA={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},_A=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=bA[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pp{constructor(e){this.name=e,this._logLevel=vA,this._logHandler=_A,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const wA=(i,e)=>e.some(t=>i instanceof t);let Eb,Tb;function EA(){return Eb||(Eb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TA(){return Tb||(Tb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kw=new WeakMap,tp=new WeakMap,Qw=new WeakMap,Lg=new WeakMap,Lp=new WeakMap;function SA(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",u)},l=()=>{t(vi(i.result)),a()},u=()=>{r(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Kw.set(t,i)}).catch(()=>{}),Lp.set(e,i),e}function AA(i){if(tp.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",u),i.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",u),i.addEventListener("abort",u)});tp.set(i,e)}let np={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return tp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Qw.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vi(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function NA(i){np=i(np)}function IA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Ug(this),e,...t);return Qw.set(r,e.sort?e.sort():[e]),vi(r)}:TA().includes(i)?function(...e){return i.apply(Ug(this),e),vi(Kw.get(this))}:function(...e){return vi(i.apply(Ug(this),e))}}function CA(i){return typeof i=="function"?IA(i):(i instanceof IDBTransaction&&AA(i),wA(i,EA())?new Proxy(i,np):i)}function vi(i){if(i instanceof IDBRequest)return SA(i);if(Lg.has(i))return Lg.get(i);const e=CA(i);return e!==i&&(Lg.set(i,e),Lp.set(e,i)),e}const Ug=i=>Lp.get(i);function RA(i,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(i,e),m=vi(u);return r&&u.addEventListener("upgradeneeded",p=>{r(vi(u.result),p.oldVersion,p.newVersion,vi(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const kA=["get","getKey","getAll","getAllKeys","count"],jA=["put","add","delete","clear"],zg=new Map;function Sb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(zg.get(e))return zg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=jA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||kA.includes(t)))return;const l=async function(u,...m){const p=this.transaction(u,a?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),a&&p.done]))[0]};return zg.set(e,l),l}NA(i=>({...i,get:(e,t,r)=>Sb(e,t)||i.get(e,t,r),has:(e,t)=>!!Sb(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function VA(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rp="@firebase/app",Ab="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Pp("@firebase/app"),OA="@firebase/app-compat",MA="@firebase/analytics-compat",PA="@firebase/analytics",LA="@firebase/app-check-compat",UA="@firebase/app-check",zA="@firebase/auth",BA="@firebase/auth-compat",qA="@firebase/database",FA="@firebase/data-connect",GA="@firebase/database-compat",HA="@firebase/functions",KA="@firebase/functions-compat",QA="@firebase/installations",YA="@firebase/installations-compat",$A="@firebase/messaging",XA="@firebase/messaging-compat",WA="@firebase/performance",JA="@firebase/performance-compat",ZA="@firebase/remote-config",eN="@firebase/remote-config-compat",tN="@firebase/storage",nN="@firebase/storage-compat",rN="@firebase/firestore",sN="@firebase/ai",iN="@firebase/firestore-compat",aN="firebase",oN="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="[DEFAULT]",lN={[rp]:"fire-core",[OA]:"fire-core-compat",[PA]:"fire-analytics",[MA]:"fire-analytics-compat",[UA]:"fire-app-check",[LA]:"fire-app-check-compat",[zA]:"fire-auth",[BA]:"fire-auth-compat",[qA]:"fire-rtdb",[FA]:"fire-data-connect",[GA]:"fire-rtdb-compat",[HA]:"fire-fn",[KA]:"fire-fn-compat",[QA]:"fire-iid",[YA]:"fire-iid-compat",[$A]:"fire-fcm",[XA]:"fire-fcm-compat",[WA]:"fire-perf",[JA]:"fire-perf-compat",[ZA]:"fire-rc",[eN]:"fire-rc-compat",[tN]:"fire-gcs",[nN]:"fire-gcs-compat",[rN]:"fire-fst",[iN]:"fire-fst-compat",[sN]:"fire-vertex","fire-js":"fire-js",[aN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new Map,cN=new Map,ip=new Map;function Nb(i,e){try{i.container.addComponent(e)}catch(t){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Yo(i){const e=i.name;if(ip.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;ip.set(e,i);for(const t of Rh.values())Nb(t,i);for(const t of cN.values())Nb(t,i);return!0}function Up(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function er(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new mu("app","Firebase",uN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=oN;function Yw(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:sp,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw bi.create("bad-app-name",{appName:String(a)});if(t||(t=Uw()),!t)throw bi.create("no-options");const l=Rh.get(a);if(l){if(Sa(t,l.options)&&Sa(r,l.config))return l;throw bi.create("duplicate-app",{appName:a})}const u=new yA(a);for(const p of ip.values())u.addComponent(p);const m=new dN(t,r,u);return Rh.set(a,m),m}function hN(i=sp){const e=Rh.get(i);if(!e&&i===sp&&Uw())return Yw();if(!e)throw bi.create("no-app",{appName:i});return e}function _i(i,e,t){let r=lN[i]??i;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${r}" with version "${e}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(u.join(" "));return}Yo(new Aa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="firebase-heartbeat-database",mN=1,Wc="firebase-heartbeat-store";let Bg=null;function $w(){return Bg||(Bg=RA(fN,mN,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Wc)}catch(t){console.warn(t)}}}}).catch(i=>{throw bi.create("idb-open",{originalErrorMessage:i.message})})),Bg}async function gN(i){try{const t=(await $w()).transaction(Wc),r=await t.objectStore(Wc).get(Xw(i));return await t.done,r}catch(e){if(e instanceof Es)xs.warn(e.message);else{const t=bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xs.warn(t.message)}}}async function Ib(i,e){try{const r=(await $w()).transaction(Wc,"readwrite");await r.objectStore(Wc).put(e,Xw(i)),await r.done}catch(t){if(t instanceof Es)xs.warn(t.message);else{const r=bi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xs.warn(r.message)}}}function Xw(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=1024,yN=30;class xN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new bN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Cb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>yN){const u=_N(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Cb(),{heartbeatsToSend:r,unsentEntries:a}=vN(this._heartbeatsCache.heartbeats),l=Mw(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return xs.warn(t),""}}}function Cb(){return new Date().toISOString().substring(0,10)}function vN(i,e=pN){const t=[];let r=i.slice();for(const a of i){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Rb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Rb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class bN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hw()?aA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await gN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ib(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ib(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Rb(i){return Mw(JSON.stringify({version:2,heartbeats:i})).length}function _N(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(i){Yo(new Aa("platform-logger",e=>new DA(e),"PRIVATE")),Yo(new Aa("heartbeat",e=>new xN(e),"PRIVATE")),_i(rp,Ab,i),_i(rp,Ab,"esm2020"),_i("fire-js","")}wN("");var kb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wi,Ww;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,N){function I(){}I.prototype=N.prototype,k.F=N.prototype,k.prototype=new I,k.prototype.constructor=k,k.D=function(R,A,V){for(var C=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)C[Ce-2]=arguments[Ce];return N.prototype[A].apply(R,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(k,N,I){I||(I=0);const R=Array(16);if(typeof N=="string")for(var A=0;A<16;++A)R[A]=N.charCodeAt(I++)|N.charCodeAt(I++)<<8|N.charCodeAt(I++)<<16|N.charCodeAt(I++)<<24;else for(A=0;A<16;++A)R[A]=N[I++]|N[I++]<<8|N[I++]<<16|N[I++]<<24;N=k.g[0],I=k.g[1],A=k.g[2];let V=k.g[3],C;C=N+(V^I&(A^V))+R[0]+3614090360&4294967295,N=I+(C<<7&4294967295|C>>>25),C=V+(A^N&(I^A))+R[1]+3905402710&4294967295,V=N+(C<<12&4294967295|C>>>20),C=A+(I^V&(N^I))+R[2]+606105819&4294967295,A=V+(C<<17&4294967295|C>>>15),C=I+(N^A&(V^N))+R[3]+3250441966&4294967295,I=A+(C<<22&4294967295|C>>>10),C=N+(V^I&(A^V))+R[4]+4118548399&4294967295,N=I+(C<<7&4294967295|C>>>25),C=V+(A^N&(I^A))+R[5]+1200080426&4294967295,V=N+(C<<12&4294967295|C>>>20),C=A+(I^V&(N^I))+R[6]+2821735955&4294967295,A=V+(C<<17&4294967295|C>>>15),C=I+(N^A&(V^N))+R[7]+4249261313&4294967295,I=A+(C<<22&4294967295|C>>>10),C=N+(V^I&(A^V))+R[8]+1770035416&4294967295,N=I+(C<<7&4294967295|C>>>25),C=V+(A^N&(I^A))+R[9]+2336552879&4294967295,V=N+(C<<12&4294967295|C>>>20),C=A+(I^V&(N^I))+R[10]+4294925233&4294967295,A=V+(C<<17&4294967295|C>>>15),C=I+(N^A&(V^N))+R[11]+2304563134&4294967295,I=A+(C<<22&4294967295|C>>>10),C=N+(V^I&(A^V))+R[12]+1804603682&4294967295,N=I+(C<<7&4294967295|C>>>25),C=V+(A^N&(I^A))+R[13]+4254626195&4294967295,V=N+(C<<12&4294967295|C>>>20),C=A+(I^V&(N^I))+R[14]+2792965006&4294967295,A=V+(C<<17&4294967295|C>>>15),C=I+(N^A&(V^N))+R[15]+1236535329&4294967295,I=A+(C<<22&4294967295|C>>>10),C=N+(A^V&(I^A))+R[1]+4129170786&4294967295,N=I+(C<<5&4294967295|C>>>27),C=V+(I^A&(N^I))+R[6]+3225465664&4294967295,V=N+(C<<9&4294967295|C>>>23),C=A+(N^I&(V^N))+R[11]+643717713&4294967295,A=V+(C<<14&4294967295|C>>>18),C=I+(V^N&(A^V))+R[0]+3921069994&4294967295,I=A+(C<<20&4294967295|C>>>12),C=N+(A^V&(I^A))+R[5]+3593408605&4294967295,N=I+(C<<5&4294967295|C>>>27),C=V+(I^A&(N^I))+R[10]+38016083&4294967295,V=N+(C<<9&4294967295|C>>>23),C=A+(N^I&(V^N))+R[15]+3634488961&4294967295,A=V+(C<<14&4294967295|C>>>18),C=I+(V^N&(A^V))+R[4]+3889429448&4294967295,I=A+(C<<20&4294967295|C>>>12),C=N+(A^V&(I^A))+R[9]+568446438&4294967295,N=I+(C<<5&4294967295|C>>>27),C=V+(I^A&(N^I))+R[14]+3275163606&4294967295,V=N+(C<<9&4294967295|C>>>23),C=A+(N^I&(V^N))+R[3]+4107603335&4294967295,A=V+(C<<14&4294967295|C>>>18),C=I+(V^N&(A^V))+R[8]+1163531501&4294967295,I=A+(C<<20&4294967295|C>>>12),C=N+(A^V&(I^A))+R[13]+2850285829&4294967295,N=I+(C<<5&4294967295|C>>>27),C=V+(I^A&(N^I))+R[2]+4243563512&4294967295,V=N+(C<<9&4294967295|C>>>23),C=A+(N^I&(V^N))+R[7]+1735328473&4294967295,A=V+(C<<14&4294967295|C>>>18),C=I+(V^N&(A^V))+R[12]+2368359562&4294967295,I=A+(C<<20&4294967295|C>>>12),C=N+(I^A^V)+R[5]+4294588738&4294967295,N=I+(C<<4&4294967295|C>>>28),C=V+(N^I^A)+R[8]+2272392833&4294967295,V=N+(C<<11&4294967295|C>>>21),C=A+(V^N^I)+R[11]+1839030562&4294967295,A=V+(C<<16&4294967295|C>>>16),C=I+(A^V^N)+R[14]+4259657740&4294967295,I=A+(C<<23&4294967295|C>>>9),C=N+(I^A^V)+R[1]+2763975236&4294967295,N=I+(C<<4&4294967295|C>>>28),C=V+(N^I^A)+R[4]+1272893353&4294967295,V=N+(C<<11&4294967295|C>>>21),C=A+(V^N^I)+R[7]+4139469664&4294967295,A=V+(C<<16&4294967295|C>>>16),C=I+(A^V^N)+R[10]+3200236656&4294967295,I=A+(C<<23&4294967295|C>>>9),C=N+(I^A^V)+R[13]+681279174&4294967295,N=I+(C<<4&4294967295|C>>>28),C=V+(N^I^A)+R[0]+3936430074&4294967295,V=N+(C<<11&4294967295|C>>>21),C=A+(V^N^I)+R[3]+3572445317&4294967295,A=V+(C<<16&4294967295|C>>>16),C=I+(A^V^N)+R[6]+76029189&4294967295,I=A+(C<<23&4294967295|C>>>9),C=N+(I^A^V)+R[9]+3654602809&4294967295,N=I+(C<<4&4294967295|C>>>28),C=V+(N^I^A)+R[12]+3873151461&4294967295,V=N+(C<<11&4294967295|C>>>21),C=A+(V^N^I)+R[15]+530742520&4294967295,A=V+(C<<16&4294967295|C>>>16),C=I+(A^V^N)+R[2]+3299628645&4294967295,I=A+(C<<23&4294967295|C>>>9),C=N+(A^(I|~V))+R[0]+4096336452&4294967295,N=I+(C<<6&4294967295|C>>>26),C=V+(I^(N|~A))+R[7]+1126891415&4294967295,V=N+(C<<10&4294967295|C>>>22),C=A+(N^(V|~I))+R[14]+2878612391&4294967295,A=V+(C<<15&4294967295|C>>>17),C=I+(V^(A|~N))+R[5]+4237533241&4294967295,I=A+(C<<21&4294967295|C>>>11),C=N+(A^(I|~V))+R[12]+1700485571&4294967295,N=I+(C<<6&4294967295|C>>>26),C=V+(I^(N|~A))+R[3]+2399980690&4294967295,V=N+(C<<10&4294967295|C>>>22),C=A+(N^(V|~I))+R[10]+4293915773&4294967295,A=V+(C<<15&4294967295|C>>>17),C=I+(V^(A|~N))+R[1]+2240044497&4294967295,I=A+(C<<21&4294967295|C>>>11),C=N+(A^(I|~V))+R[8]+1873313359&4294967295,N=I+(C<<6&4294967295|C>>>26),C=V+(I^(N|~A))+R[15]+4264355552&4294967295,V=N+(C<<10&4294967295|C>>>22),C=A+(N^(V|~I))+R[6]+2734768916&4294967295,A=V+(C<<15&4294967295|C>>>17),C=I+(V^(A|~N))+R[13]+1309151649&4294967295,I=A+(C<<21&4294967295|C>>>11),C=N+(A^(I|~V))+R[4]+4149444226&4294967295,N=I+(C<<6&4294967295|C>>>26),C=V+(I^(N|~A))+R[11]+3174756917&4294967295,V=N+(C<<10&4294967295|C>>>22),C=A+(N^(V|~I))+R[2]+718787259&4294967295,A=V+(C<<15&4294967295|C>>>17),C=I+(V^(A|~N))+R[9]+3951481745&4294967295,k.g[0]=k.g[0]+N&4294967295,k.g[1]=k.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+A&4294967295,k.g[3]=k.g[3]+V&4294967295}r.prototype.v=function(k,N){N===void 0&&(N=k.length);const I=N-this.blockSize,R=this.C;let A=this.h,V=0;for(;V<N;){if(A==0)for(;V<=I;)a(this,k,V),V+=this.blockSize;if(typeof k=="string"){for(;V<N;)if(R[A++]=k.charCodeAt(V++),A==this.blockSize){a(this,R),A=0;break}}else for(;V<N;)if(R[A++]=k[V++],A==this.blockSize){a(this,R),A=0;break}}this.h=A,this.o+=N},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var N=1;N<k.length-8;++N)k[N]=0;N=this.o*8;for(var I=k.length-8;I<k.length;++I)k[I]=N&255,N/=256;for(this.v(k),k=Array(16),N=0,I=0;I<4;++I)for(let R=0;R<32;R+=8)k[N++]=this.g[I]>>>R&255;return k};function l(k,N){var I=m;return Object.prototype.hasOwnProperty.call(I,k)?I[k]:I[k]=N(k)}function u(k,N){this.h=N;const I=[];let R=!0;for(let A=k.length-1;A>=0;A--){const V=k[A]|0;R&&V==N||(I[A]=V,R=!1)}this.g=I}var m={};function p(k){return-128<=k&&k<128?l(k,function(N){return new u([N|0],N<0?-1:0)}):new u([k|0],k<0?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return w;if(k<0)return Q(y(-k));const N=[];let I=1;for(let R=0;k>=I;R++)N[R]=k/I|0,I*=4294967296;return new u(N,0)}function b(k,N){if(k.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(k.charAt(0)=="-")return Q(b(k.substring(1),N));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=y(Math.pow(N,8));let R=w;for(let V=0;V<k.length;V+=8){var A=Math.min(8,k.length-V);const C=parseInt(k.substring(V,V+A),N);A<8?(A=y(Math.pow(N,A)),R=R.j(A).add(y(C))):(R=R.j(I),R=R.add(y(C)))}return R}var w=p(0),E=p(1),j=p(16777216);i=u.prototype,i.m=function(){if(F(this))return-Q(this).m();let k=0,N=1;for(let I=0;I<this.g.length;I++){const R=this.i(I);k+=(R>=0?R:4294967296+R)*N,N*=4294967296}return k},i.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(L(this))return"0";if(F(this))return"-"+Q(this).toString(k);const N=y(Math.pow(k,6));var I=this;let R="";for(;;){const A=xe(I,N).g;I=ie(I,A.j(N));let V=((I.g.length>0?I.g[0]:I.h)>>>0).toString(k);if(I=A,L(I))return V+R;for(;V.length<6;)V="0"+V;R=V+R}},i.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function L(k){if(k.h!=0)return!1;for(let N=0;N<k.g.length;N++)if(k.g[N]!=0)return!1;return!0}function F(k){return k.h==-1}i.l=function(k){return k=ie(this,k),F(k)?-1:L(k)?0:1};function Q(k){const N=k.g.length,I=[];for(let R=0;R<N;R++)I[R]=~k.g[R];return new u(I,~k.h).add(E)}i.abs=function(){return F(this)?Q(this):this},i.add=function(k){const N=Math.max(this.g.length,k.g.length),I=[];let R=0;for(let A=0;A<=N;A++){let V=R+(this.i(A)&65535)+(k.i(A)&65535),C=(V>>>16)+(this.i(A)>>>16)+(k.i(A)>>>16);R=C>>>16,V&=65535,C&=65535,I[A]=C<<16|V}return new u(I,I[I.length-1]&-2147483648?-1:0)};function ie(k,N){return k.add(Q(N))}i.j=function(k){if(L(this)||L(k))return w;if(F(this))return F(k)?Q(this).j(Q(k)):Q(Q(this).j(k));if(F(k))return Q(this.j(Q(k)));if(this.l(j)<0&&k.l(j)<0)return y(this.m()*k.m());const N=this.g.length+k.g.length,I=[];for(var R=0;R<2*N;R++)I[R]=0;for(R=0;R<this.g.length;R++)for(let A=0;A<k.g.length;A++){const V=this.i(R)>>>16,C=this.i(R)&65535,Ce=k.i(A)>>>16,yt=k.i(A)&65535;I[2*R+2*A]+=C*yt,ne(I,2*R+2*A),I[2*R+2*A+1]+=V*yt,ne(I,2*R+2*A+1),I[2*R+2*A+1]+=C*Ce,ne(I,2*R+2*A+1),I[2*R+2*A+2]+=V*Ce,ne(I,2*R+2*A+2)}for(k=0;k<N;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=N;k<2*N;k++)I[k]=0;return new u(I,0)};function ne(k,N){for(;(k[N]&65535)!=k[N];)k[N+1]+=k[N]>>>16,k[N]&=65535,N++}function re(k,N){this.g=k,this.h=N}function xe(k,N){if(L(N))throw Error("division by zero");if(L(k))return new re(w,w);if(F(k))return N=xe(Q(k),N),new re(Q(N.g),Q(N.h));if(F(N))return N=xe(k,Q(N)),new re(Q(N.g),N.h);if(k.g.length>30){if(F(k)||F(N))throw Error("slowDivide_ only works with positive integers.");for(var I=E,R=N;R.l(k)<=0;)I=be(I),R=be(R);var A=ye(I,1),V=ye(R,1);for(R=ye(R,2),I=ye(I,2);!L(R);){var C=V.add(R);C.l(k)<=0&&(A=A.add(I),V=C),R=ye(R,1),I=ye(I,1)}return N=ie(k,A.j(N)),new re(A,N)}for(A=w;k.l(N)>=0;){for(I=Math.max(1,Math.floor(k.m()/N.m())),R=Math.ceil(Math.log(I)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),V=y(I),C=V.j(N);F(C)||C.l(k)>0;)I-=R,V=y(I),C=V.j(N);L(V)&&(V=E),A=A.add(V),k=ie(k,C)}return new re(A,k)}i.B=function(k){return xe(this,k).h},i.and=function(k){const N=Math.max(this.g.length,k.g.length),I=[];for(let R=0;R<N;R++)I[R]=this.i(R)&k.i(R);return new u(I,this.h&k.h)},i.or=function(k){const N=Math.max(this.g.length,k.g.length),I=[];for(let R=0;R<N;R++)I[R]=this.i(R)|k.i(R);return new u(I,this.h|k.h)},i.xor=function(k){const N=Math.max(this.g.length,k.g.length),I=[];for(let R=0;R<N;R++)I[R]=this.i(R)^k.i(R);return new u(I,this.h^k.h)};function be(k){const N=k.g.length+1,I=[];for(let R=0;R<N;R++)I[R]=k.i(R)<<1|k.i(R-1)>>>31;return new u(I,k.h)}function ye(k,N){const I=N>>5;N%=32;const R=k.g.length-I,A=[];for(let V=0;V<R;V++)A[V]=N>0?k.i(V+I)>>>N|k.i(V+I+1)<<32-N:k.i(V+I);return new u(A,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ww=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=b,wi=u}).apply(typeof kb<"u"?kb:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jw,Oc,Zw,mh,ap,e1,t1,n1;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var x=0;x<h.length;++x){var _=h[x];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function a(h,x){if(x)e:{var _=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var z=h[S];if(!(z in _))break e;_=_[z]}h=h[h.length-1],S=_[h],x=x(S),x!=S&&x!=null&&e(_,h,{configurable:!0,writable:!0,value:x})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(x){var _=[],S;for(S in x)Object.prototype.hasOwnProperty.call(x,S)&&_.push([S,x[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function m(h){var x=typeof h;return x=="object"&&h!=null||x=="function"}function p(h,x,_){return h.call.apply(h.bind,arguments)}function y(h,x,_){return y=p,y.apply(null,arguments)}function b(h,x){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function w(h,x){function _(){}_.prototype=x.prototype,h.Z=x.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(S,z,H){for(var ae=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)ae[ke-2]=arguments[ke];return x.prototype[z].apply(S,ae)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function j(h){const x=h.length;if(x>0){const _=Array(x);for(let S=0;S<x;S++)_[S]=h[S];return _}return[]}function L(h,x){for(let S=1;S<arguments.length;S++){const z=arguments[S];var _=typeof z;if(_=_!="object"?_:z?Array.isArray(z)?"array":_:"null",_=="array"||_=="object"&&typeof z.length=="number"){_=h.length||0;const H=z.length||0;h.length=_+H;for(let ae=0;ae<H;ae++)h[_+ae]=z[ae]}else h.push(z)}}class F{constructor(x,_){this.i=x,this.j=_,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function Q(h){u.setTimeout(()=>{throw h},0)}function ie(){var h=k;let x=null;return h.g&&(x=h.g,h.g=h.g.next,h.g||(h.h=null),x.next=null),x}class ne{constructor(){this.h=this.g=null}add(x,_){const S=re.get();S.set(x,_),this.h?this.h.next=S:this.g=S,this.h=S}}var re=new F(()=>new xe,h=>h.reset());class xe{constructor(){this.next=this.g=this.h=null}set(x,_){this.h=x,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let be,ye=!1,k=new ne,N=()=>{const h=Promise.resolve(void 0);be=()=>{h.then(I)}};function I(){for(var h;h=ie();){try{h.h.call(h.g)}catch(_){Q(_)}var x=re;x.j(h),x.h<100&&(x.h++,h.next=x.g,x.g=h)}ye=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(h,x){this.type=h,this.g=this.target=x,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,x=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};u.addEventListener("test",_,x),u.removeEventListener("test",_,x)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function Ce(h,x){A.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,x)}w(Ce,A),Ce.prototype.init=function(h,x){const _=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=x,x=h.relatedTarget,x||(_=="mouseover"?x=h.fromElement:_=="mouseout"&&(x=h.toElement)),this.relatedTarget=x,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var yt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function le(h,x,_,S,z){this.listener=h,this.proxy=null,this.src=x,this.type=_,this.capture=!!S,this.ha=z,this.key=++Y,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Fe(h,x,_){for(const S in h)x.call(_,h[S],S,h)}function $e(h,x){for(const _ in h)x.call(void 0,h[_],_,h)}function M(h){const x={};for(const _ in h)x[_]=h[_];return x}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(h,x){let _,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(_ in S)h[_]=S[_];for(let H=0;H<Z.length;H++)_=Z[H],Object.prototype.hasOwnProperty.call(S,_)&&(h[_]=S[_])}}function de(h){this.src=h,this.g={},this.h=0}de.prototype.add=function(h,x,_,S,z){const H=h.toString();h=this.g[H],h||(h=this.g[H]=[],this.h++);const ae=De(h,x,S,z);return ae>-1?(x=h[ae],_||(x.fa=!1)):(x=new le(x,this.src,H,!!S,z),x.fa=_,h.push(x)),x};function Ne(h,x){const _=x.type;if(_ in h.g){var S=h.g[_],z=Array.prototype.indexOf.call(S,x,void 0),H;(H=z>=0)&&Array.prototype.splice.call(S,z,1),H&&(_e(x),h.g[_].length==0&&(delete h.g[_],h.h--))}}function De(h,x,_,S){for(let z=0;z<h.length;++z){const H=h[z];if(!H.da&&H.listener==x&&H.capture==!!_&&H.ha==S)return z}return-1}var He="closure_lm_"+(Math.random()*1e6|0),zt={};function ft(h,x,_,S,z){if(Array.isArray(x)){for(let H=0;H<x.length;H++)ft(h,x[H],_,S,z);return null}return _=El(_),h&&h[yt]?h.J(x,_,m(S)?!!S.capture:!1,z):Vi(h,x,_,!1,S,z)}function Vi(h,x,_,S,z,H){if(!x)throw Error("Invalid event type");const ae=m(z)?!!z.capture:!!z;let ke=Oi(h);if(ke||(h[He]=ke=new de(h)),_=ke.add(x,_,S,ae,H),_.proxy)return _;if(S=La(),_.proxy=S,S.src=h,S.listener=_,h.addEventListener)V||(z=ae),z===void 0&&(z=!1),h.addEventListener(x.toString(),S,z);else if(h.attachEvent)h.attachEvent(xr(x.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function La(){function h(_){return x.call(h.src,h.listener,_)}const x=_l;return h}function Ua(h,x,_,S,z){if(Array.isArray(x))for(var H=0;H<x.length;H++)Ua(h,x[H],_,S,z);else S=m(S)?!!S.capture:!!S,_=El(_),h&&h[yt]?(h=h.i,H=String(x).toString(),H in h.g&&(x=h.g[H],_=De(x,_,S,z),_>-1&&(_e(x[_]),Array.prototype.splice.call(x,_,1),x.length==0&&(delete h.g[H],h.h--)))):h&&(h=Oi(h))&&(x=h.g[x.toString()],h=-1,x&&(h=De(x,_,S,z)),(_=h>-1?x[h]:null)&&za(_))}function za(h){if(typeof h!="number"&&h&&!h.da){var x=h.src;if(x&&x[yt])Ne(x.i,h);else{var _=h.type,S=h.proxy;x.removeEventListener?x.removeEventListener(_,S,h.capture):x.detachEvent?x.detachEvent(xr(_),S):x.addListener&&x.removeListener&&x.removeListener(S),(_=Oi(x))?(Ne(_,h),_.h==0&&(_.src=null,x[He]=null)):_e(h)}}}function xr(h){return h in zt?zt[h]:zt[h]="on"+h}function _l(h,x){if(h.da)h=!0;else{x=new Ce(x,this);const _=h.listener,S=h.ha||h.src;h.fa&&za(h),h=_.call(S,x)}return h}function Oi(h){return h=h[He],h instanceof de?h:null}var wl="__closure_events_fn_"+(Math.random()*1e9>>>0);function El(h){return typeof h=="function"?h:(h[wl]||(h[wl]=function(x){return h.handleEvent(x)}),h[wl])}function Ct(){R.call(this),this.i=new de(this),this.M=this,this.G=null}w(Ct,R),Ct.prototype[yt]=!0,Ct.prototype.removeEventListener=function(h,x,_,S){Ua(this,h,x,_,S)};function Bt(h,x){var _,S=h.G;if(S)for(_=[];S;S=S.G)_.push(S);if(h=h.M,S=x.type||x,typeof x=="string")x=new A(x,h);else if(x instanceof A)x.target=x.target||h;else{var z=x;x=new A(S,h),ce(x,z)}z=!0;let H,ae;if(_)for(ae=_.length-1;ae>=0;ae--)H=x.g=_[ae],z=Is(H,S,!0,x)&&z;if(H=x.g=h,z=Is(H,S,!0,x)&&z,z=Is(H,S,!1,x)&&z,_)for(ae=0;ae<_.length;ae++)H=x.g=_[ae],z=Is(H,S,!1,x)&&z}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var h=this.i;for(const x in h.g){const _=h.g[x];for(let S=0;S<_.length;S++)_e(_[S]);delete h.g[x],h.h--}}this.G=null},Ct.prototype.J=function(h,x,_,S){return this.i.add(String(h),x,!1,_,S)},Ct.prototype.K=function(h,x,_,S){return this.i.add(String(h),x,!0,_,S)};function Is(h,x,_,S){if(x=h.i.g[String(x)],!x)return!0;x=x.concat();let z=!0;for(let H=0;H<x.length;++H){const ae=x[H];if(ae&&!ae.da&&ae.capture==_){const ke=ae.listener,Tt=ae.ha||ae.src;ae.fa&&Ne(h.i,ae),z=ke.call(Tt,S)!==!1&&z}}return z&&!S.defaultPrevented}function Df(h,x){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:u.setTimeout(h,x||0)}function Ru(h){h.g=Df(()=>{h.g=null,h.i&&(h.i=!1,Ru(h))},h.l);const x=h.h;h.h=null,h.m.apply(null,x)}class hn extends R{constructor(x,_){super(),this.m=x,this.l=_,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Ru(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mi(h){R.call(this),this.h=h,this.g={}}w(Mi,R);var Tl=[];function Sl(h){Fe(h.g,function(x,_){this.g.hasOwnProperty(_)&&za(x)},h),h.g={}}Mi.prototype.N=function(){Mi.Z.N.call(this),Sl(this)},Mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cs=u.JSON.stringify,Vf=u.JSON.parse,ku=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function ju(){}function Du(){}var nr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){A.call(this,"d")}w(Wt,A);function Bn(){A.call(this,"c")}w(Bn,A);var Et={},Vu=null;function Ba(){return Vu=Vu||new Ct}Et.Ia="serverreachability";function Ou(h){A.call(this,Et.Ia,h)}w(Ou,A);function vr(h){const x=Ba();Bt(x,new Ou(x))}Et.STAT_EVENT="statevent";function Pi(h,x){A.call(this,Et.STAT_EVENT,h),this.stat=x}w(Pi,A);function Rt(h){const x=Ba();Bt(x,new Pi(x,h))}Et.Ja="timingevent";function br(h,x){A.call(this,Et.Ja,h),this.size=x}w(br,A);function _r(h,x){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},x)}function rr(){this.g=!0}rr.prototype.ua=function(){this.g=!1};function Of(h,x,_,S,z,H){h.info(function(){if(h.g)if(H){var ae="",ke=H.split("&");for(let Xe=0;Xe<ke.length;Xe++){var Tt=ke[Xe].split("=");if(Tt.length>1){const mt=Tt[0];Tt=Tt[1];const Hn=mt.split("_");ae=Hn.length>=2&&Hn[1]=="type"?ae+(mt+"="+Tt+"&"):ae+(mt+"=redacted&")}}}else ae=null;else ae=H;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+x+`
`+_+`
`+ae})}function Mu(h,x,_,S,z,H,ae){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+x+`
`+_+`
`+H+" "+ae})}function wr(h,x,_,S){h.info(function(){return"XMLHTTP TEXT ("+x+"): "+Mf(h,_)+(S?" "+S:"")})}function Li(h,x){h.info(function(){return"TIMEOUT: "+x})}rr.prototype.info=function(){};function Mf(h,x){if(!h.g)return x;if(!x)return null;try{const H=JSON.parse(x);if(H){for(h=0;h<H.length;h++)if(Array.isArray(H[h])){var _=H[h];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ae=1;ae<S.length;ae++)S[ae]=""}}}}return Cs(H)}catch{return x}}var Ui={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Al={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nl;function zi(){}w(zi,ju),zi.prototype.g=function(){return new XMLHttpRequest},Nl=new zi;function $r(h){return encodeURIComponent(String(h))}function Pu(h){var x=1;h=h.split(":");const _=[];for(;x>0&&h.length;)_.push(h.shift()),x--;return h.length&&_.push(h.join(":")),_}function sr(h,x,_,S){this.j=h,this.i=x,this.l=_,this.S=S||1,this.V=new Mi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ir}function ir(){this.i=null,this.g="",this.h=!1}var kt={},Kt={};function Er(h,x,_){h.M=1,h.A=Bi(Dt(x)),h.u=_,h.R=!0,qa(h,null)}function qa(h,x){h.F=Date.now(),Tr(h),h.B=Dt(h.A);var _=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),Ka(_.i,"t",S),h.C=0,_=h.j.L,h.h=new ir,h.g=Ju(h.j,_?x:null,!h.u),h.P>0&&(h.O=new hn(y(h.Y,h,h.g),h.P)),x=h.V,_=h.g,S=h.ba;var z="readystatechange";Array.isArray(z)||(z&&(Tl[0]=z.toString()),z=Tl);for(let H=0;H<z.length;H++){const ae=ft(_,z[H],S||x.handleEvent,!1,x.h||x);if(!ae)break;x.g[ae.key]=ae}x=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,x)):(h.v="GET",h.g.ea(h.B,h.v,null,x)),vr(),Of(h.i,h.v,h.B,h.l,h.S,h.u)}sr.prototype.ba=function(h){h=h.target;const x=this.O;x&&lr(h)==3?x.j():this.Y(h)},sr.prototype.Y=function(h){try{if(h==this.g)e:{const ke=lr(this.g),Tt=this.g.ya(),Xe=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||ke!=4||Tt==7||(Tt==8||Xe<=0?vr(3):vr(2)),Sr(this);var x=this.g.ca();this.X=x;var _=Pf(this);if(this.o=x==200,Mu(this.i,this.v,this.B,this.l,this.S,ke,x),this.o){if(this.U&&!this.L){t:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var H=S;break t}}H=null}if(h=H)wr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ar(this,h);else{this.o=!1,this.m=3,Rt(12),An(this),qn(this);break e}}if(this.R){h=!0;let mt;for(;!this.K&&this.C<_.length;)if(mt=Uu(this,_),mt==Kt){ke==4&&(this.m=4,Rt(14),h=!1),wr(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==kt){this.m=4,Rt(15),wr(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else wr(this.i,this.l,mt,null),Ar(this,mt);if(Lu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||_.length!=0||this.h.h||(this.m=1,Rt(16),h=!1),this.o=this.o&&h,!h)wr(this.i,this.l,_,"[Invalid Chunked Response]"),An(this),qn(this);else if(_.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ql(ae),ae.P=!0,Rt(11))}}else wr(this.i,this.l,_,null),Ar(this,_);ke==4&&An(this),this.o&&!this.K&&(ke==4?Yu(this.j,this):(this.o=!1,Tr(this)))}else Wr(this.g),x==400&&_.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),An(this),qn(this)}}}catch{}finally{}};function Pf(h){if(!Lu(h))return h.g.la();const x=Jt(h.g);if(x==="")return"";let _="";const S=x.length,z=lr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return An(h),qn(h),"";h.h.i=new u.TextDecoder}for(let H=0;H<S;H++)h.h.h=!0,_+=h.h.i.decode(x[H],{stream:!(z&&H==S-1)});return x.length=0,h.h.g+=_,h.C=0,h.h.g}function Lu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Uu(h,x){var _=h.C,S=x.indexOf(`
`,_);return S==-1?Kt:(_=Number(x.substring(_,S)),isNaN(_)?kt:(S+=1,S+_>x.length?Kt:(x=x.slice(S,S+_),h.C=S+_,x)))}sr.prototype.cancel=function(){this.K=!0,An(this)};function Tr(h){h.T=Date.now()+h.H,Fa(h,h.H)}function Fa(h,x){if(h.D!=null)throw Error("WatchDog timer not null");h.D=_r(y(h.aa,h),x)}function Sr(h){h.D&&(u.clearTimeout(h.D),h.D=null)}sr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Li(this.i,this.B),this.M!=2&&(vr(),Rt(17)),An(this),this.m=2,qn(this)):Fa(this,this.T-h)};function qn(h){h.j.I==0||h.K||Yu(h.j,h)}function An(h){Sr(h);var x=h.O;x&&typeof x.dispose=="function"&&x.dispose(),h.O=null,Sl(h.V),h.g&&(x=h.g,h.g=null,x.abort(),x.dispose())}function Ar(h,x){try{var _=h.j;if(_.I!=0&&(_.g==h||Ir(_.h,h))){if(!h.L&&Ir(_.h,h)&&_.I==3){try{var S=_.Ba.g.parse(x)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Wa(_),Ps(_);else break e;Yi(_),Rt(18)}}else _.xa=z[1],0<_.xa-_.K&&z[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=_r(y(_.Va,_),6e3));Nr(_.h)<=1&&_.ta&&(_.ta=void 0)}else Vr(_,11)}else if((h.L||_.g==h)&&Wa(_),!C(x))for(z=_.Ba.g.parse(x),x=0;x<z.length;x++){let Xe=z[x];const mt=Xe[0];if(!(mt<=_.K))if(_.K=mt,Xe=Xe[1],_.I==2)if(Xe[0]=="c"){_.M=Xe[1],_.ba=Xe[2];const Hn=Xe[3];Hn!=null&&(_.ka=Hn,_.j.info("VER="+_.ka));const Or=Xe[4];Or!=null&&(_.za=Or,_.j.info("SVER="+_.za));const cr=Xe[5];cr!=null&&typeof cr=="number"&&cr>0&&(S=1.5*cr,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const ur=h.g;if(ur){const $i=ur.g?ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($i){var H=S.h;H.g||$i.indexOf("spdy")==-1&&$i.indexOf("quic")==-1&&$i.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Rl(H,H.h),H.h=null))}if(S.G){const Ja=ur.g?ur.g.getResponseHeader("X-HTTP-Session-Id"):null;Ja&&(S.wa=Ja,Ze(S.J,S.G,Ja))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var ae=h;if(S.na=Wu(S,S.L?S.ba:null,S.W),ae.L){kl(S.h,ae);var ke=ae,Tt=S.O;Tt&&(ke.H=Tt),ke.D&&(Sr(ke),Tr(ke)),S.g=ae}else Ku(S);_.i.length>0&&Dr(_)}else Xe[0]!="stop"&&Xe[0]!="close"||Vr(_,7);else _.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Vr(_,7):zl(_):Xe[0]!="noop"&&_.l&&_.l.qa(Xe),_.A=0)}}vr(4)}catch{}}var jt=class{constructor(h,x){this.g=h,this.map=x}};function Il(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Nr(h){return h.h?1:h.g?h.g.size:0}function Ir(h,x){return h.h?h.h==x:h.g?h.g.has(x):!1}function Rl(h,x){h.g?h.g.add(x):h.h=x}function kl(h,x){h.h&&h.h==x?h.h=null:h.g&&h.g.has(x)&&h.g.delete(x)}Il.prototype.cancel=function(){if(this.i=jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function jl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let x=h.i;for(const _ of h.g.values())x=x.concat(_.G);return x}return j(h.i)}var zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ga(h,x){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const S=h[_].indexOf("=");let z,H=null;S>=0?(z=h[_].substring(0,S),H=h[_].substring(S+1)):z=h[_],x(z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Nn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;h instanceof Nn?(this.l=h.l,Qt(this,h.j),this.o=h.o,this.g=h.g,Rs(this,h.u),this.h=h.h,Dl(this,Gu(h.i)),this.m=h.m):h&&(x=String(h).match(zu))?(this.l=!1,Qt(this,x[1]||"",!0),this.o=Cr(x[2]||""),this.g=Cr(x[3]||"",!0),Rs(this,x[4]),this.h=Cr(x[5]||"",!0),Dl(this,x[6]||"",!0),this.m=Cr(x[7]||"")):(this.l=!1,this.i=new js(null,this.l))}Nn.prototype.toString=function(){const h=[];var x=this.j;x&&h.push(qi(x,Ha,!0),":");var _=this.g;return(_||x=="file")&&(h.push("//"),(x=this.o)&&h.push(qi(x,Ha,!0),"@"),h.push($r(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(qi(_,_.charAt(0)=="/"?Vl:Bu,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",qi(_,qu)),h.join("")},Nn.prototype.resolve=function(h){const x=Dt(this);let _=!!h.j;_?Qt(x,h.j):_=!!h.o,_?x.o=h.o:_=!!h.g,_?x.g=h.g:_=h.u!=null;var S=h.h;if(_)Rs(x,h.u);else if(_=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=x.h.lastIndexOf("/");z!=-1&&(S=x.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const H=[];for(let ae=0;ae<z.length;){const ke=z[ae++];ke=="."?S&&ae==z.length&&H.push(""):ke==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&ae==z.length&&H.push("")):(H.push(ke),S=!0)}S=H.join("/")}else S=z}return _?x.h=S:_=h.i.toString()!=="",_?Dl(x,Gu(h.i)):_=!!h.m,_&&(x.m=h.m),x};function Dt(h){return new Nn(h)}function Qt(h,x,_){h.j=_?Cr(x,!0):x,h.j&&(h.j=h.j.replace(/:$/,""))}function Rs(h,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);h.u=x}else h.u=null}function Dl(h,x,_){x instanceof js?(h.i=x,Qa(h.i,h.l)):(_||(x=qi(x,ks)),h.i=new js(x,h.l))}function Ze(h,x,_){h.i.set(x,_)}function Bi(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Cr(h,x){return h?x?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function qi(h,x,_){return typeof h=="string"?(h=encodeURI(h).replace(x,yn),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function yn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ha=/[#\/\?@]/g,Bu=/[#\?:]/g,Vl=/[#\?]/g,ks=/[#\?@]/g,qu=/#/g;function js(h,x){this.h=this.g=null,this.i=h||null,this.j=!!x}function xn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ga(h.i,function(x,_){h.add(decodeURIComponent(x.replace(/\+/g," ")),_)}))}i=js.prototype,i.add=function(h,x){xn(this),this.i=null,h=Ds(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(x),this.h+=1,this};function Fu(h,x){xn(h),x=Ds(h,x),h.g.has(x)&&(h.i=null,h.h-=h.g.get(x).length,h.g.delete(x))}function Ol(h,x){return xn(h),x=Ds(h,x),h.g.has(x)}i.forEach=function(h,x){xn(this),this.g.forEach(function(_,S){_.forEach(function(z){h.call(x,z,S,this)},this)},this)};function Ml(h,x){xn(h);let _=[];if(typeof x=="string")Ol(h,x)&&(_=_.concat(h.g.get(Ds(h,x))));else for(h=Array.from(h.g.values()),x=0;x<h.length;x++)_=_.concat(h[x]);return _}i.set=function(h,x){return xn(this),this.i=null,h=Ds(this,h),Ol(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[x]),this.h+=1,this},i.get=function(h,x){return h?(h=Ml(this,h),h.length>0?String(h[0]):x):x};function Ka(h,x,_){Fu(h,x),_.length>0&&(h.i=null,h.g.set(Ds(h,x),j(_)),h.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],x=Array.from(this.g.keys());for(let S=0;S<x.length;S++){var _=x[S];const z=$r(_);_=Ml(this,_);for(let H=0;H<_.length;H++){let ae=z;_[H]!==""&&(ae+="="+$r(_[H])),h.push(ae)}}return this.i=h.join("&")};function Gu(h){const x=new js;return x.i=h.i,h.g&&(x.g=new Map(h.g),x.h=h.h),x}function Ds(h,x){return x=String(x),h.j&&(x=x.toLowerCase()),x}function Qa(h,x){x&&!h.j&&(xn(h),h.i=null,h.g.forEach(function(_,S){const z=S.toLowerCase();S!=z&&(Fu(this,S),Ka(this,z,_))},h)),h.j=x}function ar(h,x){const _=new rr;if(u.Image){const S=new Image;S.onload=b(Fn,_,"TestLoadImage: loaded",!0,x,S),S.onerror=b(Fn,_,"TestLoadImage: error",!1,x,S),S.onabort=b(Fn,_,"TestLoadImage: abort",!1,x,S),S.ontimeout=b(Fn,_,"TestLoadImage: timeout",!1,x,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else x(!1)}function Pl(h,x){const _=new rr,S=new AbortController,z=setTimeout(()=>{S.abort(),Fn(_,"TestPingServer: timeout",!1,x)},1e4);fetch(h,{signal:S.signal}).then(H=>{clearTimeout(z),H.ok?Fn(_,"TestPingServer: ok",!0,x):Fn(_,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(z),Fn(_,"TestPingServer: error",!1,x)})}function Fn(h,x,_,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(_)}catch{}}function Vs(){this.g=new ku}function Rr(h){this.i=h.Sb||null,this.h=h.ab||!1}w(Rr,ju),Rr.prototype.g=function(){return new Fi(this.i,this.h)};function Fi(h,x){Ct.call(this),this.H=h,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Fi,Ct),i=Fi.prototype,i.open=function(h,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=x,this.readyState=1,or(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(x.body=h),(this.H||u).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ya(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ya(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var x=h.value?h.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!h.done}))&&(this.response=this.responseText+=x)}h.done?Os(this):or(this),this.readyState==3&&Ya(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,Os(this))},i.Na=function(h){this.g&&(this.response=h,Os(this))},i.ga=function(){this.g&&Os(this)};function Os(h){h.readyState=4,h.l=null,h.j=null,h.B=null,or(h)}i.setRequestHeader=function(h,x){this.A.append(h,x)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],x=this.h.entries();for(var _=x.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=x.next();return h.join(`\r
`)};function or(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Gn(h){let x="";return Fe(h,function(_,S){x+=S,x+=":",x+=_,x+=`\r
`}),x}function Gi(h,x,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Gn(_),typeof h=="string"?_!=null&&$r(_):Ze(h,x,_))}function it(h){Ct.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(it,Ct);var kr=/^https?$/i,Ll=["POST","PUT"];i=it.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,x,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);x=x?x.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nl.g(),this.g.onreadystatechange=E(y(this.Ca,this));try{this.B=!0,this.g.open(x,String(h),!0),this.B=!1}catch(H){Hi(this,H);return}if(h=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)_.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())_.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),z=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(Ll,x,void 0)>=0)||S||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ae]of _)this.g.setRequestHeader(H,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(H){Hi(this,H)}};function Hi(h,x){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=x,h.o=5,Ul(h),Xr(h)}function Ul(h){h.A||(h.A=!0,Bt(h,"complete"),Bt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Bt(this,"complete"),Bt(this,"abort"),Xr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xr(this,!0)),it.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Ki(this):this.Xa())},i.Xa=function(){Ki(this)};function Ki(h){if(h.h&&typeof l<"u"){if(h.v&&lr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Bt(h,"readystatechange"),lr(h)==4){h.h=!1;try{const H=h.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var _;if(!(_=x)){var S;if(S=H===0){let ae=String(h.D).match(zu)[1]||null;!ae&&u.self&&u.self.location&&(ae=u.self.location.protocol.slice(0,-1)),S=!kr.test(ae?ae.toLowerCase():"")}_=S}if(_)Bt(h,"complete"),Bt(h,"success");else{h.o=6;try{var z=lr(h)>2?h.g.statusText:""}catch{z=""}h.l=z+" ["+h.ca()+"]",Ul(h)}}finally{Xr(h)}}}}function Xr(h,x){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,x||Bt(h,"ready");try{_.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function lr(h){return h.g?h.g.readyState:0}i.ca=function(){try{return lr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var x=this.g.responseText;return h&&x.indexOf(h)==0&&(x=x.substring(h.length)),Vf(x)}};function Jt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Wr(h){const x={};h=(h.g&&lr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(C(h[S]))continue;var _=Pu(h[S]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=x[z]||[];x[z]=H,H.push(_)}$e(x,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function jr(h,x,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||x}function Ms(h){this.za=0,this.i=[],this.j=new rr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=jr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=jr("baseRetryDelayMs",5e3,h),this.Za=jr("retryDelaySeedMs",1e4,h),this.Ta=jr("forwardChannelMaxRetries",2,h),this.va=jr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Il(h&&h.concurrentRequestLimit),this.Ba=new Vs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Ms.prototype,i.ka=8,i.I=1,i.connect=function(h,x,_,S){Rt(0),this.W=h,this.H=x||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=Wu(this,null,this.W),Dr(this)};function zl(h){if($a(h),h.I==3){var x=h.V++,_=Dt(h.J);if(Ze(_,"SID",h.M),Ze(_,"RID",x),Ze(_,"TYPE","terminate"),Qi(h,_),x=new sr(h,h.j,x),x.M=2,x.A=Bi(Dt(_)),_=!1,u.navigator&&u.navigator.sendBeacon)try{_=u.navigator.sendBeacon(x.A.toString(),"")}catch{}!_&&u.Image&&(new Image().src=x.A,_=!0),_||(x.g=Ju(x.j,null),x.g.ea(x.A)),x.F=Date.now(),Tr(x)}Xu(h)}function Ps(h){h.g&&(ql(h),h.g.cancel(),h.g=null)}function $a(h){Ps(h),h.v&&(u.clearTimeout(h.v),h.v=null),Wa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function Dr(h){if(!Cl(h.h)&&!h.m){h.m=!0;var x=h.Ea;be||N(),ye||(be(),ye=!0),k.add(x,h),h.D=0}}function Xa(h,x){return Nr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=x.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=_r(y(h.Ea,h,x),$u(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const z=new sr(this,this.j,h);let H=this.o;if(this.U&&(H?(H=M(H),ce(H,this.U)):H=this.U),this.u!==null||this.R||(z.J=H,H=null),this.S)e:{for(var x=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(x+=S,x>4096){x=_;break e}if(x===4096||_===this.i.length-1){x=_+1;break e}}x=1e3}else x=1e3;x=Hu(this,z,x),_=Dt(this.J),Ze(_,"RID",h),Ze(_,"CVER",22),this.G&&Ze(_,"X-HTTP-Session-Id",this.G),Qi(this,_),H&&(this.R?x="headers="+$r(Gn(H))+"&"+x:this.u&&Gi(_,this.u,H)),Rl(this.h,z),this.Ra&&Ze(_,"TYPE","init"),this.S?(Ze(_,"$req",x),Ze(_,"SID","null"),z.U=!0,Er(z,_,null)):Er(z,_,x),this.I=2}}else this.I==3&&(h?Bl(this,h):this.i.length==0||Cl(this.h)||Bl(this))};function Bl(h,x){var _;x?_=x.l:_=h.V++;const S=Dt(h.J);Ze(S,"SID",h.M),Ze(S,"RID",_),Ze(S,"AID",h.K),Qi(h,S),h.u&&h.o&&Gi(S,h.u,h.o),_=new sr(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),x&&(h.i=x.G.concat(h.i)),x=Hu(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Rl(h.h,_),Er(_,S,x)}function Qi(h,x){h.H&&Fe(h.H,function(_,S){Ze(x,S,_)}),h.l&&Fe({},function(_,S){Ze(x,S,_)})}function Hu(h,x,_){_=Math.min(h.i.length,_);const S=h.l?y(h.l.Ka,h.l,h):null;e:{var z=h.i;let ke=-1;for(;;){const Tt=["count="+_];ke==-1?_>0?(ke=z[0].g,Tt.push("ofs="+ke)):ke=0:Tt.push("ofs="+ke);let Xe=!0;for(let mt=0;mt<_;mt++){var H=z[mt].g;const Hn=z[mt].map;if(H-=ke,H<0)ke=Math.max(0,z[mt].g-100),Xe=!1;else try{H="req"+H+"_"||"";try{var ae=Hn instanceof Map?Hn:Object.entries(Hn);for(const[Or,cr]of ae){let ur=cr;m(cr)&&(ur=Cs(cr)),Tt.push(H+Or+"="+encodeURIComponent(ur))}}catch(Or){throw Tt.push(H+"type="+encodeURIComponent("_badmap")),Or}}catch{S&&S(Hn)}}if(Xe){ae=Tt.join("&");break e}}ae=void 0}return h=h.i.splice(0,_),x.G=h,ae}function Ku(h){if(!h.g&&!h.v){h.Y=1;var x=h.Da;be||N(),ye||(be(),ye=!0),k.add(x,h),h.A=0}}function Yi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=_r(y(h.Da,h),$u(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,Qu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=_r(y(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Ps(this),Qu(this))};function ql(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function Qu(h){h.g=new sr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var x=Dt(h.na);Ze(x,"RID","rpc"),Ze(x,"SID",h.M),Ze(x,"AID",h.K),Ze(x,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(x,"TO",h.ia),Ze(x,"TYPE","xmlhttp"),Qi(h,x),h.u&&h.o&&Gi(x,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Bi(Dt(x)),_.u=null,_.R=!0,qa(_,h)}i.Va=function(){this.C!=null&&(this.C=null,Ps(this),Yi(this),Rt(19))};function Wa(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Yu(h,x){var _=null;if(h.g==x){Wa(h),ql(h),h.g=null;var S=2}else if(Ir(h.h,x))_=x.G,kl(h.h,x),S=1;else return;if(h.I!=0){if(x.o)if(S==1){_=x.u?x.u.length:0,x=Date.now()-x.F;var z=h.D;S=Ba(),Bt(S,new br(S,_)),Dr(h)}else Ku(h);else if(z=x.m,z==3||z==0&&x.X>0||!(S==1&&Xa(h,x)||S==2&&Yi(h)))switch(_&&_.length>0&&(x=h.h,x.i=x.i.concat(_)),z){case 1:Vr(h,5);break;case 4:Vr(h,10);break;case 3:Vr(h,6);break;default:Vr(h,2)}}}function $u(h,x){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*x}function Vr(h,x){if(h.j.info("Error code "+x),x==2){var _=y(h.bb,h),S=h.Ua;const z=!S;S=new Nn(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Qt(S,"https"),Bi(S),z?ar(S.toString(),_):Pl(S.toString(),_)}else Rt(2);h.I=0,h.l&&h.l.pa(x),Xu(h),$a(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Xu(h){if(h.I=0,h.ja=[],h.l){const x=jl(h.h);(x.length!=0||h.i.length!=0)&&(L(h.ja,x),L(h.ja,h.i),h.h.i.length=0,j(h.i),h.i.length=0),h.l.oa()}}function Wu(h,x,_){var S=_ instanceof Nn?Dt(_):new Nn(_);if(S.g!="")x&&(S.g=x+"."+S.g),Rs(S,S.u);else{var z=u.location;S=z.protocol,x=x?x+"."+z.hostname:z.hostname,z=+z.port;const H=new Nn(null);S&&Qt(H,S),x&&(H.g=x),z&&Rs(H,z),_&&(H.h=_),S=H}return _=h.G,x=h.wa,_&&x&&Ze(S,_,x),Ze(S,"VER",h.ka),Qi(h,S),S}function Ju(h,x,_){if(x&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=h.Aa&&!h.ma?new it(new Rr({ab:_})):new it(h.ma),x.Fa(h.L),x}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zu(){}i=Zu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Ls(){}Ls.prototype.g=function(h,x){return new fn(h,x)};function fn(h,x){Ct.call(this),this.g=new Ms(x),this.l=h,this.h=x&&x.messageUrlParams||null,h=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(h?h["X-WebChannel-Content-Type"]=x.messageContentType:h={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(h?h["X-WebChannel-Client-Profile"]=x.sa:h={"X-WebChannel-Client-Profile":x.sa}),this.g.U=h,(h=x&&x.Qb)&&!C(h)&&(this.g.u=h),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!C(x)&&(this.g.G=x,h=this.h,h!==null&&x in h&&(h=this.h,x in h&&delete h[x])),this.j=new Jr(this)}w(fn,Ct),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){zl(this.g)},fn.prototype.o=function(h){var x=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=Cs(h),h=_);x.i.push(new jt(x.Ya++,h)),x.I==3&&Dr(x)},fn.prototype.N=function(){this.g.l=null,delete this.j,zl(this.g),delete this.g,fn.Z.N.call(this)};function ed(h){Wt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var x=h.__sm__;if(x){e:{for(const _ in x){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,x=x!==null&&h in x?x[h]:void 0),this.data=x}else this.data=h}w(ed,Wt);function td(){Bn.call(this),this.status=1}w(td,Bn);function Jr(h){this.g=h}w(Jr,Zu),Jr.prototype.ra=function(){Bt(this.g,"a")},Jr.prototype.qa=function(h){Bt(this.g,new ed(h))},Jr.prototype.pa=function(h){Bt(this.g,new td)},Jr.prototype.oa=function(){Bt(this.g,"b")},Ls.prototype.createWebChannel=Ls.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,n1=function(){return new Ls},t1=function(){return Ba()},e1=Et,ap={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,mh=Ui,Al.COMPLETE="complete",Zw=Al,Du.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Oc=Du,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,Jw=it}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl="12.8.0";function EN(i){gl=i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=new Pp("@firebase/firestore");function Mo(){return Na.logLevel}function te(i,...e){if(Na.logLevel<=Be.DEBUG){const t=e.map(zp);Na.debug(`Firestore (${gl}): ${i}`,...t)}}function Nt(i,...e){if(Na.logLevel<=Be.ERROR){const t=e.map(zp);Na.error(`Firestore (${gl}): ${i}`,...t)}}function Jc(i,...e){if(Na.logLevel<=Be.WARN){const t=e.map(zp);Na.warn(`Firestore (${gl}): ${i}`,...t)}}function zp(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,r1(i,r,t)}function r1(i,e,t){let r=`FIRESTORE (${gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Nt(r),new Error(r)}function ve(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||r1(e,a,r)}function ge(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Es{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class AN{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0,42304);let r=this.i;const a=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Gr,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},m=p=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Gr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new TN(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class NN{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class IN{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new NN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,er(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ve(this.o===void 0,3512);const r=l=>{l.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,te("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new jb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=RN(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Ie(i,e){return i<e?-1:i>e?1:0}function op(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const a=i.charAt(r),l=e.charAt(r);if(a!==l)return qg(a)===qg(l)?Ie(a,l):qg(a)?1:-1}return Ie(i.length,e.length)}const kN=55296,jN=57343;function qg(i){const e=i.charCodeAt(0);return e>=kN&&e<=jN}function $o(i,e,t){return i.length===e.length&&i.every(((r,a)=>t(r,e[a])))}function s1(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="__name__";class zr{constructor(e,t,r){t===void 0?t=0:t>e.length&&he(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&he(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=zr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ie(e.length,t.length)}static compareSegments(e,t){const r=zr.isNumericId(e),a=zr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?zr.extractNumericId(e).compare(zr.extractNumericId(t)):op(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wi.fromString(e.substring(4,e.length-2))}}class Je extends zr{construct(e,t,r){return new Je(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new Je(t)}static emptyPath(){return new Je([])}}const DN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends zr{construct(e,t,r){return new xt(e,t,r)}static isValidIdentifier(e){return DN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Db}static keyField(){return new xt([Db])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new se(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new se(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new se(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,a+=2}else m==="`"?(u=!u,a++):m!=="."||u?(r+=m,a++):(l(),a++)}if(l(),u)throw new se(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(t)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Je.fromString(e))}static fromName(e){return new oe(Je.fromString(e).popFirst(5))}static empty(){return new oe(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(i,e,t){if(!t)throw new se(X.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function VN(i,e,t,r){if(e===!0&&r===!0)throw new se(X.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Vb(i){if(!oe.isDocumentKey(i))throw new se(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ob(i){if(oe.isDocumentKey(i))throw new se(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function a1(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function af(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":he(12329,{type:typeof i})}function Ln(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new se(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=af(i);throw new se(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(i,e){const t={typeString:i};return e&&(t.value=e),t}function pu(i,e){if(!a1(i))throw new se(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const u=i[r];if(a&&typeof u!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new se(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=-62135596800,Pb=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Pb);return new nt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Mb)throw new se(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pb}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pu(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:Ut("string",nt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new nt(0,0))}static max(){return new Ee(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=-1;class kh{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function lp(i){return i.fields.find((e=>e.kind===2))}function fa(i){return i.fields.filter((e=>e.kind!==2))}kh.UNKNOWN_ID=-1;class gh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Zc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Zc(0,zn.min())}}function o1(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(r===1e9?new nt(t+1,0):new nt(t,r));return new zn(a,oe.empty(),e)}function l1(i){return new zn(i.readTime,i.key,Xo)}class zn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new zn(Ee.min(),oe.empty(),Xo)}static max(){return new zn(Ee.max(),oe.empty(),Xo)}}function qp(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=oe.comparator(i.documentKey,e.documentKey),t!==0?t:Ie(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class u1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ci(i){if(i.code!==X.FAILED_PRECONDITION||i.message!==c1)throw i;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):U.reject(t)}static resolve(e){return new U(((t,r)=>{t(e)}))}static reject(e){return new U(((t,r)=>{r(e)}))}static waitFor(e){return new U(((t,r)=>{let a=0,l=0,u=!1;e.forEach((m=>{++a,m.next((()=>{++l,u&&l===a&&t()}),(p=>r(p)))})),u=!0,l===a&&t()}))}static or(e){let t=U.resolve(!1);for(const r of e)t=t.next((a=>a?U.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new U(((r,a)=>{const l=e.length,u=new Array(l);let m=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((b=>{u[y]=b,++m,m===l&&r(u)}),(b=>a(b)))}}))}static doWhile(e,t){return new U(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="SimpleDb";class of{static open(e,t,r,a){try{return new of(t,e.transaction(a,r))}catch(l){throw new Bc(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Gr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Bc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=Fp(r.target.error);this.S.reject(new Bc(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(te(On,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new MN(t)}}class Ei{static delete(e){return te(On,"Removing database:",e),ga(Lw().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Hw())return!1;if(Ei.F())return!0;const e=Ft(),t=Ei.M(e),r=0<t&&t<10,a=d1(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Ei.M(Ft())===12.2&&Nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(te(On,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{r(new Bc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?r(new se(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new se(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new Bc(e,u))},a.onupgradeneeded=l=>{te(On,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.N.k(u,a.transaction,l.oldVersion,this.version).next((()=>{te(On,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const m=of.open(this.db,e,l?"readonly":"readwrite",r),p=a(m).next((y=>(m.C(),y))).catch((y=>(m.abort(y),U.reject(y)))).toPromise();return p.catch((()=>{})),await m.D,p}catch(m){const p=m,y=p.name!=="FirebaseError"&&u<3;if(te(On,"Transaction failed with error:",p.message,"Retrying:",y),this.close(),!y)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function d1(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class ON{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return ga(this.U.delete())}}class Bc extends se{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ri(i){return i.name==="IndexedDbTransactionError"}class MN{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(te(On,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(te(On,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ga(r)}add(e){return te(On,"ADD",this.store.name,e,e),ga(this.store.add(e))}get(e){return ga(this.store.get(e)).next((t=>(t===void 0&&(t=null),te(On,"GET",this.store.name,e,t),t)))}delete(e){return te(On,"DELETE",this.store.name,e),ga(this.store.delete(e))}count(){return te(On,"COUNT",this.store.name),ga(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new U(((u,m)=>{l.onerror=p=>{m(p.target.error)},l.onsuccess=p=>{u(p.target.result)}}))}{const l=this.cursor(r),u=[];return this.J(l,((m,p)=>{u.push(p)})).next((()=>u))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new U(((a,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{a(u.target.result)}}))}X(e,t){te(On,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((l,u,m)=>m.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new U(((r,a)=>{t.onerror=l=>{const u=Fp(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next((m=>{m?u.continue():r()})):r()}}))}J(e,t){const r=[];return new U(((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const m=u.target.result;if(!m)return void a();const p=new ON(m),y=t(m.primaryKey,m.value,p);if(y instanceof U){const b=y.catch((w=>(p.done(),U.reject(w))));r.push(b)}p.isDone?a():p.G===null?m.continue():m.continue(p.G)}})).next((()=>U.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ga(i){return new U(((e,t)=>{i.onsuccess=r=>{const a=r.target.result;e(a)},i.onerror=r=>{const a=Fp(r.target.error);t(a)}}))}let Lb=!1;function Fp(i){const e=Ei.M(Ft());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Lb||(Lb=!0,setTimeout((()=>{throw r}),0)),r}}return i}const qc="IndexBackfiller";class PN{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){te(qc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();te(qc,`Documents written: ${t}`)}catch(t){Ri(t)?te(qc,"Ignoring IndexedDB error during index backfill: ",t):await Ci(t)}await this.re(6e4)}))}}class LN{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return U.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return te(qc,`Processing collection: ${u}`),this.oe(e,u,a).next((m=>{a-=m,r.add(u)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(a,l))).next((m=>(te(qc,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>u.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const u=l1(l);qp(u,r)>0&&(r=u)})),new zn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Tn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=-1;function lf(i){return i==null}function eu(i){return i===0&&1/i==-1/0}function h1(i){return typeof i=="number"&&Number.isInteger(i)&&!eu(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="";function dn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Ub(e)),e=UN(i.get(t),e);return Ub(e)}function UN(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case jh:t+="";break;default:t+=l}}return t}function Ub(i){return i+jh+""}function qr(i){const e=i.length;if(ve(e>=2,64408,{path:i}),e===2)return ve(i.charAt(0)===jh&&i.charAt(1)==="",56145,{path:i}),Je.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const u=i.indexOf(jh,l);switch((u<0||u>t)&&he(50515,{path:i}),i.charAt(u+1)){case"":const m=i.substring(l,u);let p;a.length===0?p=m:(a+=m,p=a,a=""),r.push(p);break;case"":a+=i.substring(l,u),a+="\0";break;case"":a+=i.substring(l,u+1);break;default:he(61167,{path:i})}l=u+2}return new Je(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="remoteDocuments",yu="owner",Co="owner",tu="mutationQueues",zN="userId",mr="mutations",zb="batchId",va="userMutationsIndex",Bb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(i,e){return[i,dn(e)]}function f1(i,e,t){return[i,dn(e),t]}const BN={},Wo="documentMutations",Dh="remoteDocumentsV14",qN=["prefixPath","collectionGroup","readTime","documentId"],yh="documentKeyIndex",FN=["prefixPath","collectionGroup","documentId"],m1="collectionGroupIndex",GN=["collectionGroup","readTime","prefixPath","documentId"],nu="remoteDocumentGlobal",cp="remoteDocumentGlobalKey",Jo="targets",g1="queryTargetsIndex",HN=["canonicalId","targetId"],Zo="targetDocuments",KN=["targetId","path"],Gp="documentTargetsIndex",QN=["path","targetId"],Vh="targetGlobalKey",_a="targetGlobal",ru="collectionParents",YN=["collectionId","parent"],el="clientMetadata",$N="clientId",cf="bundles",XN="bundleId",uf="namedQueries",WN="name",Hp="indexConfiguration",JN="indexId",up="collectionGroupIndex",ZN="collectionGroup",Fc="indexState",eI=["indexId","uid"],p1="sequenceNumberIndex",tI=["uid","sequenceNumber"],Gc="indexEntries",nI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],y1="documentKeyIndex",rI=["indexId","uid","orderedDocumentKey"],df="documentOverlays",sI=["userId","collectionPath","documentId"],dp="collectionPathOverlayIndex",iI=["userId","collectionPath","largestBatchId"],x1="collectionGroupOverlayIndex",aI=["userId","collectionGroup","largestBatchId"],Kp="globals",oI="name",v1=[tu,mr,Wo,ma,Jo,yu,_a,Zo,el,nu,ru,cf,uf],lI=[...v1,df],b1=[tu,mr,Wo,Dh,Jo,yu,_a,Zo,el,nu,ru,cf,uf,df],_1=b1,Qp=[..._1,Hp,Fc,Gc],cI=Qp,w1=[...Qp,Kp],uI=w1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp extends u1{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Ht(i,e){const t=ge(i);return Ei.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ki(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function E1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}}class ah{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??rn.RED,this.left=a??rn.EMPTY,this.right=l??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new rn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return rn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fb(this.data.getIterator())}getIteratorFrom(e){return new Fb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new st(this.comparator);return t.data=e,t}}class Fb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ro(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new Sn([])}unionWith(e){let t=new st(xt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Sn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new T1("Invalid base64 string: "+l):l}})(e);return new It(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new It(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const dI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(i){if(ve(!!i,39018),typeof i=="string"){let e=0;const t=dI.exec(i);if(ve(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(i.seconds),nanos:pt(i.nanos)}}function pt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function bs(i){return typeof i=="string"?It.fromBase64String(i):It.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="server_timestamp",A1="__type__",N1="__previous_value__",I1="__local_write_time__";function Yp(i){var t,r;return((r=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[A1])==null?void 0:r.stringValue)===S1}function hf(i){const e=i.mapValue.fields[N1];return Yp(e)?hf(e):e}function su(i){const e=vs(i.mapValue.fields[I1].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,t,r,a,l,u,m,p,y,b,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=w}}const Oh="(default)";class Ia{constructor(e,t){this.projectId=e,this.database=t||Oh}static empty(){return new Ia("","")}get isDefaultDatabase(){return this.database===Oh}isEqual(e){return e instanceof Ia&&e.projectId===this.projectId&&e.database===this.database}}function fI(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new se(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ia(i.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="__type__",C1="__max__",xi={mapValue:{fields:{__type__:{stringValue:C1}}}},Xp="__vector__",tl="value",xh={nullValue:"NULL_VALUE"};function Si(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Yp(i)?4:R1(i)?9007199254740991:ff(i)?10:11:he(28295,{value:i})}function Yr(i,e){if(i===e)return!0;const t=Si(i);if(t!==Si(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return su(i).isEqual(su(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=vs(a.timestampValue),m=vs(l.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,l){return bs(a.bytesValue).isEqual(bs(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,l){return pt(a.geoPointValue.latitude)===pt(l.geoPointValue.latitude)&&pt(a.geoPointValue.longitude)===pt(l.geoPointValue.longitude)})(i,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return pt(a.integerValue)===pt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=pt(a.doubleValue),m=pt(l.doubleValue);return u===m?eu(u)===eu(m):isNaN(u)&&isNaN(m)}return!1})(i,e);case 9:return $o(i.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},m=l.mapValue.fields||{};if(qb(u)!==qb(m))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(m[p]===void 0||!Yr(u[p],m[p])))return!1;return!0})(i,e);default:return he(52216,{left:i})}}function iu(i,e){return(i.values||[]).find((t=>Yr(t,e)))!==void 0}function Ai(i,e){if(i===e)return 0;const t=Si(i),r=Si(e);if(t!==r)return Ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(i.booleanValue,e.booleanValue);case 2:return(function(l,u){const m=pt(l.integerValue||l.doubleValue),p=pt(u.integerValue||u.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,e);case 3:return Gb(i.timestampValue,e.timestampValue);case 4:return Gb(su(i),su(e));case 5:return op(i.stringValue,e.stringValue);case 6:return(function(l,u){const m=bs(l),p=bs(u);return m.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(l,u){const m=l.split("/"),p=u.split("/");for(let y=0;y<m.length&&y<p.length;y++){const b=Ie(m[y],p[y]);if(b!==0)return b}return Ie(m.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,u){const m=Ie(pt(l.latitude),pt(u.latitude));return m!==0?m:Ie(pt(l.longitude),pt(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Hb(i.arrayValue,e.arrayValue);case 10:return(function(l,u){var E,j,L,F;const m=l.fields||{},p=u.fields||{},y=(E=m[tl])==null?void 0:E.arrayValue,b=(j=p[tl])==null?void 0:j.arrayValue,w=Ie(((L=y==null?void 0:y.values)==null?void 0:L.length)||0,((F=b==null?void 0:b.values)==null?void 0:F.length)||0);return w!==0?w:Hb(y,b)})(i.mapValue,e.mapValue);case 11:return(function(l,u){if(l===xi.mapValue&&u===xi.mapValue)return 0;if(l===xi.mapValue)return 1;if(u===xi.mapValue)return-1;const m=l.fields||{},p=Object.keys(m),y=u.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let w=0;w<p.length&&w<b.length;++w){const E=op(p[w],b[w]);if(E!==0)return E;const j=Ai(m[p[w]],y[b[w]]);if(j!==0)return j}return Ie(p.length,b.length)})(i.mapValue,e.mapValue);default:throw he(23264,{he:t})}}function Gb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ie(i,e);const t=vs(i),r=vs(e),a=Ie(t.seconds,r.seconds);return a!==0?a:Ie(t.nanos,r.nanos)}function Hb(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Ai(t[a],r[a]);if(l)return l}return Ie(t.length,r.length)}function nl(i){return fp(i)}function fp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=vs(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return bs(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return oe.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=fp(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${fp(t.fields[u])}`;return a+"}"})(i.mapValue):he(61005,{value:i})}function vh(i){switch(Si(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hf(i);return e?16+vh(e):16;case 5:return 2*i.stringValue.length;case 6:return bs(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+vh(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let a=0;return ki(r.fields,((l,u)=>{a+=l.length+vh(u)})),a})(i.mapValue);default:throw he(13486,{value:i})}}function au(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function mp(i){return!!i&&"integerValue"in i}function ou(i){return!!i&&"arrayValue"in i}function Kb(i){return!!i&&"nullValue"in i}function Qb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function bh(i){return!!i&&"mapValue"in i}function ff(i){var t,r;return((r=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[$p])==null?void 0:r.stringValue)===Xp}function Hc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return ki(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Hc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hc(i.arrayValue.values[t]);return e}return{...i}}function R1(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===C1}const k1={mapValue:{fields:{[$p]:{stringValue:Xp},[tl]:{arrayValue:{}}}}};function mI(i){return"nullValue"in i?xh:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?au(Ia.empty(),oe.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?ff(i)?k1:{mapValue:{}}:he(35942,{value:i})}function gI(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?au(Ia.empty(),oe.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?k1:"mapValue"in i?ff(i)?{mapValue:{}}:xi:he(61959,{value:i})}function Yb(i,e){const t=Ai(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function $b(i,e){const t=Ai(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hc(t)}setAll(e){let t=xt.emptyPath(),r={},a=[];e.forEach(((u,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,r,a),r={},a=[],t=m.popLast()}u?r[m.lastSegment()]=Hc(u):a.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());bh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];bh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){ki(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new cn(Hc(this.value))}}function j1(i){const e=[];return ki(i.fields,((t,r)=>{const a=new xt([t]);if(bh(r)){const l=j1(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,t,r,a,l,u,m){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=m}static newInvalidDocument(e){return new _t(e,0,Ee.min(),Ee.min(),Ee.min(),cn.empty(),0)}static newFoundDocument(e,t,r,a){return new _t(e,1,t,Ee.min(),r,a,0)}static newNoDocument(e,t){return new _t(e,2,t,Ee.min(),Ee.min(),cn.empty(),0)}static newUnknownDocument(e,t){return new _t(e,3,t,Ee.min(),Ee.min(),cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,t){this.position=e,this.inclusive=t}}function Xb(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const l=e[a],u=i.position[a];if(l.field.isKeyField()?r=oe.comparator(oe.fromName(u.referenceValue),t.key):r=Ai(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Wb(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Yr(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,t="asc"){this.field=e,this.dir=t}}function pI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{}class qe extends D1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new yI(e,t,r):t==="array-contains"?new bI(e,r):t==="in"?new U1(e,r):t==="not-in"?new _I(e,r):t==="array-contains-any"?new wI(e,r):new qe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new xI(e,r):new vI(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ai(t,this.value)):t!==null&&Si(this.value)===Si(t)&&this.matchesComparison(Ai(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rt extends D1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new rt(e,t)}matches(e){return sl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sl(i){return i.op==="and"}function gp(i){return i.op==="or"}function Wp(i){return V1(i)&&sl(i)}function V1(i){for(const e of i.filters)if(e instanceof rt)return!1;return!0}function pp(i){if(i instanceof qe)return i.field.canonicalString()+i.op.toString()+nl(i.value);if(Wp(i))return i.filters.map((e=>pp(e))).join(",");{const e=i.filters.map((t=>pp(t))).join(",");return`${i.op}(${e})`}}function O1(i,e){return i instanceof qe?(function(r,a){return a instanceof qe&&r.op===a.op&&r.field.isEqual(a.field)&&Yr(r.value,a.value)})(i,e):i instanceof rt?(function(r,a){return a instanceof rt&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,u,m)=>l&&O1(u,a.filters[m])),!0):!1})(i,e):void he(19439)}function M1(i,e){const t=i.filters.concat(e);return rt.create(t,i.op)}function P1(i){return i instanceof qe?(function(t){return`${t.field.canonicalString()} ${t.op} ${nl(t.value)}`})(i):i instanceof rt?(function(t){return t.op.toString()+" {"+t.getFilters().map(P1).join(" ,")+"}"})(i):"Filter"}class yI extends qe{constructor(e,t,r){super(e,t,r),this.key=oe.fromName(r.referenceValue)}matches(e){const t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class xI extends qe{constructor(e,t){super(e,"in",t),this.keys=L1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vI extends qe{constructor(e,t){super(e,"not-in",t),this.keys=L1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function L1(i,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>oe.fromName(r.referenceValue)))}class bI extends qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ou(t)&&iu(t.arrayValue,this.value)}}class U1 extends qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&iu(this.value.arrayValue,t)}}class _I extends qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!iu(this.value.arrayValue,t)}}class wI extends qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ou(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>iu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,t=null,r=[],a=[],l=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=m,this.Te=null}}function yp(i,e=null,t=[],r=[],a=null,l=null,u=null){return new EI(i,e,t,r,a,l,u)}function Ca(i){const e=ge(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>pp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),lf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>nl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>nl(r))).join(",")),e.Te=t}return e.Te}function xu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!pI(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!O1(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Wb(i.startAt,e.startAt)&&Wb(i.endAt,e.endAt)}function Ph(i){return oe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Lh(i,e){return i.filters.filter((t=>t instanceof qe&&t.field.isEqual(e)))}function Jb(i,e,t){let r=xh,a=!0;for(const l of Lh(i,e)){let u=xh,m=!0;switch(l.op){case"<":case"<=":u=mI(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,m=!1;break;case"!=":case"not-in":u=xh}Yb({value:r,inclusive:a},{value:u,inclusive:m})<0&&(r=u,a=m)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const u=t.position[l];Yb({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function Zb(i,e,t){let r=xi,a=!0;for(const l of Lh(i,e)){let u=xi,m=!0;switch(l.op){case">=":case">":u=gI(l.value),m=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,m=!1;break;case"!=":case"not-in":u=xi}$b({value:r,inclusive:a},{value:u,inclusive:m})>0&&(r=u,a=m)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const u=t.position[l];$b({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,t=null,r=[],a=[],l=null,u="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function z1(i,e,t,r,a,l,u,m){return new vu(i,e,t,r,a,l,u,m)}function bu(i){return new vu(i)}function e_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function TI(i){return oe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function B1(i){return i.collectionGroup!==null}function Kc(i){const e=ge(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new st(xt.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Mh(l,r))})),t.has(xt.keyField().canonicalString())||e.Ie.push(new Mh(xt.keyField(),r))}return e.Ie}function Un(i){const e=ge(i);return e.Ee||(e.Ee=SI(e,Kc(i))),e.Ee}function SI(i,e){if(i.limitType==="F")return yp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Mh(a.field,l)}));const t=i.endAt?new rl(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new rl(i.startAt.position,i.startAt.inclusive):null;return yp(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function xp(i,e){const t=i.filters.concat([e]);return new vu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function vp(i,e,t){return new vu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function mf(i,e){return xu(Un(i),Un(e))&&i.limitType===e.limitType}function q1(i){return`${Ca(Un(i))}|lt:${i.limitType}`}function Po(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>P1(a))).join(", ")}]`),lf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>nl(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>nl(a))).join(",")),`Target(${r})`})(Un(i))}; limitType=${i.limitType})`}function _u(i,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):oe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,a){for(const l of Kc(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(i,e)&&(function(r,a){return!(r.startAt&&!(function(u,m,p){const y=Xb(u,m,p);return u.inclusive?y<=0:y<0})(r.startAt,Kc(r),a)||r.endAt&&!(function(u,m,p){const y=Xb(u,m,p);return u.inclusive?y>=0:y>0})(r.endAt,Kc(r),a))})(i,e)}function F1(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function G1(i){return(e,t)=>{let r=!1;for(const a of Kc(i)){const l=AI(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function AI(i,e,t){const r=i.field.isKeyField()?oe.comparator(e.key,t.key):(function(l,u,m){const p=u.data.field(l),y=m.data.field(l);return p!==null&&y!==null?Ai(p,y):he(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return he(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return E1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=new ut(oe.comparator);function Pn(){return NI}const H1=new ut(oe.comparator);function Mc(...i){let e=H1;for(const t of i)e=e.insert(t.key,t);return e}function K1(i){let e=H1;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Fr(){return Qc()}function Q1(){return Qc()}function Qc(){return new Ts((i=>i.toString()),((i,e)=>i.isEqual(e)))}const II=new ut(oe.comparator),CI=new st(oe.comparator);function Me(...i){let e=CI;for(const t of i)e=e.add(t);return e}const RI=new st(Ie);function Jp(){return RI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eu(e)?"-0":e}}function Y1(i){return{integerValue:""+i}}function kI(i,e){return h1(e)?Y1(e):Zp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this._=void 0}}function jI(i,e,t){return i instanceof lu?(function(a,l){const u={fields:{[A1]:{stringValue:S1},[I1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Yp(l)&&(l=hf(l)),l&&(u.fields[N1]=l),{mapValue:u}})(t,e):i instanceof il?X1(i,e):i instanceof al?W1(i,e):(function(a,l){const u=$1(a,l),m=t_(u)+t_(a.Ae);return mp(u)&&mp(a.Ae)?Y1(m):Zp(a.serializer,m)})(i,e)}function DI(i,e,t){return i instanceof il?X1(i,e):i instanceof al?W1(i,e):t}function $1(i,e){return i instanceof cu?(function(r){return mp(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class lu extends gf{}class il extends gf{constructor(e){super(),this.elements=e}}function X1(i,e){const t=J1(e);for(const r of i.elements)t.some((a=>Yr(a,r)))||t.push(r);return{arrayValue:{values:t}}}class al extends gf{constructor(e){super(),this.elements=e}}function W1(i,e){let t=J1(e);for(const r of i.elements)t=t.filter((a=>!Yr(a,r)));return{arrayValue:{values:t}}}class cu extends gf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function t_(i){return pt(i.integerValue||i.doubleValue)}function J1(i){return ou(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,t){this.field=e,this.transform=t}}function OI(i,e){return i.field.isEqual(e.field)&&(function(r,a){return r instanceof il&&a instanceof il||r instanceof al&&a instanceof al?$o(r.elements,a.elements,Yr):r instanceof cu&&a instanceof cu?Yr(r.Ae,a.Ae):r instanceof lu&&a instanceof lu})(i.transform,e.transform)}class MI{constructor(e,t){this.version=e,this.transformResults=t}}class un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _h(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class pf{}function Z1(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new yf(i.key,un.none()):new pl(i.key,i.data,un.none());{const t=i.data,r=cn.empty();let a=new st(xt.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new Ss(i.key,r,new Sn(a.toArray()),un.none())}}function PI(i,e,t){i instanceof pl?(function(a,l,u){const m=a.value.clone(),p=r_(a.fieldTransforms,l,u.transformResults);m.setAll(p),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(i,e,t):i instanceof Ss?(function(a,l,u){if(!_h(a.precondition,l))return void l.convertToUnknownDocument(u.version);const m=r_(a.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(eE(a)),p.setAll(m),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(i,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Yc(i,e,t,r){return i instanceof pl?(function(l,u,m,p){if(!_h(l.precondition,u))return m;const y=l.value.clone(),b=s_(l.fieldTransforms,p,u);return y.setAll(b),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(i,e,t,r):i instanceof Ss?(function(l,u,m,p){if(!_h(l.precondition,u))return m;const y=s_(l.fieldTransforms,p,u),b=u.data;return b.setAll(eE(l)),b.setAll(y),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((w=>w.field)))})(i,e,t,r):(function(l,u,m){return _h(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m})(i,e,t)}function LI(i,e){let t=null;for(const r of i.fieldTransforms){const a=e.data.field(r.field),l=$1(r.transform,a||null);l!=null&&(t===null&&(t=cn.empty()),t.set(r.field,l))}return t||null}function n_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&$o(r,a,((l,u)=>OI(l,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class pl extends pf{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ss extends pf{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function eE(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function r_(i,e,t){const r=new Map;ve(i.length===t.length,32656,{Ve:t.length,de:i.length});for(let a=0;a<t.length;a++){const l=i[a],u=l.transform,m=e.data.field(l.field);r.set(l.field,DI(u,m,t[a]))}return r}function s_(i,e,t){const r=new Map;for(const a of i){const l=a.transform,u=t.data.field(a.field);r.set(a.field,jI(l,u,e))}return r}class yf extends pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tE extends pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&PI(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Q1();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let m=this.applyToLocalView(u,l.mutatedFields);m=t.has(a.key)?null:m;const p=Z1(u,m);p!==null&&r.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(Ee.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Me())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,((t,r)=>n_(t,r)))&&$o(this.baseMutations,e.baseMutations,((t,r)=>n_(t,r)))}}class t0{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return II})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new t0(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,Ke;function zI(i){switch(i){case X.OK:return he(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return he(15467,{code:i})}}function nE(i){if(i===void 0)return Nt("GRPC error has no .code"),X.UNKNOWN;switch(i){case Lt.OK:return X.OK;case Lt.CANCELLED:return X.CANCELLED;case Lt.UNKNOWN:return X.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return X.INTERNAL;case Lt.UNAVAILABLE:return X.UNAVAILABLE;case Lt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Lt.NOT_FOUND:return X.NOT_FOUND;case Lt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Lt.ABORTED:return X.ABORTED;case Lt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Lt.DATA_LOSS:return X.DATA_LOSS;default:return he(39323,{code:i})}}(Ke=Lt||(Lt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=new wi([4294967295,4294967295],0);function i_(i){const e=BI().encode(i),t=new Ww;return t.update(e),new Uint8Array(t.digest())}function a_(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new wi([t,r],0),new wi([a,l],0)]}class r0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Pc(`Invalid padding: ${t}`);if(r<0)throw new Pc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Pc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=wi.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(wi.fromNumber(r)));return a.compare(qI)===1&&(a=new wi([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=i_(e),[r,a]=a_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);if(!this.we(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new r0(l,a,t);return r.forEach((m=>u.insert(m))),u}insert(e){if(this.ge===0)return;const t=i_(e),[r,a]=a_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);this.be(u)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Pc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Eu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new wu(Ee.min(),a,new ut(Ie),Pn(),Me())}}class Eu{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Eu(r,t,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class rE{constructor(e,t){this.targetId=e,this.Ce=t}}class sE{constructor(e,t,r=It.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class o_{constructor(){this.ve=0,this.Fe=l_(),this.Me=It.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),t=Me(),r=Me();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:he(38017,{changeType:l})}})),new Eu(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=l_()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class FI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pn(),this.He=oh(),this.Je=oh(),this.Ze=new ut(Ie)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:he(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Ph(l))if(r===0){const u=new oe(l.path);this.et(t,u,_t.newNoDocument(u,Ee.min()))}else ve(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const m=this.ut(e),p=m?this.ct(m,e,u):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let u,m;try{u=bs(r).toUint8Array()}catch(p){if(p instanceof T1)return Jc("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new r0(u,a,l)}catch(p){return Jc(p instanceof Pc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const u=this.Ge.ht(),m=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const m=this.ot(u);if(m){if(l.current&&Ph(m.target)){const p=new oe(m.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,_t.newNoDocument(p,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let r=Me();this.Je.forEach(((l,u)=>{let m=!0;u.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new wu(e,t,this.Ze,this.je,r);return this.je=Pn(),this.He=oh(),this.Je=oh(),this.Ze=new ut(Ie),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new o_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new st(Ie),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new st(Ie),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new o_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function oh(){return new ut(oe.comparator)}function l_(){return new ut(oe.comparator)}const GI={asc:"ASCENDING",desc:"DESCENDING"},HI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KI={and:"AND",or:"OR"};class QI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bp(i,e){return i.useProto3Json||lf(e)?e:{value:e}}function ol(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function YI(i,e){return ol(i,e.toTimestamp())}function pn(i){return ve(!!i,49232),Ee.fromTimestamp((function(t){const r=vs(t);return new nt(r.seconds,r.nanos)})(i))}function s0(i,e){return _p(i,e).canonicalString()}function _p(i,e){const t=(function(a){return new Je(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function aE(i){const e=Je.fromString(i);return ve(gE(e),10190,{key:e.toString()}),e}function Uh(i,e){return s0(i.databaseId,e.path)}function wa(i,e){const t=aE(e);if(t.get(1)!==i.databaseId.projectId)throw new se(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new se(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new oe(cE(t))}function oE(i,e){return s0(i.databaseId,e)}function lE(i){const e=aE(i);return e.length===4?Je.emptyPath():cE(e)}function wp(i){return new Je(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function cE(i){return ve(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function c_(i,e,t){return{name:Uh(i,e),fields:t.value.mapValue.fields}}function $I(i,e,t){const r=wa(i,e.name),a=pn(e.updateTime),l=e.createTime?pn(e.createTime):Ee.min(),u=new cn({mapValue:{fields:e.fields}}),m=_t.newFoundDocument(r,a,l,u);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function XI(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:he(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(y,b){return y.useProto3Json?(ve(b===void 0||typeof b=="string",58123),It.fromBase64String(b||"")):(ve(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),It.fromUint8Array(b||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&(function(y){const b=y.code===void 0?X.UNKNOWN:nE(y.code);return new se(b,y.message||"")})(u);t=new sE(r,a,l,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=wa(i,r.document.name),l=pn(r.document.updateTime),u=r.document.createTime?pn(r.document.createTime):Ee.min(),m=new cn({mapValue:{fields:r.document.fields}}),p=_t.newFoundDocument(a,l,u,m),y=r.targetIds||[],b=r.removedTargetIds||[];t=new wh(y,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=wa(i,r.document),l=r.readTime?pn(r.readTime):Ee.min(),u=_t.newNoDocument(a,l),m=r.removedTargetIds||[];t=new wh([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=wa(i,r.document),l=r.removedTargetIds||[];t=new wh([],l,a,null)}else{if(!("filter"in e))return he(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new UI(a,l),m=r.targetId;t=new rE(m,u)}}return t}function zh(i,e){let t;if(e instanceof pl)t={update:c_(i,e.key,e.value)};else if(e instanceof yf)t={delete:Uh(i,e.key)};else if(e instanceof Ss)t={update:c_(i,e.key,e.data),updateMask:nC(e.fieldMask)};else{if(!(e instanceof tE))return he(16599,{dt:e.type});t={verify:Uh(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,u){const m=u.transform;if(m instanceof lu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof il)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof al)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof cu)return{fieldPath:u.field.canonicalString(),increment:m.Ae};throw he(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:YI(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:he(27497)})(i,e.precondition)),t}function Ep(i,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?un.updateTime(pn(l.updateTime)):l.exists!==void 0?un.exists(l.exists):un.none()})(e.currentDocument):un.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(u,m){let p=null;if("setToServerValue"in m)ve(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),p=new lu;else if("appendMissingElements"in m){const b=m.appendMissingElements.values||[];p=new il(b)}else if("removeAllFromArray"in m){const b=m.removeAllFromArray.values||[];p=new al(b)}else"increment"in m?p=new cu(u,m.increment):he(16584,{proto:m});const y=xt.fromServerFormat(m.fieldPath);return new VI(y,p)})(i,a))):[];if(e.update){e.update.name;const a=wa(i,e.update.name),l=new cn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(p){const y=p.fieldPaths||[];return new Sn(y.map((b=>xt.fromServerFormat(b))))})(e.updateMask);return new Ss(a,l,u,t,r)}return new pl(a,l,t,r)}if(e.delete){const a=wa(i,e.delete);return new yf(a,t)}if(e.verify){const a=wa(i,e.verify);return new tE(a,t)}return he(1463,{proto:e})}function WI(i,e){return i&&i.length>0?(ve(e!==void 0,14353),i.map((t=>(function(a,l){let u=a.updateTime?pn(a.updateTime):pn(l);return u.isEqual(Ee.min())&&(u=pn(l)),new MI(u,a.transformResults||[])})(t,e)))):[]}function uE(i,e){return{documents:[oE(i,e.path)]}}function dE(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=oE(i,a);const l=(function(y){if(y.length!==0)return mE(rt.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(y){if(y.length!==0)return y.map((b=>(function(E){return{field:Lo(E.field),direction:ZI(E.dir)}})(b)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=bp(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function hE(i){let e=lE(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){ve(r===1,65062);const b=t.from[0];b.allDescendants?a=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(w){const E=fE(w);return E instanceof rt&&Wp(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((E=>(function(L){return new Mh(Uo(L.field),(function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(E)))})(t.orderBy));let m=null;t.limit&&(m=(function(w){let E;return E=typeof w=="object"?w.value:w,lf(E)?null:E})(t.limit));let p=null;t.startAt&&(p=(function(w){const E=!!w.before,j=w.values||[];return new rl(j,E)})(t.startAt));let y=null;return t.endAt&&(y=(function(w){const E=!w.before,j=w.values||[];return new rl(j,E)})(t.endAt)),z1(e,a,u,l,m,"F",p,y)}function JI(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fE(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Uo(t.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Uo(t.unaryFilter.field);return qe.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Uo(t.unaryFilter.field);return qe.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Uo(t.unaryFilter.field);return qe.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(i):i.fieldFilter!==void 0?(function(t){return qe.create(Uo(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return rt.create(t.compositeFilter.filters.map((r=>fE(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(t.compositeFilter.op))})(i):he(30097,{filter:i})}function ZI(i){return GI[i]}function eC(i){return HI[i]}function tC(i){return KI[i]}function Lo(i){return{fieldPath:i.canonicalString()}}function Uo(i){return xt.fromServerFormat(i.fieldPath)}function mE(i){return i instanceof qe?(function(t){if(t.op==="=="){if(Qb(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NAN"}};if(Kb(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Qb(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NOT_NAN"}};if(Kb(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(t.field),op:eC(t.op),value:t.value}}})(i):i instanceof rt?(function(t){const r=t.getFilters().map((a=>mE(a)));return r.length===1?r[0]:{compositeFilter:{op:tC(t.op),filters:r}}})(i):he(54877,{filter:i})}function nC(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function gE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function pE(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t,r,a,l=Ee.min(),u=Ee.min(),m=It.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e){this.yt=e}}function rC(i,e){let t;if(e.document)t=$I(i.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=oe.fromSegments(e.noDocument.path),a=ka(e.noDocument.readTime);t=_t.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return he(56709);{const r=oe.fromSegments(e.unknownDocument.path),a=ka(e.unknownDocument.version);t=_t.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new nt(a[0],a[1]);return Ee.fromTimestamp(l)})(e.readTime)),t}function u_(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Bh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,u){return{name:Uh(l,u.key),fields:u.data.value.mapValue.fields,updateTime:ol(l,u.version.toTimestamp()),createTime:ol(l,u.createTime.toTimestamp())}})(i.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ra(e.version)};else{if(!e.isUnknownDocument())return he(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Ra(e.version)}}return r}function Bh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ra(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ka(i){const e=new nt(i.seconds,i.nanoseconds);return Ee.fromTimestamp(e)}function pa(i,e){const t=(e.baseMutations||[]).map((l=>Ep(i.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const m=e.mutations[l+1];u.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>Ep(i.yt,l))),a=nt.fromMillis(e.localWriteTimeMs);return new e0(e.batchId,a,t,r)}function Lc(i){const e=ka(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?ka(i.lastLimboFreeSnapshotVersion):Ee.min();let r;return r=(function(l){return l.documents!==void 0})(i.query)?(function(l){const u=l.documents.length;return ve(u===1,1966,{count:u}),Un(bu(lE(l.documents[0])))})(i.query):(function(l){return Un(hE(l))})(i.query),new ms(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,It.fromBase64String(i.resumeToken))}function xE(i,e){const t=Ra(e.snapshotVersion),r=Ra(e.lastLimboFreeSnapshotVersion);let a;a=Ph(e.target)?uE(i.yt,e.target):dE(i.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ca(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function vE(i){const e=hE({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?vp(e,e.limit,"L"):e}function Fg(i,e){return new n0(e.largestBatchId,Ep(i.yt,e.overlayMutation))}function d_(i,e){const t=e.path.lastSegment();return[i,dn(e.path.popLast()),t]}function h_(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:Ra(r.readTime),documentKey:dn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{getBundleMetadata(e,t){return f_(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:ka(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return f_(e).put((function(a){return{bundleId:a.id,createTime:Ra(pn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return m_(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:vE(l.bundledQuery),readTime:ka(l.readTime)}})(r)}))}saveNamedQuery(e,t){return m_(e).put((function(a){return{name:a.name,readTime:Ra(pn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function f_(i){return Ht(i,cf)}function m_(i){return Ht(i,uf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new xf(e,r)}getOverlay(e,t){return Nc(e).get(d_(this.userId,t)).next((r=>r?Fg(this.serializer,r):null))}getOverlays(e,t){const r=Fr();return U.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,u)=>{const m=new n0(t,u);a.push(this.bt(e,m))})),U.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((u=>a.add(dn(u.getCollectionPath()))));const l=[];return a.forEach((u=>{const m=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(Nc(e).X(dp,m))})),U.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Fr(),l=dn(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Nc(e).H(dp,u).next((m=>{for(const p of m){const y=Fg(this.serializer,p);a.set(y.getKey(),y)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Fr();let u;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Nc(e).ee({index:x1,range:m},((p,y,b)=>{const w=Fg(this.serializer,y);l.size()<a||w.largestBatchId===u?(l.set(w.getKey(),w),u=w.largestBatchId):b.done()})).next((()=>l))}bt(e,t){return Nc(e).put((function(a,l,u){const[m,p,y]=d_(l,u.mutation.key);return{userId:l,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:zh(a.yt,u.mutation)}})(this.serializer,this.userId,t))}}function Nc(i){return Ht(i,df)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{St(e){return Ht(e,Kp)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?It.fromUint8Array(r):It.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(pt(e.integerValue));else if("doubleValue"in e){const r=pt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),eu(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=vs(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(bs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?R1(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ff(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):he(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){var u,m;const r=e.fields||{};this.Ft(t,53);const a=tl,l=((m=(u=r[a].arrayValue)==null?void 0:u.values)==null?void 0:m.length)||0;this.Ft(t,15),t.Mt(pt(l)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),oe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ya.Wt=new ya;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=255;function aC(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function g_(i){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const u=aC(255&r[l]);if(a+=u,u!==8)break}return a})(i);return Math.ceil(e/8)}class oC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=g_(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=g_(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(ko),this.sn(255)}_n(){this.an(ko),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===ko?(this.sn(ko),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===ko?(this.an(ko),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class lC{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class cC{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Ic{constructor(){this.cn=new oC,this.ascending=new lC(this.cn),this.descending=new cC(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new xa(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:Eh(this.Tn),directionalValue:Eh(this.In),orderedDocumentKey:Eh(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function oi(i,e){let t=i.hn-e.hn;return t!==0?t:(t=p_(i.Tn,e.Tn),t!==0?t:(t=p_(i.In,e.In),t!==0?t:oe.comparator(i.Pn,e.Pn)))}function p_(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function Eh(i){return Gw()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(i):i}function y_(i){return typeof i!="string"?i:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(i)}class x_{constructor(e){this.Vn=new st(((t,r)=>xt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(ve(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=lp(e);if(t!==void 0&&!this.pn(t))return!1;const r=fa(e);let a=new Set,l=0,u=0;for(;l<r.length&&this.pn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const m=this.Vn.getIterator().getNext();if(!a.has(m.field.canonicalString())){const p=r[l];if(!this.yn(m,p)||!this.wn(this.dn[u++],p))return!1}++l}for(;l<r.length;++l){const m=r[l];if(u>=this.dn.length||!this.wn(this.dn[u++],m))return!1}return!0}bn(){if(this.fn)return null;let e=new st(xt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new gh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new gh(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new gh(r.field,r.dir==="asc"?0:1)));return new kh(kh.UNKNOWN_ID,this.collectionId,t,Zc.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(i){var t,r;if(ve(i instanceof qe||i instanceof rt,20012),i instanceof qe){if(i instanceof U1){const a=((r=(t=i.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((l=>qe.create(i.field,"==",l))))||[];return rt.create(a,"or")}return i}const e=i.filters.map((a=>bE(a)));return rt.create(e,i.op)}function uC(i){if(i.getFilters().length===0)return[];const e=Ap(bE(i));return ve(_E(e),7391),Tp(e)||Sp(e)?[e]:e.getFilters()}function Tp(i){return i instanceof qe}function Sp(i){return i instanceof rt&&Wp(i)}function _E(i){return Tp(i)||Sp(i)||(function(t){if(t instanceof rt&&gp(t)){for(const r of t.getFilters())if(!Tp(r)&&!Sp(r))return!1;return!0}return!1})(i)}function Ap(i){if(ve(i instanceof qe||i instanceof rt,34018),i instanceof qe)return i;if(i.filters.length===1)return Ap(i.filters[0]);const e=i.filters.map((r=>Ap(r)));let t=rt.create(e,i.op);return t=qh(t),_E(t)?t:(ve(t instanceof rt,64498),ve(sl(t),40251),ve(t.filters.length>1,57927),t.filters.reduce(((r,a)=>i0(r,a))))}function i0(i,e){let t;return ve(i instanceof qe||i instanceof rt,38388),ve(e instanceof qe||e instanceof rt,25473),t=i instanceof qe?e instanceof qe?(function(a,l){return rt.create([a,l],"and")})(i,e):v_(i,e):e instanceof qe?v_(e,i):(function(a,l){if(ve(a.filters.length>0&&l.filters.length>0,48005),sl(a)&&sl(l))return M1(a,l.getFilters());const u=gp(a)?a:l,m=gp(a)?l:a,p=u.filters.map((y=>i0(y,m)));return rt.create(p,"or")})(i,e),qh(t)}function v_(i,e){if(sl(e))return M1(e,i.getFilters());{const t=e.filters.map((r=>i0(i,r)));return rt.create(t,"or")}}function qh(i){if(ve(i instanceof qe||i instanceof rt,11850),i instanceof qe)return i;const e=i.getFilters();if(e.length===1)return qh(e[0]);if(V1(i))return i;const t=e.map((a=>qh(a))),r=[];return t.forEach((a=>{a instanceof qe?r.push(a):a instanceof rt&&(a.op===i.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:rt.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.Sn=new a0}addToCollectionParentIndex(e,t){return this.Sn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(zn.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(zn.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class a0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new st(Je.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new st(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="IndexedDbIndexManager",lh=new Uint8Array(0);class hC{constructor(e,t){this.databaseId=t,this.Dn=new a0,this.Cn=new Ts((r=>Ca(r)),((r,a)=>xu(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:r,parent:dn(a)};return __(e).put(l)}return U.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[s1(t),""],!1,!0);return __(e).H(a).next((l=>{for(const u of l){if(u.collectionId!==t)break;r.push(qr(u.parent))}return r}))}addFieldIndex(e,t){const r=Cc(e),a=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const u=Do(e);return l.next((m=>{u.put(h_(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Cc(e),a=Do(e),l=jo(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Cc(e),r=jo(e),a=Do(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return U.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new x_(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=jo(e);let a=!0;const l=new Map;return U.forEach(this.vn(t),(u=>this.Fn(e,u).next((m=>{a&&(a=!!m),l.set(u,m)})))).next((()=>{if(a){let u=Me();const m=[];return U.forEach(l,((p,y)=>{te(b_,`Using index ${(function(re){return`id=${re.indexId}|cg=${re.collectionGroup}|f=${re.fields.map((xe=>`${xe.fieldPath}:${xe.kind}`)).join(",")}`})(p)} to execute ${Ca(t)}`);const b=(function(re,xe){const be=lp(xe);if(be===void 0)return null;for(const ye of Lh(re,be.fieldPath))switch(ye.op){case"array-contains-any":return ye.value.arrayValue.values||[];case"array-contains":return[ye.value]}return null})(y,p),w=(function(re,xe){const be=new Map;for(const ye of fa(xe))for(const k of Lh(re,ye.fieldPath))switch(k.op){case"==":case"in":be.set(ye.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return be.set(ye.fieldPath.canonicalString(),k.value),Array.from(be.values())}return null})(y,p),E=(function(re,xe){const be=[];let ye=!0;for(const k of fa(xe)){const N=k.kind===0?Jb(re,k.fieldPath,re.startAt):Zb(re,k.fieldPath,re.startAt);be.push(N.value),ye&&(ye=N.inclusive)}return new rl(be,ye)})(y,p),j=(function(re,xe){const be=[];let ye=!0;for(const k of fa(xe)){const N=k.kind===0?Zb(re,k.fieldPath,re.endAt):Jb(re,k.fieldPath,re.endAt);be.push(N.value),ye&&(ye=N.inclusive)}return new rl(be,ye)})(y,p),L=this.Mn(p,y,E),F=this.Mn(p,y,j),Q=this.xn(p,y,w),ie=this.On(p.indexId,b,L,E.inclusive,F,j.inclusive,Q);return U.forEach(ie,(ne=>r.Z(ne,t.limit).next((re=>{re.forEach((xe=>{const be=oe.fromSegments(xe.documentKey);u.has(be)||(u=u.add(be),m.push(be))}))}))))})).next((()=>m))}return U.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=uC(rt.create(e.filters,"and")).map((r=>yp(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,l,u,m){const p=(t!=null?t.length:1)*Math.max(r.length,l.length),y=p/(t!=null?t.length:1),b=[];for(let w=0;w<p;++w){const E=t?this.Nn(t[w/y]):lh,j=this.Bn(e,E,r[w%y],a),L=this.Ln(e,E,l[w%y],u),F=m.map((Q=>this.Bn(e,E,Q,!0)));b.push(...this.createRange(j,L,F))}return b}Bn(e,t,r,a){const l=new xa(e,oe.empty(),t,r);return a?l:l.En()}Ln(e,t,r,a){const l=new xa(e,oe.empty(),t,r);return a?l.En():l}Fn(e,t){const r=new x_(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let u=null;for(const m of l)r.gn(m)&&(!u||m.fields.length>u.fields.length)&&(u=m);return u}))}getIndexType(e,t){let r=2;const a=this.vn(t);return U.forEach(a,(l=>this.Fn(e,l).next((u=>{u?r!==0&&u.fields.length<(function(p){let y=new st(xt.comparator),b=!1;for(const w of p.filters)for(const E of w.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?b=!0:y=y.add(E.field));for(const w of p.orderBy)w.field.isKeyField()||(y=y.add(w.field));return y.size+(b?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new Ic;for(const a of fa(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=r.ln(a.kind);ya.Wt.Dt(l,u)}return r.un()}Nn(e){const t=new Ic;return ya.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new Ic;return ya.Wt.Dt(au(this.databaseId,t),r.ln((function(l){const u=fa(l);return u.length===0?0:u[u.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new Ic);let l=0;for(const u of fa(e)){const m=r[l++];for(const p of a)if(this.qn(t,u.fieldPath)&&ou(m))a=this.Un(a,u,m);else{const y=p.ln(u.kind);ya.Wt.Dt(m,y)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],l=[];for(const u of r.arrayValue.values||[])for(const m of a){const p=new Ic;p.seed(m.un()),ya.Wt.Dt(u,p.ln(t.kind)),l.push(p)}return l}qn(e,t){return!!e.filters.find((r=>r instanceof qe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Cc(e),a=Do(e);return(t?r.H(up,IDBKeyRange.bound(t,t)):r.H()).next((l=>{const u=[];return U.forEach(l,(m=>a.get([m.indexId,this.uid]).next((p=>{u.push((function(b,w){const E=w?new Zc(w.sequenceNumber,new zn(ka(w.readTime),new oe(qr(w.documentKey)),w.largestBatchId)):Zc.empty(),j=b.fields.map((([L,F])=>new gh(xt.fromServerFormat(L),F)));return new kh(b.indexId,b.collectionGroup,j,E)})(m,p))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ie(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Cc(e),l=Do(e);return this.Wn(e).next((u=>a.H(up,IDBKeyRange.bound(t,t)).next((m=>U.forEach(m,(p=>l.put(h_(p.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return U.forEach(t,((a,l)=>{const u=r.get(a.collectionGroup);return(u?U.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((m=>(r.set(a.collectionGroup,m),U.forEach(m,(p=>this.Qn(e,a,p).next((y=>{const b=this.Gn(l,p);return y.isEqual(b)?U.resolve():this.zn(e,l,p,y,b)})))))))}))}jn(e,t,r,a){return jo(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return jo(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=jo(e);let l=new st(oi);return a.ee({index:y1,range:IDBKeyRange.only([r.indexId,this.uid,Eh(this.Kn(r,t))])},((u,m)=>{l=l.add(new xa(r.indexId,t,y_(m.arrayValue),y_(m.directionalValue)))})).next((()=>l))}Gn(e,t){let r=new st(oi);const a=this.kn(t,e);if(a==null)return r;const l=lp(t);if(l!=null){const u=e.data.field(l.fieldPath);if(ou(u))for(const m of u.arrayValue.values||[])r=r.add(new xa(t.indexId,e.key,this.Nn(m),a))}else r=r.add(new xa(t.indexId,e.key,lh,a));return r}zn(e,t,r,a,l){te(b_,"Updating index entries for document '%s'",t.key);const u=[];return(function(p,y,b,w,E){const j=p.getIterator(),L=y.getIterator();let F=Ro(j),Q=Ro(L);for(;F||Q;){let ie=!1,ne=!1;if(F&&Q){const re=b(F,Q);re<0?ne=!0:re>0&&(ie=!0)}else F!=null?ne=!0:ie=!0;ie?(w(Q),Q=Ro(L)):ne?(E(F),F=Ro(j)):(F=Ro(j),Q=Ro(L))}})(a,l,oi,(m=>{u.push(this.jn(e,t,r,m))}),(m=>{u.push(this.Hn(e,t,r,m))})),U.waitFor(u)}Wn(e){let t=1;return Do(e).ee({index:p1,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,m)=>oi(u,m))).filter(((u,m,p)=>!m||oi(u,p[m-1])!==0));const a=[];a.push(e);for(const u of r){const m=oi(u,e),p=oi(u,t);if(m===0)a[0]=e.En();else if(m>0&&p<0)a.push(u),a.push(u.En());else if(p>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Jn(a[u],a[u+1]))return[];const m=a[u].An(this.uid,lh,oe.empty()),p=a[u+1].An(this.uid,lh,oe.empty());l.push(IDBKeyRange.bound(m,p))}return l}Jn(e,t){return oi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(w_)}getMinOffset(e,t){return U.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||he(44426))))).next(w_)}}function __(i){return Ht(i,ru)}function jo(i){return Ht(i,Gc)}function Cc(i){return Ht(i,Hp)}function Do(i){return Ht(i,Fc)}function w_(i){ve(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const a=i[r].indexState.offset;qp(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new zn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wE=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(i,e,t){const r=i.store(mr),a=i.store(Wo),l=[],u=IDBKeyRange.only(t.batchId);let m=0;const p=r.ee({range:u},((b,w,E)=>(m++,E.delete())));l.push(p.next((()=>{ve(m===1,47070,{batchId:t.batchId})})));const y=[];for(const b of t.mutations){const w=f1(e,b.key.path,t.batchId);l.push(a.delete(w)),y.push(b.key)}return U.waitFor(l).next((()=>y))}function Fh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw he(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(wE,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);class vf{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){ve(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new vf(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return li(e).ee({index:va,range:r},((a,l,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=zo(e),u=li(e);return u.add({}).next((m=>{ve(typeof m=="number",49019);const p=new e0(m,t,r,a),y=(function(j,L,F){const Q=F.baseMutations.map((ne=>zh(j.yt,ne))),ie=F.mutations.map((ne=>zh(j.yt,ne)));return{userId:L,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:Q,mutations:ie}})(this.serializer,this.userId,p),b=[];let w=new st(((E,j)=>Ie(E.canonicalString(),j.canonicalString())));for(const E of a){const j=f1(this.userId,E.key.path,m);w=w.add(E.key.path.popLast()),b.push(u.put(y)),b.push(l.put(j,BN))}return w.forEach((E=>{b.push(this.indexManager.addToCollectionParentIndex(e,E))})),e.addOnCommittedListener((()=>{this.Zn[m]=p.keys()})),U.waitFor(b).next((()=>p))}))}lookupMutationBatch(e,t){return li(e).get(t).next((r=>r?(ve(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),pa(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?U.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return li(e).ee({index:va,range:a},((u,m,p)=>{m.userId===this.userId&&(ve(m.batchId>=r,47524,{Yn:r}),l=pa(this.serializer,m)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ba;return li(e).ee({index:va,range:t,reverse:!0},((a,l,u)=>{r=l.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ba],[this.userId,Number.POSITIVE_INFINITY]);return li(e).H(va,t).next((r=>r.map((a=>pa(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ph(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return zo(e).ee({range:a},((u,m,p)=>{const[y,b,w]=u,E=qr(b);if(y===this.userId&&t.path.isEqual(E))return li(e).get(w).next((j=>{if(!j)throw he(61480,{er:u,batchId:w});ve(j.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:j.userId,batchId:w}),l.push(pa(this.serializer,j))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new st(Ie);const a=[];return t.forEach((l=>{const u=ph(this.userId,l.path),m=IDBKeyRange.lowerBound(u),p=zo(e).ee({range:m},((y,b,w)=>{const[E,j,L]=y,F=qr(j);E===this.userId&&l.path.isEqual(F)?r=r.add(L):w.done()}));a.push(p)})),U.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=ph(this.userId,r),u=IDBKeyRange.lowerBound(l);let m=new st(Ie);return zo(e).ee({range:u},((p,y,b)=>{const[w,E,j]=p,L=qr(E);w===this.userId&&r.isPrefixOf(L)?L.length===a&&(m=m.add(j)):b.done()})).next((()=>this.tr(e,m)))}tr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(li(e).get(l).next((u=>{if(u===null)throw he(35274,{batchId:l});ve(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:l}),r.push(pa(this.serializer,u))})))})),U.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return EE(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),U.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return U.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return zo(e).ee({range:r},((l,u,m)=>{if(l[0]===this.userId){const p=qr(l[1]);a.push(p)}else m.done()})).next((()=>{ve(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return TE(e,this.userId,t)}ir(e){return SE(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ba,lastStreamToken:""}))}}function TE(i,e,t){const r=ph(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return zo(i).ee({range:l,Y:!0},((m,p,y)=>{const[b,w,E]=m;b===e&&w===a&&(u=!0),y.done()})).next((()=>u))}function li(i){return Ht(i,mr)}function zo(i){return Ht(i,Wo)}function SE(i){return Ht(i,tu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ja(0)}static ar(){return new ja(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new ja(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Ee.fromTimestamp(new nt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Vo(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(ve(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return Vo(e).ee(((u,m)=>{const p=Lc(m);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(e,p)))})).next((()=>U.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Vo(e).ee(((r,a)=>{const l=Lc(a);t(l)}))}ur(e){return T_(e).get(Vh).next((t=>(ve(t!==null,2888),t)))}cr(e,t){return T_(e).put(Vh,t)}lr(e,t){return Vo(e).put(xE(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Ca(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Vo(e).ee({range:a,index:g1},((u,m,p)=>{const y=Lc(m);xu(t,y.target)&&(l=y,p.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=fi(e);return t.forEach((u=>{const m=dn(u.path);a.push(l.put({targetId:r,path:m})),a.push(this.referenceDelegate.addReference(e,r,u))})),U.waitFor(a)}removeMatchingKeys(e,t,r){const a=fi(e);return U.forEach(t,(l=>{const u=dn(l.path);return U.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=fi(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=fi(e);let l=Me();return a.ee({range:r,Y:!0},((u,m,p)=>{const y=qr(u[1]),b=new oe(y);l=l.add(b)})).next((()=>l))}containsKey(e,t){const r=dn(t.path),a=IDBKeyRange.bound([r],[s1(r)],!1,!0);let l=0;return fi(e).ee({index:Gp,Y:!0,range:a},(([u,m],p,y)=>{u!==0&&(l++,y.done())})).next((()=>l>0))}At(e,t){return Vo(e).get(t).next((r=>r?Lc(r):null))}}function Vo(i){return Ht(i,Jo)}function T_(i){return Ht(i,_a)}function fi(i){return Ht(i,Zo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="LruGarbageCollector",AE=1048576;function A_([i,e],[t,r]){const a=Ie(i,t);return a===0?Ie(e,r):a}class mC{constructor(e){this.Pr=e,this.buffer=new st(A_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();A_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class NE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){te(S_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ri(t)?te(S_,"Ignoring IndexedDB error during garbage collection: ",t):await Ci(t)}await this.Ar(3e5)}))}}class gC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return U.resolve(Tn.ce);const r=new mC(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(E_)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,u,m,p,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),a=this.params.maximumSequenceNumbersToCollect):a=w,u=Date.now(),this.nthSequenceNumber(e,a)))).next((w=>(r=w,m=Date.now(),this.removeTargets(e,r,t)))).next((w=>(l=w,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(y=Date.now(),Mo()<=Be.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-b}ms
	Determined least recently used ${a} in `+(m-u)+`ms
	Removed ${l} targets in `+(p-m)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-b}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:w}))))}}function IE(i,e){return new gC(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t){this.db=e,this.garbageCollector=IE(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return ch(e,r)}removeReference(e,t,r){return ch(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ch(e,t)}wr(e,t){return(function(a,l){let u=!1;return SE(a).te((m=>TE(a,m,l).next((p=>(p&&(u=!0),U.resolve(!p)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((u,m)=>{if(m<=t){const p=this.wr(e,u).next((y=>{if(!y)return l++,r.getEntry(e,u).next((()=>(r.removeEntry(u,Ee.min()),fi(e).delete((function(w){return[0,dn(w.path)]})(u)))))}));a.push(p)}})).next((()=>U.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ch(e,t)}yr(e,t){const r=fi(e);let a,l=Tn.ce;return r.ee({index:Gp},(([u,m],{path:p,sequenceNumber:y})=>{u===0?(l!==Tn.ce&&t(new oe(qr(a)),l),l=y,a=p):l=Tn.ce})).next((()=>{l!==Tn.ce&&t(new oe(qr(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ch(i,e){return fi(i).put((function(r,a){return{targetId:0,path:dn(r.path),sequenceNumber:a}})(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(){this.changes=new Ts((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return da(e).put(r)}removeEntry(e,t,r){return da(e).delete((function(l,u){const m=l.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Bh(u),m[m.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=_t.newInvalidDocument(t);return da(e).ee({index:yh,range:IDBKeyRange.only(Rc(t))},((a,l)=>{r=this.Sr(t,l)})).next((()=>r))}Dr(e,t){let r={size:0,document:_t.newInvalidDocument(t)};return da(e).ee({index:yh,range:IDBKeyRange.only(Rc(t))},((a,l)=>{r={document:this.Sr(t,l),size:Fh(l)}})).next((()=>r))}getEntries(e,t){let r=Pn();return this.Cr(e,t,((a,l)=>{const u=this.Sr(a,l);r=r.insert(a,u)})).next((()=>r))}vr(e,t){let r=Pn(),a=new ut(oe.comparator);return this.Cr(e,t,((l,u)=>{const m=this.Sr(l,u);r=r.insert(l,m),a=a.insert(l,Fh(u))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return U.resolve();let a=new st(C_);t.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(Rc(a.first()),Rc(a.last())),u=a.getIterator();let m=u.getNext();return da(e).ee({index:yh,range:l},((p,y,b)=>{const w=oe.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;m&&C_(m,w)<0;)r(m,null),m=u.getNext();m&&m.isEqual(w)&&(r(m,y),m=u.hasNext()?u.getNext():null),m?b.j(Rc(m)):b.done()})).next((()=>{for(;m;)r(m,null),m=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const u=t.path,m=[u.popLast().toArray(),u.lastSegment(),Bh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return da(e).H(IDBKeyRange.bound(m,p,!0)).next((y=>{l==null||l.incrementDocumentReadCount(y.length);let b=Pn();for(const w of y){const E=this.Sr(oe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);E.isFoundDocument()&&(_u(t,E)||a.has(E.key))&&(b=b.insert(E.key,E))}return b}))}getAllFromCollectionGroup(e,t,r,a){let l=Pn();const u=I_(t,r),m=I_(t,zn.max());return da(e).ee({index:m1,range:IDBKeyRange.bound(u,m,!0)},((p,y,b)=>{const w=this.Sr(oe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);l=l.insert(w.key,w),l.size===a&&b.done()})).next((()=>l))}newChangeBuffer(e){return new xC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return N_(e).get(cp).next((t=>(ve(!!t,20021),t)))}br(e,t){return N_(e).put(cp,t)}Sr(e,t){if(t){const r=rC(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ee.min())))return r}return _t.newInvalidDocument(e)}}function RE(i){return new yC(i)}class xC extends CE{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Ts((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new st(((l,u)=>Ie(l.canonicalString(),u.canonicalString())));return this.changes.forEach(((l,u)=>{const m=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,m.readTime)),u.isValidDocument()){const p=u_(this.Mr.serializer,u);a=a.add(l.path.popLast());const y=Fh(p);r+=y-m.size,t.push(this.Mr.addEntry(e,l,p))}else if(r-=m.size,this.trackRemovals){const p=u_(this.Mr.serializer,u.convertToNoDocument(Ee.min()));t.push(this.Mr.addEntry(e,l,p))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,r)),U.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((l,u)=>{this.Or.set(l,{size:u,readTime:r.get(l).readTime})})),r)))}}function N_(i){return Ht(i,nu)}function da(i){return Ht(i,Dh)}function Rc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function I_(i,e){const t=e.documentKey.path.toArray();return[i,Bh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function C_(i,e){const t=i.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Ie(t[l],r[l]),a)return a;return a=Ie(t.length,r.length),a||(a=Ie(t[t.length-2],r[r.length-2]),a||Ie(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Yc(r.mutation,a,Sn.empty(),nt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Me()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Me()){const a=Fr();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let u=Mc();return l.forEach(((m,p)=>{u=u.insert(m,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Fr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Me())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,m)=>{t.set(u,m)}))}))}computeViews(e,t,r,a){let l=Pn();const u=Qc(),m=(function(){return Qc()})();return t.forEach(((p,y)=>{const b=r.get(y.key);a.has(y.key)&&(b===void 0||b.mutation instanceof Ss)?l=l.insert(y.key,y):b!==void 0?(u.set(y.key,b.mutation.getFieldMask()),Yc(b.mutation,y,b.mutation.getFieldMask(),nt.now())):u.set(y.key,Sn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,b)=>u.set(y,b))),t.forEach(((y,b)=>m.set(y,new vC(b,u.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=Qc();let a=new ut(((u,m)=>u-m)),l=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const m of u)m.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let b=r.get(p)||Sn.empty();b=m.applyToLocalView(y,b),r.set(p,b);const w=(a.get(m.batchId)||Me()).add(p);a=a.insert(m.batchId,w)}))})).next((()=>{const u=[],m=a.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,b=p.value,w=Q1();b.forEach((E=>{if(!l.has(E)){const j=Z1(t.get(E),r.get(E));j!==null&&w.set(E,j),l=l.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,w))}return U.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return TI(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):B1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):U.resolve(Fr());let m=Xo,p=l;return u.next((y=>U.forEach(y,((b,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),l.get(b)?U.resolve():this.remoteDocumentCache.getEntry(e,b).next((E=>{p=p.insert(b,E)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,Me()))).next((b=>({batchId:m,changes:K1(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next((r=>{let a=Mc();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let u=Mc();return this.indexManager.getCollectionParents(e,l).next((m=>U.forEach(m,(p=>{const y=(function(w,E){return new vu(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,r,a).next((b=>{b.forEach(((w,E)=>{u=u.insert(w,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((u=>{l.forEach(((p,y)=>{const b=y.getKey();u.get(b)===null&&(u=u.insert(b,_t.newInvalidDocument(b)))}));let m=Mc();return u.forEach(((p,y)=>{const b=l.get(p);b!==void 0&&Yc(b.mutation,y,Sn.empty(),nt.now()),_u(t,y)&&(m=m.insert(p,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return U.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:pn(a.createTime)}})(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:vE(a.bundledQuery),readTime:pn(a.readTime)}})(t)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.overlays=new ut(oe.comparator),this.Lr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Fr();return U.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),U.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){const a=Fr(),l=t.length+1,u=new oe(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>r&&a.set(p.getKey(),p)}return U.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new ut(((y,b)=>y-b));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let b=l.get(y.largestBatchId);b===null&&(b=Fr(),l=l.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const m=Fr(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,b)=>m.set(y,b))),!(m.size()>=a)););return U.resolve(m)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new n0(t,r));let l=this.Lr.get(t);l===void 0&&(l=Me(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this.kr=new st(Xt.Kr),this.qr=new st(Xt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Xt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Xt(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new oe(new Je([])),r=new Xt(t,e),a=new Xt(t,e+1),l=[];return this.qr.forEachInRange([r,a],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new oe(new Je([])),r=new Xt(t,e),a=new Xt(t,e+1);let l=Me();return this.qr.forEachInRange([r,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Xt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Xt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return oe.comparator(e.key,t.key)||Ie(e.Hr,t.Hr)}static Ur(e,t){return Ie(e.Hr,t.Hr)||oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new st(Xt.Kr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new e0(l,t,r,a);this.mutationQueue.push(u);for(const m of a)this.Jr=this.Jr.add(new Xt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return U.resolve(u)}lookupMutationBatch(e,t){return U.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return U.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?ba:this.Yn-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Xt(t,0),a=new Xt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(u=>{const m=this.Zr(u.Hr);l.push(m)})),U.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new st(Ie);return t.forEach((a=>{const l=new Xt(a,0),u=new Xt(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(m=>{r=r.add(m.Hr)}))})),U.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;oe.isDocumentKey(l)||(l=l.child(""));const u=new Xt(new oe(l),0);let m=new st(Ie);return this.Jr.forEachWhile((p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===a&&(m=m.add(p.Hr)),!0)}),u),U.resolve(this.Yr(m))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){ve(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return U.forEach(t.mutations,(a=>{const l=new Xt(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Xt(t,0),a=this.Jr.firstAfterOrEqual(r);return U.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.ti=e,this.docs=(function(){return new ut(oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(t))}getEntries(e,t){let r=Pn();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():_t.newInvalidDocument(a))})),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Pn();const u=t.path,m=new oe(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:b}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||qp(l1(b),r)<=0||(a.has(b.key)||_u(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return U.resolve(l)}getAllFromCollectionGroup(e,t,r,a){he(9500)}ni(e,t){return U.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new SC(this)}getSize(e){return U.resolve(this.size)}}class SC extends CE{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),U.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.persistence=e,this.ri=new Ts((t=>Ca(t)),xu),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.ii=0,this.si=new o0,this.targetCount=0,this.oi=ja._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),U.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ja(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.lr(t),U.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((u,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),U.waitFor(l).next((()=>a))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),U.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),U.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,t){this._i={},this.overlays={},this.ai=new Tn(0),this.ui=!1,this.ui=!0,this.ci=new wC,this.referenceDelegate=e(this),this.li=new AC(this),this.indexManager=new dC,this.remoteDocumentCache=(function(a){return new TC(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new yE(t),this.Pi=new bC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _C,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new EC(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){te("MemoryPersistence","Starting transaction:",e);const a=new NC(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return U.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class NC extends u1{constructor(e){super(),this.currentSequenceNumber=e}}class bf{constructor(e){this.persistence=e,this.Ri=new o0,this.Ai=null}static Vi(e){return new bf(e)}get di(){if(this.Ai)return this.Ai;throw he(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.di,(r=>{const a=oe.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Ee.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return U.or([()=>U.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Gh{constructor(e,t){this.persistence=e,this.fi=new Ts((r=>dn(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=IE(this,t)}static Vi(e,t){return new Gh(e,t)}Ti(){}Ii(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return U.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?U.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((m=>{m||(r++,l.removeEntry(u,Ee.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),U.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vh(e.data.value)),t}wr(e,t,r){return U.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return U.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.serializer=e}k(e,t,r,a){const l=new of("createOrUpgrade",t);r<1&&a>=1&&((function(p){p.createObjectStore(yu)})(e),(function(p){p.createObjectStore(tu,{keyPath:zN}),p.createObjectStore(mr,{keyPath:zb,autoIncrement:!0}).createIndex(va,Bb,{unique:!0}),p.createObjectStore(Wo)})(e),R_(e),(function(p){p.createObjectStore(ma)})(e));let u=U.resolve();return r<3&&a>=3&&(r!==0&&((function(p){p.deleteObjectStore(Zo),p.deleteObjectStore(Jo),p.deleteObjectStore(_a)})(e),R_(e)),u=u.next((()=>(function(p){const y=p.store(_a),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return y.put(Vh,b)})(l)))),r<4&&a>=4&&(r!==0&&(u=u.next((()=>(function(p,y){return y.store(mr).H().next((w=>{p.deleteObjectStore(mr),p.createObjectStore(mr,{keyPath:zb,autoIncrement:!0}).createIndex(va,Bb,{unique:!0});const E=y.store(mr),j=w.map((L=>E.put(L)));return U.waitFor(j)}))})(e,l)))),u=u.next((()=>{(function(p){p.createObjectStore(el,{keyPath:$N})})(e)}))),r<5&&a>=5&&(u=u.next((()=>this.gi(l)))),r<6&&a>=6&&(u=u.next((()=>((function(p){p.createObjectStore(nu)})(e),this.pi(l))))),r<7&&a>=7&&(u=u.next((()=>this.yi(l)))),r<8&&a>=8&&(u=u.next((()=>this.wi(e,l)))),r<9&&a>=9&&(u=u.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(u=u.next((()=>this.bi(l)))),r<11&&a>=11&&(u=u.next((()=>{(function(p){p.createObjectStore(cf,{keyPath:XN})})(e),(function(p){p.createObjectStore(uf,{keyPath:WN})})(e)}))),r<12&&a>=12&&(u=u.next((()=>{(function(p){const y=p.createObjectStore(df,{keyPath:sI});y.createIndex(dp,iI,{unique:!1}),y.createIndex(x1,aI,{unique:!1})})(e)}))),r<13&&a>=13&&(u=u.next((()=>(function(p){const y=p.createObjectStore(Dh,{keyPath:qN});y.createIndex(yh,FN),y.createIndex(m1,GN)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(ma)))),r<14&&a>=14&&(u=u.next((()=>this.Di(e,l)))),r<15&&a>=15&&(u=u.next((()=>(function(p){p.createObjectStore(Hp,{keyPath:JN,autoIncrement:!0}).createIndex(up,ZN,{unique:!1}),p.createObjectStore(Fc,{keyPath:eI}).createIndex(p1,tI,{unique:!1}),p.createObjectStore(Gc,{keyPath:nI}).createIndex(y1,rI,{unique:!1})})(e)))),r<16&&a>=16&&(u=u.next((()=>{t.objectStore(Fc).clear()})).next((()=>{t.objectStore(Gc).clear()}))),r<17&&a>=17&&(u=u.next((()=>{(function(p){p.createObjectStore(Kp,{keyPath:oI})})(e)}))),r<18&&a>=18&&Gw()&&(u=u.next((()=>{t.objectStore(Fc).clear()})).next((()=>{t.objectStore(Gc).clear()}))),u}pi(e){let t=0;return e.store(ma).ee(((r,a)=>{t+=Fh(a)})).next((()=>{const r={byteSize:t};return e.store(nu).put(cp,r)}))}gi(e){const t=e.store(tu),r=e.store(mr);return t.H().next((a=>U.forEach(a,(l=>{const u=IDBKeyRange.bound([l.userId,ba],[l.userId,l.lastAcknowledgedBatchId]);return r.H(va,u).next((m=>U.forEach(m,(p=>{ve(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const y=pa(this.serializer,p);return EE(e,l.userId,y).next((()=>{}))}))))}))))}yi(e){const t=e.store(Zo),r=e.store(ma);return e.store(_a).get(Vh).next((a=>{const l=[];return r.ee(((u,m)=>{const p=new Je(u),y=(function(w){return[0,dn(w)]})(p);l.push(t.get(y).next((b=>b?U.resolve():(w=>t.put({targetId:0,path:dn(w),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>U.waitFor(l)))}))}wi(e,t){e.createObjectStore(ru,{keyPath:YN});const r=t.store(ru),a=new a0,l=u=>{if(a.add(u)){const m=u.lastSegment(),p=u.popLast();return r.put({collectionId:m,parent:dn(p)})}};return t.store(ma).ee({Y:!0},((u,m)=>{const p=new Je(u);return l(p.popLast())})).next((()=>t.store(Wo).ee({Y:!0},(([u,m,p],y)=>{const b=qr(m);return l(b.popLast())}))))}bi(e){const t=e.store(Jo);return t.ee(((r,a)=>{const l=Lc(a),u=xE(this.serializer,l);return t.put(u)}))}Si(e,t){const r=t.store(ma),a=[];return r.ee(((l,u)=>{const m=t.store(Dh),p=(function(w){return w.document?new oe(Je.fromString(w.document.name).popFirst(5)):w.noDocument?oe.fromSegments(w.noDocument.path):w.unknownDocument?oe.fromSegments(w.unknownDocument.path):he(36783)})(u).path.toArray(),y={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(m.put(y))})).next((()=>U.waitFor(a)))}Di(e,t){const r=t.store(mr),a=RE(this.serializer),l=new l0(bf.Vi,this.serializer.yt);return r.H().next((u=>{const m=new Map;return u.forEach((p=>{let y=m.get(p.userId)??Me();pa(this.serializer,p).keys().forEach((b=>y=y.add(b))),m.set(p.userId,y)})),U.forEach(m,((p,y)=>{const b=new on(y),w=xf.wt(this.serializer,b),E=l.getIndexManager(b),j=vf.wt(b,this.serializer,E,l.referenceDelegate);return new kE(a,j,w,E).recalculateAndSaveOverlaysForDocumentKeys(new hp(t,Tn.ce),p).next()}))}))}}function R_(i){i.createObjectStore(Zo,{keyPath:KN}).createIndex(Gp,QN,{unique:!0}),i.createObjectStore(Jo,{keyPath:"targetId"}).createIndex(g1,HN,{unique:!0}),i.createObjectStore(_a)}const ci="IndexedDbPersistence",Gg=18e5,Hg=5e3,Kg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",CC="main";class c0{constructor(e,t,r,a,l,u,m,p,y,b,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=l,this.window=u,this.document=m,this.Fi=y,this.Mi=b,this.xi=w,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=E=>Promise.resolve(),!c0.v())throw new se(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pC(this,a),this.Ki=t+CC,this.serializer=new yE(p),this.qi=new Ei(this.Ki,this.xi,new IC(this.serializer)),this.ci=new iC,this.li=new fC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=RE(this.serializer),this.Pi=new sC,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,b===!1&&Nt(ci,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(X.FAILED_PRECONDITION,Kg);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Tn(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>uh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Ri(e))return te(ci,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te(ci,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return kc(e).get(Co).next((t=>U.resolve(this.Xi(t))))}Yi(e){return uh(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Gg)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Ht(t,el);return r.H().next((a=>{const l=this.ns(a,Gg),u=a.filter((m=>l.indexOf(m)===-1));return U.forEach(u,(m=>r.delete(m.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?U.resolve(!0):kc(e).get(Co).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Hg)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new se(X.FAILED_PRECONDITION,Kg);return!1}}return!(!this.networkEnabled||!this.inForeground)||uh(e).H().next((r=>this.ns(r,Hg).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,m=this.networkEnabled===a.networkEnabled;if(l||u&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&te(ci,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[yu,el],(e=>{const t=new hp(e,Tn.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>uh(e).H().next((t=>this.ns(t,Gg).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return vf.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hC(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return xf.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){te(ci,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?uI:p===17?w1:p===16?cI:p===15?Qp:p===14?_1:p===13?b1:p===12?lI:p===11?v1:void he(60245)})(this.xi);let u;return this.qi.runTransaction(e,a,l,(m=>(u=new hp(m,this.ai?this.ai.next():Tn.ce),t==="readwrite-primary"?this.ji(u).next((p=>!!p||this.Hi(u))).next((p=>{if(!p)throw Nt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new se(X.FAILED_PRECONDITION,c1);return r(u)})).next((p=>this.Zi(u).next((()=>p)))):this.Ps(u).next((()=>r(u)))))).then((m=>(u.raiseOnCommittedEvent(),m)))}Ps(e){return kc(e).get(Co).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Hg)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new se(X.FAILED_PRECONDITION,Kg)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kc(e).put(Co,t)}static v(){return Ei.v()}Ji(e){const t=kc(e);return t.get(Co).next((r=>this.Xi(r)?(te(ci,"Releasing primary lease."),t.delete(Co)):U.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Nt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;Fw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var t;try{const r=((t=this.Ui)==null?void 0:t.getItem(this.rs(e)))!==null;return te(ci,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Nt(ci,"Failed to get zombied client id.",r),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Nt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kc(i){return Ht(i,yu)}function uh(i){return Ht(i,el)}function jE(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=Me(),a=Me();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new u0(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Fw()?8:d1(Ft())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new RC;return this.ys(e,t,u).next((m=>{if(l.result=m,this.As)return this.ws(e,t,u,m.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(Mo()<=Be.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(Mo()<=Be.DEBUG&&te("QueryEngine","Query:",Po(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(Mo()<=Be.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(t))):U.resolve())}gs(e,t){if(e_(t))return U.resolve(null);let r=Un(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=vp(t,null,"F"),r=Un(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const u=Me(...l);return this.fs.getDocuments(e,u).next((m=>this.indexManager.getMinOffset(e,r).next((p=>{const y=this.bs(t,m);return this.Ss(t,y,u,p.readTime)?this.gs(e,vp(t,null,"F")):this.Ds(e,y,t,p)}))))})))))}ps(e,t,r,a){return e_(t)||a.isEqual(Ee.min())?U.resolve(null):this.fs.getDocuments(e,r).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,r,a)?U.resolve(null):(Mo()<=Be.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Po(t)),this.Ds(e,u,t,o1(a,Xo)).next((m=>m)))}))}bs(e,t){let r=new st(G1(e));return t.forEach(((a,l)=>{_u(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return Mo()<=Be.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Po(t)),this.fs.getDocumentsMatchingQuery(e,t,zn.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="LocalStore",kC=3e8;class jC{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new ut(Ie),this.Fs=new Ts((l=>Ca(l)),xu),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kE(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function VE(i,e,t,r){return new jC(i,e,t,r)}async function OE(i,e){const t=ge(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const u=[],m=[];let p=Me();for(const y of a){u.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}for(const y of l){m.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}return t.localDocuments.getDocuments(r,p).next((y=>({Ns:y,removedBatchIds:u,addedBatchIds:m})))}))}))}function DC(i,e){const t=ge(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(m,p,y,b){const w=y.batch,E=w.keys();let j=U.resolve();return E.forEach((L=>{j=j.next((()=>b.getEntry(p,L))).next((F=>{const Q=y.docVersions.get(L);ve(Q!==null,48541),F.version.compareTo(Q)<0&&(w.applyToRemoteDocument(F,y),F.isValidDocument()&&(F.setReadTime(y.commitVersion),b.addEntry(F)))}))})),j.next((()=>m.mutationQueue.removeMutationBatch(p,w)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let p=Me();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function ME(i){const e=ge(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function VC(i,e){const t=ge(i),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const m=[];e.targetChanges.forEach(((b,w)=>{const E=a.get(w);if(!E)return;m.push(t.li.removeMatchingKeys(l,b.removedDocuments,w).next((()=>t.li.addMatchingKeys(l,b.addedDocuments,w))));let j=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?j=j.withResumeToken(It.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):b.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(b.resumeToken,r)),a=a.insert(w,j),(function(F,Q,ie){return F.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=kC?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(E,j,b)&&m.push(t.li.updateTargetData(l,j))}));let p=Pn(),y=Me();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),m.push(OC(l,u,e.documentUpdates).next((b=>{p=b.Bs,y=b.Ls}))),!r.isEqual(Ee.min())){const b=t.li.getLastRemoteSnapshotVersion(l).next((w=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));m.push(b)}return U.waitFor(m).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.vs=a,l)))}function OC(i,e,t){let r=Me(),a=Me();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let u=Pn();return t.forEach(((m,p)=>{const y=l.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(m)),p.isNoDocument()&&p.version.isEqual(Ee.min())?(e.removeEntry(m,p.readTime),u=u.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(m,p)):te(d0,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)})),{Bs:u,Ls:a}}))}function MC(i,e){const t=ge(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ba),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Hh(i,e){const t=ge(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,U.resolve(a)):t.li.allocateTargetId(r).next((u=>(a=new ms(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function ll(i,e,t){const r=ge(i),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Ri(u))throw u;te(d0,`Failed to update sequence numbers for target ${e}: ${u}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function Np(i,e,t){const r=ge(i);let a=Ee.min(),l=Me();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,y,b){const w=ge(p),E=w.Fs.get(b);return E!==void 0?U.resolve(w.vs.get(E)):w.li.getTargetData(y,b)})(r,u,Un(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(u,m.targetId).next((p=>{l=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?a:Ee.min(),t?l:Me()))).next((m=>(UE(r,F1(e),m),{documents:m,ks:l})))))}function PE(i,e){const t=ge(i),r=ge(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((u=>u?u.target:null))))}function LE(i,e){const t=ge(i),r=t.Ms.get(e)||Ee.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,o1(r,Xo),Number.MAX_SAFE_INTEGER))).then((a=>(UE(t,e,a),a)))}function UE(i,e,t){let r=i.Ms.get(e)||Ee.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.Ms.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="firestore_clients";function k_(i,e){return`${zE}_${i}_${e}`}const BE="firestore_mutations";function j_(i,e,t){let r=`${BE}_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const qE="firestore_targets";function Qg(i,e){return`${qE}_${i}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="SharedClientState";class Kh{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new se(a.error.code,a.error.message))),u?new Kh(e,t,a.state,l):(Nt(Br,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $c{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new se(r.error.code,r.error.message))),l?new $c(e,r.state,a):(Nt(Br,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=Jp();for(let u=0;a&&u<r.activeTargetIds.length;++u)a=h1(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return a?new Qh(e,l):(Nt(Br,`Failed to parse client data for instance '${e}': ${t}`),null)}}class h0{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new h0(t.clientId,t.onlineState):(Nt(Br,`Failed to parse online state: ${e}`),null)}}class Ip{constructor(){this.activeTargetIds=Jp()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yg{constructor(e,t,r,a,l){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new ut(Ie),this.started=!1,this.Zs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=k_(this.persistenceKey,this.zs),this.Ys=(function(p){return`firestore_sequence_number_${p}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Ip),this.eo=new RegExp(`^${zE}_${u}_([^_]*)$`),this.no=new RegExp(`^${BE}_${u}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${qE}_${u}_(\\d+)$`),this.io=(function(p){return`firestore_online_state_${p}`})(this.persistenceKey),this.so=(function(p){return`firestore_bundle_loaded_v2_${p}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(k_(this.persistenceKey,r));if(a){const l=Qh.$s(r,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Qg(this.persistenceKey,e));if(a){const l=$c.$s(e,a);l&&(r=l.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return te(Br,"READ",e,t),t}setItem(e,t){te(Br,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){te(Br,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(te(Br,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Nt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(l){let u=Tn.ce;if(l!=null)try{const m=JSON.parse(l);ve(typeof m=="number",30636,{yo:l}),u=m}catch(m){Nt(Br,"Failed to read sequence number from WebStorage",m)}return u})(t.newValue);r!==Tn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new Kh(this.currentUser,e,t,r),l=j_(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=j_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=Qg(this.persistenceKey,e),l=new $c(e,t,r);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return Qh.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Kh.$s(new on(l),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return $c.$s(a,t)}_o(e){return h0.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);te(Br,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(r),u=[],m=[];return l.forEach((p=>{a.has(p)||u.push(p)})),a.forEach((p=>{l.has(p)||m.push(p)})),this.syncEngine.Co(u,m).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=Jp();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class FE{constructor(){this.vo=new Ip,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ip,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="ConnectivityMonitor";class V_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){te(D_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){te(D_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dh=null;function Cp(){return dh===null?dh=(function(){return 268435456+Math.round(2147483648*Math.random())})():dh++,"0x"+dh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="RestConnection",LC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class UC{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===Oh?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const u=Cp(),m=this.Qo(e,t.toUriEncodedString());te($g,`Sending RPC '${e}' ${u}:`,m,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:y}=new URL(m),b=fl(y);return this.zo(e,m,p,r,b).then((w=>(te($g,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw Jc($g,`RPC '${e}' ${u} failed with error: `,w,"url: ",m,"request:",r),w}))}jo(e,t,r,a,l,u){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=LC[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection",jc=(i,e,t)=>{i.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Fo extends UC{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Fo.c_){const e=t1();jc(e,e1.STAT_EVENT,(t=>{t.stat===ap.PROXY?te(an,"STAT_EVENT: detected buffering proxy"):t.stat===ap.NOPROXY&&te(an,"STAT_EVENT: detected no buffering proxy")})),Fo.c_=!0}}zo(e,t,r,a,l){const u=Cp();return new Promise(((m,p)=>{const y=new Jw;y.setWithCredentials(!0),y.listenOnce(Zw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case mh.NO_ERROR:const w=y.getResponseJson();te(an,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),m(w);break;case mh.TIMEOUT:te(an,`RPC '${e}' ${u} timed out`),p(new se(X.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const E=y.getStatus();if(te(an,`RPC '${e}' ${u} failed with status:`,E,"response text:",y.getResponseText()),E>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const L=j==null?void 0:j.error;if(L&&L.status&&L.message){const F=(function(ie){const ne=ie.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ne)>=0?ne:X.UNKNOWN})(L.status);p(new se(F,L.message))}else p(new se(X.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new se(X.UNAVAILABLE,"Connection failed."));break;default:he(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{te(an,`RPC '${e}' ${u} completed.`)}}));const b=JSON.stringify(a);te(an,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",b,r,15)}))}T_(e,t,r){const a=Cp(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const y=l.join("");te(an,`Creating RPC '${e}' stream ${a}: ${y}`,m);const b=u.createWebChannel(y,m);this.I_(b);let w=!1,E=!1;const j=new zC({Ho:L=>{E?te(an,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(w||(te(an,`Opening RPC '${e}' stream ${a} transport.`),b.open(),w=!0),te(an,`RPC '${e}' stream ${a} sending:`,L),b.send(L))},Jo:()=>b.close()});return jc(b,Oc.EventType.OPEN,(()=>{E||(te(an,`RPC '${e}' stream ${a} transport opened.`),j.i_())})),jc(b,Oc.EventType.CLOSE,(()=>{E||(E=!0,te(an,`RPC '${e}' stream ${a} transport closed`),j.o_(),this.E_(b))})),jc(b,Oc.EventType.ERROR,(L=>{E||(E=!0,Jc(an,`RPC '${e}' stream ${a} transport errored. Name:`,L.name,"Message:",L.message),j.o_(new se(X.UNAVAILABLE,"The operation could not be completed")))})),jc(b,Oc.EventType.MESSAGE,(L=>{var F;if(!E){const Q=L.data[0];ve(!!Q,16349);const ie=Q,ne=(ie==null?void 0:ie.error)||((F=ie[0])==null?void 0:F.error);if(ne){te(an,`RPC '${e}' stream ${a} received error:`,ne);const re=ne.status;let xe=(function(k){const N=Lt[k];if(N!==void 0)return nE(N)})(re),be=ne.message;xe===void 0&&(xe=X.INTERNAL,be="Unknown error status: "+re+" with message "+ne.message),E=!0,j.o_(new se(xe,be)),b.close()}else te(an,`RPC '${e}' stream ${a} received:`,Q),j.__(Q)}})),Fo.u_(),setTimeout((()=>{j.s_()}),0),j}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return n1()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(i){return new Fo(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(){return typeof window<"u"?window:null}function Th(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(i){return new QI(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fo.c_=!1;class HE{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="PersistentStream";class KE{constructor(e,t,r,a,l,u,m,p){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new HE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Nt(t.toString()),Nt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new se(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return te(O_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(te(O_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qC extends KE{constructor(e,t,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=XI(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ee.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ee.min():u.readTime?pn(u.readTime):Ee.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=wp(this.serializer),t.addTarget=(function(l,u){let m;const p=u.target;if(m=Ph(p)?{documents:uE(l,p)}:{query:dE(l,p).ft},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=iE(l,u.resumeToken);const y=bp(l,u.expectedCount);y!==null&&(m.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ee.min())>0){m.readTime=ol(l,u.snapshotVersion.toTimestamp());const y=bp(l,u.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const r=JI(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=wp(this.serializer),t.removeTarget=e,this.K_(t)}}class FC extends KE{constructor(e,t,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=WI(e.writeResults,e.commitTime),r=pn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=wp(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>zh(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{}class HC extends GC{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new se(X.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,_p(t,r),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(X.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.jo(e,_p(t,r),a,u,m,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new se(X.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function KC(i,e,t,r){return new HC(i,e,t,r)}class QC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Nt(t),this.aa=!1):te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="RemoteStore";class YC{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{r.enqueueAndForget((async()=>{Ma(this)&&(te(Da,"Restarting streams for network reachability change."),await(async function(p){const y=ge(p);y.Ea.add(4),await Tu(y),y.Va.set("Unknown"),y.Ea.delete(4),await wf(y)})(this))}))})),this.Va=new QC(r,a)}}async function wf(i){if(Ma(i))for(const e of i.Ra)await e(!0)}async function Tu(i){for(const e of i.Ra)await e(!1)}function Ef(i,e){const t=ge(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),g0(t)?m0(t):xl(t).O_()&&f0(t,e))}function cl(i,e){const t=ge(i),r=xl(t);t.Ia.delete(e),r.O_()&&QE(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ma(t)&&t.Va.set("Unknown"))}function f0(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xl(i).Z_(e)}function QE(i,e){i.da.$e(e),xl(i).X_(e)}function m0(i){i.da=new FI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),xl(i).start(),i.Va.ua()}function g0(i){return Ma(i)&&!xl(i).x_()&&i.Ia.size>0}function Ma(i){return ge(i).Ea.size===0}function YE(i){i.da=void 0}async function $C(i){i.Va.set("Online")}async function XC(i){i.Ia.forEach(((e,t)=>{f0(i,e)}))}async function WC(i,e){YE(i),g0(i)?(i.Va.ha(e),m0(i)):i.Va.set("Unknown")}async function JC(i,e,t){if(i.Va.set("Online"),e instanceof sE&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const m of l.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,u),a.Ia.delete(m),a.da.removeTarget(m))})(i,e)}catch(r){te(Da,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yh(i,r)}else if(e instanceof wh?i.da.Xe(e):e instanceof rE?i.da.st(e):i.da.tt(e),!t.isEqual(Ee.min()))try{const r=await ME(i.localStore);t.compareTo(r)>=0&&await(function(l,u){const m=l.da.Tt(u);return m.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=l.Ia.get(y);b&&l.Ia.set(y,b.withResumeToken(p.resumeToken,u))}})),m.targetMismatches.forEach(((p,y)=>{const b=l.Ia.get(p);if(!b)return;l.Ia.set(p,b.withResumeToken(It.EMPTY_BYTE_STRING,b.snapshotVersion)),QE(l,p);const w=new ms(b.target,p,y,b.sequenceNumber);f0(l,w)})),l.remoteSyncer.applyRemoteEvent(m)})(i,t)}catch(r){te(Da,"Failed to raise snapshot:",r),await Yh(i,r)}}async function Yh(i,e,t){if(!Ri(e))throw e;i.Ea.add(1),await Tu(i),i.Va.set("Offline"),t||(t=()=>ME(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{te(Da,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await wf(i)}))}function $E(i,e){return e().catch((t=>Yh(i,t,e)))}async function yl(i){const e=ge(i),t=Ni(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ba;for(;ZC(e);)try{const a=await MC(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,eR(e,a)}catch(a){await Yh(e,a)}XE(e)&&WE(e)}function ZC(i){return Ma(i)&&i.Ta.length<10}function eR(i,e){i.Ta.push(e);const t=Ni(i);t.O_()&&t.Y_&&t.ea(e.mutations)}function XE(i){return Ma(i)&&!Ni(i).x_()&&i.Ta.length>0}function WE(i){Ni(i).start()}async function tR(i){Ni(i).ra()}async function nR(i){const e=Ni(i);for(const t of i.Ta)e.ea(t.mutations)}async function rR(i,e,t){const r=i.Ta.shift(),a=t0.from(r,e,t);await $E(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await yl(i)}async function sR(i,e){e&&Ni(i).Y_&&await(async function(r,a){if((function(u){return zI(u)&&u!==X.ABORTED})(a.code)){const l=r.Ta.shift();Ni(r).B_(),await $E(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await yl(r)}})(i,e),XE(i)&&WE(i)}async function M_(i,e){const t=ge(i);t.asyncQueue.verifyOperationInProgress(),te(Da,"RemoteStore received new credentials");const r=Ma(t);t.Ea.add(3),await Tu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await wf(t)}async function Rp(i,e){const t=ge(i);e?(t.Ea.delete(2),await wf(t)):e||(t.Ea.add(2),await Tu(t),t.Va.set("Unknown"))}function xl(i){return i.ma||(i.ma=(function(t,r,a){const l=ge(t);return l.sa(),new qC(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:$C.bind(null,i),Yo:XC.bind(null,i),t_:WC.bind(null,i),J_:JC.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),g0(i)?m0(i):i.Va.set("Unknown")):(await i.ma.stop(),YE(i))}))),i.ma}function Ni(i){return i.fa||(i.fa=(function(t,r,a){const l=ge(t);return l.sa(),new FC(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:tR.bind(null,i),t_:sR.bind(null,i),ta:nR.bind(null,i),na:rR.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await yl(i)):(await i.fa.stop(),i.Ta.length>0&&(te(Da,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const u=Date.now()+r,m=new p0(e,t,u,a,l);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function y0(i,e){if(Nt("AsyncQueue",`${e}: ${i}`),Ri(i))return new se(X.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{static emptySet(e){return new Go(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||oe.comparator(t.key,r.key):(t,r)=>oe.comparator(t.key,r.key),this.keyedMap=Mc(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Go;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.ga=new ut(oe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):he(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ul{constructor(e,t,r,a,l,u,m,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,a,l){const u=[];return t.forEach((m=>{u.push({type:0,doc:m})})),new ul(e,t,Go.emptySet(t),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class aR{constructor(){this.queries=L_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=ge(t),l=a.queries;a.queries=L_(),l.forEach(((u,m)=>{for(const p of m.ba)p.onError(r)}))})(this,new se(X.ABORTED,"Firestore shutting down"))}}function L_(){return new Ts((i=>q1(i)),mf)}async function x0(i,e){const t=ge(i);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new iR,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const m=y0(u,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&b0(t)}async function v0(i,e){const t=ge(i),r=e.query;let a=3;const l=t.queries.get(r);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function oR(i,e){const t=ge(i);let r=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const m of u.ba)m.Fa(a)&&(r=!0);u.wa=a}}r&&b0(t)}function lR(i,e,t){const r=ge(i),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function b0(i){i.Ca.forEach((e=>{e.next()}))}var kp,U_;(U_=kp||(kp={})).Ma="default",U_.Cache="cache";class _0{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new ul(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.key=e}}class ZE{constructor(e){this.key=e}}class cR{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Me(),this.mutatedKeys=Me(),this.eu=G1(e),this.tu=new Go(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new P_,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,m=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((b,w)=>{const E=a.get(b),j=_u(this.query,w)?w:null,L=!!E&&this.mutatedKeys.has(E.key),F=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let Q=!1;E&&j?E.data.isEqual(j.data)?L!==F&&(r.track({type:3,doc:j}),Q=!0):this.su(E,j)||(r.track({type:2,doc:j}),Q=!0,(p&&this.eu(j,p)>0||y&&this.eu(j,y)<0)&&(m=!0)):!E&&j?(r.track({type:0,doc:j}),Q=!0):E&&!j&&(r.track({type:1,doc:E}),Q=!0,(p||y)&&(m=!0)),Q&&(j?(u=u.add(j),l=F?l.add(b):l.delete(b)):(u=u.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const b=this.query.limitType==="F"?u.last():u.first();u=u.delete(b.key),l=l.delete(b.key),r.track({type:1,doc:b})}return{tu:u,iu:r,Ss:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((b,w)=>(function(j,L){const F=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{Vt:Q})}};return F(j)-F(L)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(r),a=a??!1;const m=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,y=p!==this.Xa;return this.Xa=p,u.length!==0||y?{snapshot:new ul(this.query,e.tu,l,u,e.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new P_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Me(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new ZE(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new JE(r))})),t}cu(e){this.Za=e.ks,this.Ya=Me();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ul.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const vl="SyncEngine";class uR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class dR{constructor(e){this.key=e,this.hu=!1}}class hR{constructor(e,t,r,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Ts((m=>q1(m)),mf),this.Iu=new Map,this.Eu=new Set,this.Ru=new ut(oe.comparator),this.Au=new Map,this.Vu=new o0,this.du={},this.mu=new Map,this.fu=ja.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fR(i,e,t=!0){const r=Tf(i);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await eT(r,e,t,!0),a}async function mR(i,e){const t=Tf(i);await eT(t,e,!0,!1)}async function eT(i,e,t,r){const a=await Hh(i.localStore,Un(e)),l=a.targetId,u=i.sharedClientState.addLocalQueryTarget(l,t);let m;return r&&(m=await w0(i,e,l,u==="current",a.resumeToken)),i.isPrimaryClient&&t&&Ef(i.remoteStore,a),m}async function w0(i,e,t,r,a){i.pu=(w,E,j)=>(async function(F,Q,ie,ne){let re=Q.view.ru(ie);re.Ss&&(re=await Np(F.localStore,Q.query,!1).then((({documents:k})=>Q.view.ru(k,re))));const xe=ne&&ne.targetChanges.get(Q.targetId),be=ne&&ne.targetMismatches.get(Q.targetId)!=null,ye=Q.view.applyChanges(re,F.isPrimaryClient,xe,be);return jp(F,Q.targetId,ye.au),ye.snapshot})(i,w,E,j);const l=await Np(i.localStore,e,!0),u=new cR(e,l.ks),m=u.ru(l.documents),p=Eu.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),y=u.applyChanges(m,i.isPrimaryClient,p);jp(i,t,y.au);const b=new uR(e,t,u);return i.Tu.set(e,b),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),y.snapshot}async function gR(i,e,t){const r=ge(i),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((u=>!mf(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await ll(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&cl(r.remoteStore,a.targetId),dl(r,a.targetId)})).catch(Ci)):(dl(r,a.targetId),await ll(r.localStore,a.targetId,!0))}async function pR(i,e){const t=ge(i),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),cl(t.remoteStore,r.targetId))}async function yR(i,e,t){const r=A0(i);try{const a=await(function(u,m){const p=ge(u),y=nt.now(),b=m.reduce(((j,L)=>j.add(L.key)),Me());let w,E;return p.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let L=Pn(),F=Me();return p.xs.getEntries(j,b).next((Q=>{L=Q,L.forEach(((ie,ne)=>{ne.isValidDocument()||(F=F.add(ie))}))})).next((()=>p.localDocuments.getOverlayedDocuments(j,L))).next((Q=>{w=Q;const ie=[];for(const ne of m){const re=LI(ne,w.get(ne.key).overlayedDocument);re!=null&&ie.push(new Ss(ne.key,re,j1(re.value.mapValue),un.exists(!0)))}return p.mutationQueue.addMutationBatch(j,y,ie,m)})).next((Q=>{E=Q;const ie=Q.applyToLocalDocumentSet(w,F);return p.documentOverlayCache.saveOverlays(j,Q.batchId,ie)}))})).then((()=>({batchId:E.batchId,changes:K1(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,m,p){let y=u.du[u.currentUser.toKey()];y||(y=new ut(Ie)),y=y.insert(m,p),u.du[u.currentUser.toKey()]=y})(r,a.batchId,t),await ji(r,a.changes),await yl(r.remoteStore)}catch(a){const l=y0(a,"Failed to persist write");t.reject(l)}}async function tT(i,e){const t=ge(i);try{const r=await VC(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(ve(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?ve(u.hu,14607):a.removedDocuments.size>0&&(ve(u.hu,42227),u.hu=!1))})),await ji(t,r,e)}catch(r){await Ci(r)}}function z_(i,e,t){const r=ge(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,u)=>{const m=u.view.va(e);m.snapshot&&a.push(m.snapshot)})),(function(u,m){const p=ge(u);p.onlineState=m;let y=!1;p.queries.forEach(((b,w)=>{for(const E of w.ba)E.va(m)&&(y=!0)})),y&&b0(p)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xR(i,e,t){const r=ge(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let u=new ut(oe.comparator);u=u.insert(l,_t.newNoDocument(l,Ee.min()));const m=Me().add(l),p=new wu(Ee.min(),new Map,new ut(Ie),u,m);await tT(r,p),r.Ru=r.Ru.remove(l),r.Au.delete(e),S0(r)}else await ll(r.localStore,e,!1).then((()=>dl(r,e,t))).catch(Ci)}async function vR(i,e){const t=ge(i),r=e.batch.batchId;try{const a=await DC(t.localStore,e);T0(t,r,null),E0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ji(t,a)}catch(a){await Ci(a)}}async function bR(i,e,t){const r=ge(i);try{const a=await(function(u,m){const p=ge(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return p.mutationQueue.lookupMutationBatch(y,m).next((w=>(ve(w!==null,37113),b=w.keys(),p.mutationQueue.removeMutationBatch(y,w)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,b,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>p.localDocuments.getDocuments(y,b)))}))})(r.localStore,e);T0(r,e,t),E0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ji(r,a)}catch(a){await Ci(a)}}function E0(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function T0(i,e,t){const r=ge(i);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function dl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((r=>{i.Vu.containsKey(r)||nT(i,r)}))}function nT(i,e){i.Eu.delete(e.path.canonicalString());const t=i.Ru.get(e);t!==null&&(cl(i.remoteStore,t),i.Ru=i.Ru.remove(e),i.Au.delete(t),S0(i))}function jp(i,e,t){for(const r of t)r instanceof JE?(i.Vu.addReference(r.key,e),_R(i,r)):r instanceof ZE?(te(vl,"Document no longer in limbo: "+r.key),i.Vu.removeReference(r.key,e),i.Vu.containsKey(r.key)||nT(i,r.key)):he(19791,{wu:r})}function _R(i,e){const t=e.key,r=t.path.canonicalString();i.Ru.get(t)||i.Eu.has(r)||(te(vl,"New document in limbo: "+t),i.Eu.add(r),S0(i))}function S0(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new oe(Je.fromString(e)),r=i.fu.next();i.Au.set(r,new dR(t)),i.Ru=i.Ru.insert(t,r),Ef(i.remoteStore,new ms(Un(bu(t.path)),r,"TargetPurposeLimboResolution",Tn.ce))}}async function ji(i,e,t){const r=ge(i),a=[],l=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,p)=>{u.push(r.pu(p,e,t).then((y=>{var b;if((y||t)&&r.isPrimaryClient){const w=y?!y.fromCache:(b=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:b.current;r.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){a.push(y);const w=u0.Es(p.targetId,y);l.push(w)}})))})),await Promise.all(u),r.Pu.J_(a),await(async function(p,y){const b=ge(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>U.forEach(y,(E=>U.forEach(E.Ts,(j=>b.persistence.referenceDelegate.addReference(w,E.targetId,j))).next((()=>U.forEach(E.Is,(j=>b.persistence.referenceDelegate.removeReference(w,E.targetId,j)))))))))}catch(w){if(!Ri(w))throw w;te(d0,"Failed to update sequence numbers: "+w)}for(const w of y){const E=w.targetId;if(!w.fromCache){const j=b.vs.get(E),L=j.snapshotVersion,F=j.withLastLimboFreeSnapshotVersion(L);b.vs=b.vs.insert(E,F)}}})(r.localStore,l))}async function wR(i,e){const t=ge(i);if(!t.currentUser.isEqual(e)){te(vl,"User change. New user:",e.toKey());const r=await OE(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((m=>{m.forEach((p=>{p.reject(new se(X.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ji(t,r.Ns)}}function ER(i,e){const t=ge(i),r=t.Au.get(e);if(r&&r.hu)return Me().add(r.key);{let a=Me();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const m=t.Tu.get(u);a=a.unionWith(m.view.nu)}return a}}async function TR(i,e){const t=ge(i),r=await Np(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&jp(t,e.targetId,a.au),a}async function SR(i,e){const t=ge(i);return LE(t.localStore,e).then((r=>ji(t,r)))}async function AR(i,e,t,r){const a=ge(i),l=await(function(m,p){const y=ge(m),b=ge(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",(w=>b.Xn(w,p).next((E=>E?y.localDocuments.getDocuments(w,E):U.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await yl(a.remoteStore):t==="acknowledged"||t==="rejected"?(T0(a,e,r||null),E0(a,e),(function(m,p){ge(ge(m).mutationQueue).nr(p)})(a.localStore,e)):he(6720,"Unknown batchState",{bu:t}),await ji(a,l)):te(vl,"Cannot apply mutation batch with id: "+e)}async function NR(i,e){const t=ge(i);if(Tf(t),A0(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await B_(t,r.toArray());t.gu=!0,await Rp(t.remoteStore,!0);for(const l of a)Ef(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):a=a.then((()=>(dl(t,u),ll(t.localStore,u,!0)))),cl(t.remoteStore,u)})),await a,await B_(t,r),(function(u){const m=ge(u);m.Au.forEach(((p,y)=>{cl(m.remoteStore,y)})),m.Vu.zr(),m.Au=new Map,m.Ru=new ut(oe.comparator)})(t),t.gu=!1,await Rp(t.remoteStore,!1)}}async function B_(i,e,t){const r=ge(i),a=[],l=[];for(const u of e){let m;const p=r.Iu.get(u);if(p&&p.length!==0){m=await Hh(r.localStore,Un(p[0]));for(const y of p){const b=r.Tu.get(y),w=await TR(r,b);w.snapshot&&l.push(w.snapshot)}}else{const y=await PE(r.localStore,u);m=await Hh(r.localStore,y),await w0(r,rT(y),u,!1,m.resumeToken)}a.push(m)}return r.Pu.J_(l),a}function rT(i){return z1(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function IR(i){return(function(t){return ge(ge(t).persistence).hs()})(ge(i).localStore)}async function CR(i,e,t,r){const a=ge(i);if(a.gu)return void te(vl,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await LE(a.localStore,F1(l[0])),m=wu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",It.EMPTY_BYTE_STRING);await ji(a,u,m);break}case"rejected":await ll(a.localStore,e,!0),dl(a,e,r);break;default:he(64155,t)}}async function RR(i,e,t){const r=Tf(i);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){te(vl,"Adding an already active target "+a);continue}const l=await PE(r.localStore,a),u=await Hh(r.localStore,l);await w0(r,rT(l),u.targetId,!1,u.resumeToken),Ef(r.remoteStore,u)}for(const a of t)r.Iu.has(a)&&await ll(r.localStore,a,!1).then((()=>{cl(r.remoteStore,a),dl(r,a)})).catch(Ci)}}function Tf(i){const e=ge(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=tT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ER.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xR.bind(null,e),e.Pu.J_=oR.bind(null,e.eventManager),e.Pu.yu=lR.bind(null,e.eventManager),e}function A0(i){const e=ge(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bR.bind(null,e),e}class uu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_f(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return VE(this.persistence,new DE,e.initialUser,this.serializer)}Cu(e){return new l0(bf.Vi,this.serializer)}Du(e){return new FE}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uu.provider={build:()=>new uu};class kR extends uu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ve(this.persistence.referenceDelegate instanceof Gh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new NE(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new l0((r=>Gh.Vi(r,t)),this.serializer)}}class sT extends uu{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await A0(this.xu.syncEngine),await yl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return VE(this.persistence,new DE,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new NE(r,e.asyncQueue,t)}Mu(e,t){const r=new LN(t,this.persistence);return new PN(e.asyncQueue,r)}Cu(e){const t=jE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new c0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,GE(),Th(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new FE}}class jR extends sT{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Yg&&(this.sharedClientState.syncEngine={So:AR.bind(null,t),Do:CR.bind(null,t),Co:RR.bind(null,t),hs:IR.bind(null,t),bo:SR.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await NR(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=GE();if(!Yg.v(t))throw new se(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class du{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>z_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wR.bind(null,this.syncEngine),await Rp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aR})()}createDatastore(e){const t=_f(e.databaseInfo.databaseId),r=BC(e.databaseInfo);return KC(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,u,m){return new YC(r,a,l,u,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>z_(this.syncEngine,t,0)),(function(){return V_.v()?new V_:new PC})())}createSyncEngine(e,t){return(function(a,l,u,m,p,y,b){const w=new hR(a,l,u,m,p,y);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=ge(a);te(Da,"RemoteStore shutting down."),l.Ea.add(5),await Tu(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}du.provider={build:()=>new du};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Nt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="FirestoreClient";class DR{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=on.UNAUTHENTICATED,this.clientId=Bp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async u=>{te(Ii,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(te(Ii,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=y0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Xg(i,e){i.asyncQueue.verifyOperationInProgress(),te(Ii,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async a=>{r.isEqual(a)||(await OE(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function q_(i,e){i.asyncQueue.verifyOperationInProgress();const t=await VR(i);te(Ii,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>M_(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,a)=>M_(e.remoteStore,a))),i._onlineComponents=e}async function VR(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){te(Ii,"Using user provided OfflineComponentProvider");try{await Xg(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===X.FAILED_PRECONDITION||a.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Jc("Error using user provided cache. Falling back to memory cache: "+t),await Xg(i,new uu)}}else te(Ii,"Using default OfflineComponentProvider"),await Xg(i,new kR(void 0));return i._offlineComponents}async function iT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(te(Ii,"Using user provided OnlineComponentProvider"),await q_(i,i._uninitializedComponentsProvider._online)):(te(Ii,"Using default OnlineComponentProvider"),await q_(i,new du))),i._onlineComponents}function OR(i){return iT(i).then((e=>e.syncEngine))}async function $h(i){const e=await iT(i),t=e.eventManager;return t.onListen=fR.bind(null,e.syncEngine),t.onUnlisten=gR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pR.bind(null,e.syncEngine),t}function MR(i,e,t,r){const a=new N0(r),l=new _0(e,a,t);return i.asyncQueue.enqueueAndForget((async()=>x0(await $h(i),l))),()=>{a.Nu(),i.asyncQueue.enqueueAndForget((async()=>v0(await $h(i),l)))}}function PR(i,e,t={}){const r=new Gr;return i.asyncQueue.enqueueAndForget((async()=>(function(l,u,m,p,y){const b=new N0({next:E=>{b.Nu(),u.enqueueAndForget((()=>v0(l,w)));const j=E.docs.has(m);!j&&E.fromCache?y.reject(new se(X.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&E.fromCache&&p&&p.source==="server"?y.reject(new se(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(E)},error:E=>y.reject(E)}),w=new _0(bu(m.path),b,{includeMetadataChanges:!0,Ka:!0});return x0(l,w)})(await $h(i),i.asyncQueue,e,t,r))),r.promise}function LR(i,e,t={}){const r=new Gr;return i.asyncQueue.enqueueAndForget((async()=>(function(l,u,m,p,y){const b=new N0({next:E=>{b.Nu(),u.enqueueAndForget((()=>v0(l,w))),E.fromCache&&p.source==="server"?y.reject(new se(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(E)},error:E=>y.reject(E)}),w=new _0(m,b,{includeMetadataChanges:!0,Ka:!0});return x0(l,w)})(await $h(i),i.asyncQueue,e,t,r))),r.promise}function UR(i,e){const t=new Gr;return i.asyncQueue.enqueueAndForget((async()=>yR(await OR(i),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="ComponentProvider",F_=new Map;function BR(i,e,t,r,a){return new hI(i,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,aT(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="firestore.googleapis.com",G_=!0;class H_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qR,this.ssl=G_}else this.host=e.host,this.ssl=e.ssl??G_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AE)throw new se(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class I0{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new SN;switch(r.type){case"firstParty":return new IN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=F_.get(t);r&&(te(zR,"Removing Datastore"),F_.delete(t),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pa(this.firestore,e,this._query)}}class wt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(pu(t,wt._jsonSchema))return new wt(e,r||null,new oe(Je.fromString(t.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:Ut("string",wt._jsonSchemaVersion),referencePath:Ut("string")};class Ti extends Pa{constructor(e,t,r){super(e,t,bu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new oe(e))}withConverter(e){return new Ti(this.firestore,e,this._path)}}function Wg(i,e,...t){if(i=Gt(i),i1("collection","path",e),i instanceof I0){const r=Je.fromString(e,...t);return Ob(r),new Ti(i,null,r)}{if(!(i instanceof wt||i instanceof Ti))throw new se(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Je.fromString(e,...t));return Ob(r),new Ti(i.firestore,null,r)}}function Bo(i,e,...t){if(i=Gt(i),arguments.length===1&&(e=Bp.newId()),i1("doc","path",e),i instanceof I0){const r=Je.fromString(e,...t);return Vb(r),new wt(i,null,new oe(r))}{if(!(i instanceof wt||i instanceof Ti))throw new se(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Je.fromString(e,...t));return Vb(r),new wt(i.firestore,i instanceof Ti?i.converter:null,new oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="AsyncQueue";class Q_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new HE(this,"async_queue_retry"),this._c=()=>{const r=Th();r&&te(K_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Th();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Th();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Gr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ri(e))throw e;te(K_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Nt("INTERNAL UNHANDLED ERROR: ",Y_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=p0.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&he(47125,{Pc:Y_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Y_(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class _s extends I0{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new Q_,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Q_(e),this._firestoreClient=void 0,await e}}}function FR(i,e,t){t||(t=Oh);const r=Up(i,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),l=r.getOptions(t);if(Sa(l,e))return a;throw new se(X.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new se(X.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AE)throw new se(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&fl(e.host)&&Bw(e.host),r.initialize({options:e,instanceIdentifier:t})}function Sf(i){if(i._terminated)throw new se(X.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||GR(i),i._firestoreClient}function GR(i){var r,a,l,u;const e=i._freezeSettings(),t=BR(i._databaseId,((r=i._app)==null?void 0:r.options.appId)||"",i._persistenceKey,(a=i._app)==null?void 0:a.options.apiKey,e);i._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new DR(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(p){const y=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(y),_online:y}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tr(It.fromBase64String(e))}catch(t){throw new se(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new tr(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pu(e,tr._jsonSchema))return tr.fromBase64String(e.bytes)}}tr._jsonSchemaVersion="firestore/bytes/1.0",tr._jsonSchema={type:Ut("string",tr._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hr._jsonSchemaVersion}}static fromJSON(e){if(pu(e,Hr._jsonSchema))return new Hr(e.latitude,e.longitude)}}Hr._jsonSchemaVersion="firestore/geoPoint/1.0",Hr._jsonSchema={type:Ut("string",Hr._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pu(e,pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new pr(e.vectorValues);throw new se(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pr._jsonSchemaVersion="firestore/vectorValue/1.0",pr._jsonSchema={type:Ut("string",pr._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=/^__.*__$/;class KR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new pl(e,this.data,t,this.fieldTransforms)}}class oT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{dataSource:i})}}class k0{constructor(e,t,r,a,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new k0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Xh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(lT(this.dataSource)&&HR.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class QR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_f(e)}createContext(e,t,r,a=!1){return new k0({dataSource:e,methodName:t,targetDoc:r,path:xt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Af(i){const e=i._freezeSettings(),t=_f(i._databaseId);return new QR(i._databaseId,!!e.ignoreUndefinedProperties,t)}function cT(i,e,t,r,a,l={}){const u=i.createContext(l.merge||l.mergeFields?2:0,e,t,a);j0("Data must be an object, but it was:",u,r);const m=uT(r,u);let p,y;if(l.merge)p=new Sn(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const b=[];for(const w of l.mergeFields){const E=hl(e,w,t);if(!u.contains(E))throw new se(X.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);fT(b,E)||b.push(E)}p=new Sn(b),y=u.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,y=u.fieldTransforms;return new KR(new cn(m),p,y)}class Nf extends R0{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nf}}function YR(i,e,t,r){const a=i.createContext(1,e,t);j0("Data must be an object, but it was:",a,r);const l=[],u=cn.empty();ki(r,((p,y)=>{const b=hT(e,p,t);y=Gt(y);const w=a.childContextForFieldPath(b);if(y instanceof Nf)l.push(b);else{const E=Su(y,w);E!=null&&(l.push(b),u.set(b,E))}}));const m=new Sn(l);return new oT(u,m,a.fieldTransforms)}function $R(i,e,t,r,a,l){const u=i.createContext(1,e,t),m=[hl(e,r,t)],p=[a];if(l.length%2!=0)throw new se(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)m.push(hl(e,l[E])),p.push(l[E+1]);const y=[],b=cn.empty();for(let E=m.length-1;E>=0;--E)if(!fT(y,m[E])){const j=m[E];let L=p[E];L=Gt(L);const F=u.childContextForFieldPath(j);if(L instanceof Nf)y.push(j);else{const Q=Su(L,F);Q!=null&&(y.push(j),b.set(j,Q))}}const w=new Sn(y);return new oT(b,w,u.fieldTransforms)}function XR(i,e,t,r=!1){return Su(t,i.createContext(r?4:3,e))}function Su(i,e){if(dT(i=Gt(i)))return j0("Unsupported field value:",e,i),uT(i,e);if(i instanceof R0)return(function(r,a){if(!lT(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let u=0;for(const m of r){let p=Su(m,a.childContextForArray(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}})(i,e)}return(function(r,a){if((r=Gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kI(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=nt.fromDate(r);return{timestampValue:ol(a.serializer,l)}}if(r instanceof nt){const l=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ol(a.serializer,l)}}if(r instanceof Hr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof tr)return{bytesValue:iE(a.serializer,r._byteString)};if(r instanceof wt){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:s0(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof pr)return(function(u,m){const p=u instanceof pr?u.toArray():u;return{mapValue:{fields:{[$p]:{stringValue:Xp},[tl]:{arrayValue:{values:p.map((b=>{if(typeof b!="number")throw m.createError("VectorValues must only contain numeric values.");return Zp(m.serializer,b)}))}}}}}})(r,a);if(pE(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${af(r)}`)})(i,e)}function uT(i,e){const t={};return E1(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(i,((r,a)=>{const l=Su(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function dT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof nt||i instanceof Hr||i instanceof tr||i instanceof wt||i instanceof R0||i instanceof pr||pE(i))}function j0(i,e,t){if(!dT(t)||!a1(t)){const r=af(t);throw r==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+r)}}function hl(i,e,t){if((e=Gt(e))instanceof C0)return e._internalPath;if(typeof e=="string")return hT(i,e);throw Xh("Field path arguments must be of type string or ",i,!1,void 0,t)}const WR=new RegExp("[~\\*/\\[\\]]");function hT(i,e,t){if(e.search(WR)>=0)throw Xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new C0(...e.split("."))._internalPath}catch{throw Xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Xh(i,e,t,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${r}`),u&&(p+=` in document ${a}`),p+=")"),new se(X.INVALID_ARGUMENT,m+i+p)}function fT(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{convertValue(e,t="none"){switch(Si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ki(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){var r,a,l;const t=(l=(a=(r=e.fields)==null?void 0:r[tl].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>pt(u.doubleValue)));return new pr(t)}convertGeoPoint(e){return new Hr(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=hf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(su(e));default:return null}}convertTimestamp(e){const t=vs(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Je.fromString(e);ve(gE(r),9688,{name:e});const a=new Ia(r.get(1),r.get(3)),l=new oe(r.popFirst(5));return a.isEqual(t)||Nt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0 extends JR{constructor(e){super(),this.firestore=e}convertBytes(e){return new tr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}}const $_="@firebase/firestore",X_="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(i,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(hl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ZR extends mT{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new se(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class V0{}class e4 extends V0{}function t4(i,e,...t){let r=[];e instanceof V0&&r.push(e),r=r.concat(t),(function(l){const u=l.filter((p=>p instanceof O0)).length,m=l.filter((p=>p instanceof If)).length;if(u>1||u>0&&m>0)throw new se(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)i=a._apply(i);return i}class If extends e4{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new If(e,t,r)}_apply(e){const t=this._parse(e);return pT(e._query,t),new Pa(e.firestore,e.converter,xp(e._query,t))}_parse(e){const t=Af(e.firestore);return(function(l,u,m,p,y,b,w){let E;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new se(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){Z_(w,b);const L=[];for(const F of w)L.push(J_(p,l,F));E={arrayValue:{values:L}}}else E=J_(p,l,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||Z_(w,b),E=XR(m,u,w,b==="in"||b==="not-in");return qe.create(y,b,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function n4(i,e,t){const r=e,a=hl("where",i);return If._create(a,r,t)}class O0 extends V0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new O0(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:rt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const m=l.getFlattenedFilters();for(const p of m)pT(u,p),u=xp(u,p)})(e._query,t),new Pa(e.firestore,e.converter,xp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function J_(i,e,t){if(typeof(t=Gt(t))=="string"){if(t==="")throw new se(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B1(e)&&t.indexOf("/")!==-1)throw new se(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Je.fromString(t));if(!oe.isDocumentKey(r))throw new se(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return au(i,new oe(r))}if(t instanceof wt)return au(i,t._key);throw new se(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${af(t)}.`)}function Z_(i,e){if(!Array.isArray(i)||i.length===0)throw new se(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pT(i,e){const t=(function(a,l){for(const u of a)for(const m of u.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function yT(i,e,t){let r;return r=i?i.toFirestore(e):e,r}class r4{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=o4(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function s4(i){return new r4(i)}class i4{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=du.provider,this._offlineComponentProvider={build:t=>new sT(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class a4{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=du.provider,this._offlineComponentProvider={build:t=>new jR(t,e==null?void 0:e.cacheSizeBytes)}}}function o4(i){return new i4(i==null?void 0:i.forceOwnership)}function l4(){return new a4}class Uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ea extends mT{constructor(e,t,r,a,l,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ea._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ea._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ea._jsonSchema={type:Ut("string",Ea._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Sh extends Ea{data(e={}){return super.data(e)}}class Ta{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Uc(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Sh(this._firestore,this._userDataWriter,r.key,r,new Uc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((m=>{const p=new Sh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Uc(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const p=new Sh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Uc(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,b=-1;return m.type!==0&&(y=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),b=u.indexOf(m.doc.key)),{type:c4(m.type),doc:p,oldIndex:y,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ta._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function c4(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:i})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ta._jsonSchemaVersion="firestore/querySnapshot/1.0",Ta._jsonSchema={type:Ut("string",Ta._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(i){i=Ln(i,wt);const e=Ln(i.firestore,_s),t=Sf(e);return PR(t,i._key).then((r=>xT(e,i,r)))}function ew(i){i=Ln(i,Pa);const e=Ln(i.firestore,_s),t=Sf(e),r=new D0(e);return gT(i._query),LR(t,i._query).then((a=>new Ta(e,r,i,a)))}function d4(i,e,t){i=Ln(i,wt);const r=Ln(i.firestore,_s),a=yT(i.converter,e),l=Af(r);return Cf(r,[cT(l,"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,un.none())])}function h4(i,e,t,...r){i=Ln(i,wt);const a=Ln(i.firestore,_s),l=Af(a);let u;return u=typeof(e=Gt(e))=="string"||e instanceof C0?$R(l,"updateDoc",i._key,e,t,r):YR(l,"updateDoc",i._key,e),Cf(a,[u.toMutation(i._key,un.exists(!0))])}function f4(i){return Cf(Ln(i.firestore,_s),[new yf(i._key,un.none())])}function m4(i,e){const t=Ln(i.firestore,_s),r=Bo(i),a=yT(i.converter,e),l=Af(i.firestore);return Cf(t,[cT(l,"addDoc",r._key,a,i.converter!==null,{}).toMutation(r._key,un.exists(!1))]).then((()=>r))}function g4(i,...e){var y,b,w;i=Gt(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||W_(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(W_(e[r])){const E=e[r];e[r]=(y=E.next)==null?void 0:y.bind(E),e[r+1]=(b=E.error)==null?void 0:b.bind(E),e[r+2]=(w=E.complete)==null?void 0:w.bind(E)}let l,u,m;if(i instanceof wt)u=Ln(i.firestore,_s),m=bu(i._key.path),l={next:E=>{e[r]&&e[r](xT(u,i,E))},error:e[r+1],complete:e[r+2]};else{const E=Ln(i,Pa);u=Ln(E.firestore,_s),m=E._query;const j=new D0(u);l={next:L=>{e[r]&&e[r](new Ta(u,j,E,L))},error:e[r+1],complete:e[r+2]},gT(i._query)}const p=Sf(u);return MR(p,m,a,l)}function Cf(i,e){const t=Sf(i);return UR(t,e)}function xT(i,e,t){const r=t.docs.get(e._key),a=new D0(i);return new Ea(i,a,e._key,r,new Uc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){EN(ml),Yo(new Aa("firestore",((r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),m=new _s(new AN(r.getProvider("auth-internal")),new CN(u,r.getProvider("app-check-internal")),fI(u,a),u);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),_i($_,X_,e),_i($_,X_,"esm2020")})();var p4="firebase",y4="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_i(p4,y4,"app");function vT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const x4=vT,bT=new mu("auth","Firebase",vT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=new Pp("@firebase/auth");function v4(i,...e){Wh.logLevel<=Be.WARN&&Wh.warn(`Auth (${ml}): ${i}`,...e)}function Ah(i,...e){Wh.logLevel<=Be.ERROR&&Wh.error(`Auth (${ml}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(i,...e){throw M0(i,...e)}function Kr(i,...e){return M0(i,...e)}function _T(i,e,t){const r={...x4(),[e]:t};return new mu("auth","Firebase",r).create(e,{appName:i.name})}function ys(i){return _T(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function M0(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return bT.create(i,...e)}function Se(i,e,...t){if(!i)throw M0(e,...t)}function gs(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Ah(e),new Error(e)}function ws(i,e){i||gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function b4(){return tw()==="http:"||tw()==="https:"}function tw(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(b4()||rA()||"connection"in navigator)?navigator.onLine:!0}function w4(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,t){this.shortDelay=e,this.longDelay=t,ws(t>e,"Short delay should be less than long delay!"),this.isMobile=tA()||sA()}get(){return _4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(i,e){ws(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],S4=new Au(3e4,6e4);function As(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Ns(i,e,t,r,a={}){return ET(i,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const m=gu({key:i.config.apiKey,...u}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:p,...l};return nA()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&fl(i.emulatorConfig.host)&&(y.credentials="include"),wT.fetch()(await TT(i,i.config.apiHost,t,m),y)})}async function ET(i,e,t){i._canInitEmulator=!1;const r={...E4,...e};try{const a=new N4(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw hh(i,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const m=l.ok?u.errorMessage:u.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw hh(i,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw hh(i,"email-already-in-use",u);if(p==="USER_DISABLED")throw hh(i,"user-disabled",u);const b=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw _T(i,b,y);yr(i,b)}}catch(a){if(a instanceof Es)throw a;yr(i,"network-request-failed",{message:String(a)})}}async function Nu(i,e,t,r,a={}){const l=await Ns(i,e,t,r,a);return"mfaPendingCredential"in l&&yr(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function TT(i,e,t,r){const a=`${e}${t}?${r}`,l=i,u=l.config.emulator?P0(i.config,a):`${i.config.apiScheme}://${a}`;return T4.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function A4(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class N4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Kr(this.auth,"network-request-failed")),S4.get())})}}function hh(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Kr(i,e,r);return a.customData._tokenResponse=t,a}function nw(i){return i!==void 0&&i.enterprise!==void 0}class I4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return A4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function C4(i,e){return Ns(i,"GET","/v2/recaptchaConfig",As(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R4(i,e){return Ns(i,"POST","/v1/accounts:delete",e)}async function Jh(i,e){return Ns(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function k4(i,e=!1){const t=Gt(i),r=await t.getIdToken(e),a=L0(r);Se(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:Xc(Jg(a.auth_time)),issuedAtTime:Xc(Jg(a.iat)),expirationTime:Xc(Jg(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Jg(i){return Number(i)*1e3}function L0(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Ah("JWT malformed, contained fewer than 3 sections"),null;try{const a=Pw(t);return a?JSON.parse(a):(Ah("Failed to decode base64 JWT payload"),null)}catch(a){return Ah("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function rw(i){const e=L0(i);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Es&&j4(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function j4({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zh(i){var w;const e=i.auth,t=await i.getIdToken(),r=await hu(i,Jh(e,{idToken:t}));Se(r==null?void 0:r.users.length,e,"internal-error");const a=r.users[0];i._notifyReloadListener(a);const l=(w=a.providerUserInfo)!=null&&w.length?ST(a.providerUserInfo):[],u=O4(i.providerData,l),m=i.isAnonymous,p=!(i.email&&a.passwordHash)&&!(u!=null&&u.length),y=m?p:!1,b={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Vp(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(i,b)}async function V4(i){const e=Gt(i);await Zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function O4(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function ST(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M4(i,e){const t=await ET(i,{},async()=>{const r=gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,u=await TT(i,a,"/v1/token",`key=${l}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:r};return i.emulatorConfig&&fl(i.emulatorConfig.host)&&(p.credentials="include"),wT.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function P4(i,e){return Ns(i,"POST","/v2/accounts:revokeToken",As(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=rw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await M4(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,u=new Ho;return r&&(Se(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(Se(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Se(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(i,e){Se(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class gr{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new D4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Vp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await hu(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return k4(this,e)}reload(){return V4(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Zh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(er(this.auth.app))return Promise.reject(ys(this.auth));const e=await this.getIdToken();return await hu(this,R4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,m=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:w,emailVerified:E,isAnonymous:j,providerData:L,stsTokenManager:F}=t;Se(w&&F,e,"internal-error");const Q=Ho.fromJSON(this.name,F);Se(typeof w=="string",e,"internal-error"),ui(r,e.name),ui(a,e.name),Se(typeof E=="boolean",e,"internal-error"),Se(typeof j=="boolean",e,"internal-error"),ui(l,e.name),ui(u,e.name),ui(m,e.name),ui(p,e.name),ui(y,e.name),ui(b,e.name);const ie=new gr({uid:w,auth:e,email:a,emailVerified:E,displayName:r,isAnonymous:j,photoURL:u,phoneNumber:l,tenantId:m,stsTokenManager:Q,createdAt:y,lastLoginAt:b});return L&&Array.isArray(L)&&(ie.providerData=L.map(ne=>({...ne}))),p&&(ie._redirectEventId=p),ie}static async _fromIdTokenResponse(e,t,r=!1){const a=new Ho;a.updateFromServerResponse(t);const l=new gr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Zh(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Se(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?ST(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),m=new Ho;m.updateFromIdToken(r);const p=new gr({uid:a.localId,auth:e,stsTokenManager:m,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Vp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=new Map;function ps(i){ws(i instanceof Function,"Expected a class definition");let e=sw.get(i);return e?(ws(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,sw.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}AT.type="NONE";const iw=AT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(i,e,t){return`firebase:${i}:${e}:${t}`}class Ko{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Nh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Nh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Jh(this.auth,{idToken:e}).catch(()=>{});return t?gr._fromGetAccountInfoResponse(this.auth,t,e):null}return gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ko(ps(iw),e,r);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||ps(iw);const u=Nh(r,e.config.apiKey,e.name);let m=null;for(const y of t)try{const b=await y._get(u);if(b){let w;if(typeof b=="string"){const E=await Jh(e,{idToken:b}).catch(()=>{});if(!E)break;w=await gr._fromGetAccountInfoResponse(e,E,b)}else w=gr._fromJSON(e,b);y!==l&&(m=w),l=y;break}}catch{}const p=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ko(l,e,r):(l=p[0],m&&await l._set(u,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new Ko(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jT(e))return"Blackberry";if(DT(e))return"Webos";if(IT(e))return"Safari";if((e.includes("chrome/")||CT(e))&&!e.includes("edge/"))return"Chrome";if(kT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function NT(i=Ft()){return/firefox\//i.test(i)}function IT(i=Ft()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CT(i=Ft()){return/crios\//i.test(i)}function RT(i=Ft()){return/iemobile/i.test(i)}function kT(i=Ft()){return/android/i.test(i)}function jT(i=Ft()){return/blackberry/i.test(i)}function DT(i=Ft()){return/webos/i.test(i)}function U0(i=Ft()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function L4(i=Ft()){var e;return U0(i)&&!!((e=window.navigator)!=null&&e.standalone)}function U4(){return iA()&&document.documentMode===10}function VT(i=Ft()){return U0(i)||kT(i)||DT(i)||jT(i)||/windows phone/i.test(i)||RT(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(i,e=[]){let t;switch(i){case"Browser":t=aw(Ft());break;case"Worker":t=`${aw(Ft())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ml}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,m)=>{try{const p=e(l);u(p)}catch(p){m(p)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B4(i,e={}){return Ns(i,"GET","/v2/passwordPolicy",As(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=6;class F4{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??q4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ow(this),this.idTokenSubscription=new ow(this),this.beforeStateQueue=new z4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ps(t)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await Ko.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Jh(this,{idToken:e}),r=await gr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(er(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===m)&&(p!=null&&p.user)&&(r=p.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(er(this.app))return Promise.reject(ys(this));const t=e?Gt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return er(this.app)?Promise.reject(ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return er(this.app)?Promise.reject(ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await B4(this),t=new F4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await P4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ps(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Ko.create(this,[ps(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&v4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Di(i){return Gt(i)}class ow{constructor(e){this.auth=e,this.observer=null,this.addObserver=dA(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H4(i){Rf=i}function MT(i){return Rf.loadJS(i)}function K4(){return Rf.recaptchaEnterpriseScript}function Q4(){return Rf.gapiScript}function Y4(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class $4{constructor(){this.enterprise=new X4}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class X4{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const W4="recaptcha-enterprise",PT="NO_RECAPTCHA";class J4{constructor(e){this.type=W4,this.auth=Di(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,m)=>{C4(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new I4(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(p=>{m(p)})})}function a(l,u,m){const p=window.grecaptcha;nw(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(PT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $4().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(m=>{if(!t&&nw(window.grecaptcha))a(m,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=K4();p.length!==0&&(p+=m),MT(p).then(()=>{a(m,l,u)}).catch(y=>{u(y)})}}).catch(m=>{u(m)})})}}async function lw(i,e,t,r=!1,a=!1){const l=new J4(i);let u;if(a)u=PT;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:u}):Object.assign(m,{captchaResponse:u}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function ef(i,e,t,r,a){var l;if((l=i._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await lw(i,e,t,t==="getOobCode");return r(i,u)}else return r(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await lw(i,e,t,t==="getOobCode");return r(i,m)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(i,e){const t=Up(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Sa(l,e??{}))return a;yr(a,"already-initialized")}return t.initialize({options:e})}function ek(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ps);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function tk(i,e,t){const r=Di(i);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=LT(e),{host:u,port:m}=nk(e),p=m===null?"":`:${m}`,y={url:`${l}//${u}${p}/`},b=Object.freeze({host:u,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(Sa(y,r.config.emulator)&&Sa(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,fl(u)?(Bw(`${l}//${u}${p}`),eA("Auth",!0)):rk()}function LT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function nk(i){const e=LT(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:cw(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:cw(u)}}}function cw(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function rk(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,t){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}async function sk(i,e){return Ns(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(i,e){return Nu(i,"POST","/v1/accounts:signInWithPassword",As(i,e))}async function ak(i,e){return Ns(i,"POST","/v1/accounts:sendOobCode",As(i,e))}async function ok(i,e){return ak(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(i,e){return Nu(i,"POST","/v1/accounts:signInWithEmailLink",As(i,e))}async function ck(i,e){return Nu(i,"POST","/v1/accounts:signInWithEmailLink",As(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends z0{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new fu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new fu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ef(e,t,"signInWithPassword",ik);case"emailLink":return lk(e,{email:this._email,oobCode:this._password});default:yr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ef(e,r,"signUpPassword",sk);case"emailLink":return ck(e,{idToken:t,email:this._email,oobCode:this._password});default:yr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(i,e){return Nu(i,"POST","/v1/accounts:signInWithIdp",As(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="http://localhost";class Va extends z0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const u=new Va(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Qo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Qo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qo(e,t)}buildRequest(){const e={requestUri:uk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hk(i){const e=Dc(Vc(i)).link,t=e?Dc(Vc(e)).deep_link_id:null,r=Dc(Vc(i)).deep_link_id;return(r?Dc(Vc(r)).link:null)||r||t||e||i}class B0{constructor(e){const t=Dc(Vc(e)),r=t.apiKey??null,a=t.oobCode??null,l=dk(t.mode??null);Se(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=hk(e);try{return new B0(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.providerId=bl.PROVIDER_ID}static credential(e,t){return fu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=B0.parseLink(t);return Se(r,"argument-error"),fu._fromEmailAndCode(e,r.code,r.tenantId)}}bl.PROVIDER_ID="password";bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends UT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Iu{constructor(){super("facebook.com")}static credential(e){return Va._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Va._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return gi.credential(t,r)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Iu{constructor(){super("github.com")}static credential(e){return Va._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.GITHUB_SIGN_IN_METHOD="github.com";pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Iu{constructor(){super("twitter.com")}static credential(e,t){return Va._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return yi.credential(t,r)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(i,e){return Nu(i,"POST","/v1/accounts:signUp",As(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await gr._fromIdTokenResponse(e,r,a),u=uw(r);return new Oa({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=uw(r);return new Oa({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function uw(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends Es{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,tf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new tf(e,t,r,a)}}function zT(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?tf._fromErrorAndOperation(i,l,e,r):l})}async function mk(i,e,t=!1){const r=await hu(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Oa._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(i,e,t=!1){const{auth:r}=i;if(er(r.app))return Promise.reject(ys(r));const a="reauthenticate";try{const l=await hu(i,zT(r,a,e,i),t);Se(l.idToken,r,"internal-error");const u=L0(l.idToken);Se(u,r,"internal-error");const{sub:m}=u;return Se(i.uid===m,r,"user-mismatch"),Oa._forOperation(i,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&yr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(i,e,t=!1){if(er(i.app))return Promise.reject(ys(i));const r="signIn",a=await zT(i,r,e),l=await Oa._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(l.user),l}async function pk(i,e){return BT(Di(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qT(i){const e=Di(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yk(i,e,t){const r=Di(i);await ef(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ok)}async function xk(i,e,t){if(er(i.app))return Promise.reject(ys(i));const r=Di(i),u=await ef(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fk).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&qT(i),p}),m=await Oa._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(m.user),m}function vk(i,e,t){return er(i.app)?Promise.reject(ys(i)):pk(Gt(i),bl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qT(i),r})}function bk(i,e,t,r){return Gt(i).onIdTokenChanged(e,t,r)}function _k(i,e,t){return Gt(i).beforeAuthStateChanged(e,t)}function wk(i,e,t,r){return Gt(i).onAuthStateChanged(e,t,r)}function Ek(i){return Gt(i).signOut()}const nf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nf,"1"),this.storage.removeItem(nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=1e3,Sk=10;class GT extends FT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,p)=>{this.notifyListeners(u,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);U4()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Sk):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Tk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}GT.type="LOCAL";const Ak=GT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT extends FT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}HT.type="SESSION";const KT=HT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new kf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const m=Array.from(u).map(async y=>y(t.origin,l)),p=await Nk(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((m,p)=>{const y=q0("",20);a.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(w){const E=w;if(E.data.eventId===y)switch(E.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(E.data.response);break;default:clearTimeout(b),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function Ck(i){Qr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function Rk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kk(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function jk(){return QT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="firebaseLocalStorageDb",Dk=1,rf="firebaseLocalStorage",$T="fbase_key";class Cu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jf(i,e){return i.transaction([rf],e?"readwrite":"readonly").objectStore(rf)}function Vk(){const i=indexedDB.deleteDatabase(YT);return new Cu(i).toPromise()}function Op(){const i=indexedDB.open(YT,Dk);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(rf,{keyPath:$T})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(rf)?e(r):(r.close(),await Vk(),e(await Op()))})})}async function dw(i,e,t){const r=jf(i,!0).put({[$T]:e,value:t});return new Cu(r).toPromise()}async function Ok(i,e){const t=jf(i,!1).get(e),r=await new Cu(t).toPromise();return r===void 0?null:r.value}function hw(i,e){const t=jf(i,!0).delete(e);return new Cu(t).toPromise()}const Mk=800,Pk=3;class XT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Op(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Pk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kf._getInstance(jk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await Rk(),!this.activeServiceWorker)return;this.sender=new Ik(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Op();return await dw(e,nf,"1"),await hw(e,nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>dw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Ok(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=jf(a,!1).getAll();return new Cu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Mk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XT.type="LOCAL";const Lk=XT;new Au(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(i,e){return e?ps(e):(Se(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends z0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zk(i){return BT(i.auth,new F0(i),i.bypassAuthState)}function Bk(i){const{auth:e,user:t}=i;return Se(t,e,"internal-error"),gk(t,new F0(i),i.bypassAuthState)}async function qk(i){const{auth:e,user:t}=i;return Se(t,e,"internal-error"),mk(t,new F0(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:u,type:m}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zk;case"linkViaPopup":case"linkViaRedirect":return qk;case"reauthViaPopup":case"reauthViaRedirect":return Bk;default:yr(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=new Au(2e3,1e4);class qo extends WT{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,qo.currentPopupAction&&qo.currentPopupAction.cancel(),qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const e=q0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Fk.get())};e()}}qo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="pendingRedirect",Ih=new Map;class Hk extends WT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ih.get(this.auth._key());if(!e){try{const r=await Kk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ih.set(this.auth._key(),e)}return this.bypassAuthState||Ih.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kk(i,e){const t=$k(e),r=Yk(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function Qk(i,e){Ih.set(i._key(),e)}function Yk(i){return ps(i._redirectPersistence)}function $k(i){return Nh(Gk,i.config.apiKey,i.name)}async function Xk(i,e,t=!1){if(er(i.app))return Promise.reject(ys(i));const r=Di(i),a=Uk(r,e),u=await new Hk(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=600*1e3;class Jk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Zk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!JT(e)){const a=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Kr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Wk&&this.cachedEventUids.clear(),this.cachedEventUids.has(fw(e))}saveEventToCache(e){this.cachedEventUids.add(fw(e)),this.lastProcessedEventTime=Date.now()}}function fw(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function JT({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Zk(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JT(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ej(i,e={}){return Ns(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nj=/^https?/;async function rj(i){if(i.config.emulator)return;const{authorizedDomains:e}=await ej(i);for(const t of e)try{if(sj(t))return}catch{}yr(i,"unauthorized-domain")}function sj(i){const e=Dp(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!nj.test(t))return!1;if(tj.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=new Au(3e4,6e4);function mw(){const i=Qr().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function aj(i){return new Promise((e,t)=>{var a,l,u;function r(){mw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mw(),t(Kr(i,"network-request-failed"))},timeout:ij.get()})}if((l=(a=Qr().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Qr().gapi)!=null&&u.load)r();else{const m=Y4("iframefcb");return Qr()[m]=()=>{gapi.load?r():t(Kr(i,"network-request-failed"))},MT(`${Q4()}?onload=${m}`).catch(p=>t(p))}}).catch(e=>{throw Ch=null,e})}let Ch=null;function oj(i){return Ch=Ch||aj(i),Ch}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=new Au(5e3,15e3),cj="__/auth/iframe",uj="emulator/auth/iframe",dj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fj(i){const e=i.config;Se(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?P0(e,uj):`https://${i.config.authDomain}/${cj}`,r={apiKey:e.apiKey,appName:i.name,v:ml},a=hj.get(i.config.apiHost);a&&(r.eid=a);const l=i._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${gu(r).slice(1)}`}async function mj(i){const e=await oj(i),t=Qr().gapi;return Se(t,i,"internal-error"),e.open({where:document.body,url:fj(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dj,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=Kr(i,"network-request-failed"),m=Qr().setTimeout(()=>{l(u)},lj.get());function p(){Qr().clearTimeout(m),a(r)}r.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pj=500,yj=600,xj="_blank",vj="http://localhost";class gw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bj(i,e,t,r=pj,a=yj){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const p={...gj,width:r.toString(),height:a.toString(),top:l,left:u},y=Ft().toLowerCase();t&&(m=CT(y)?xj:t),NT(y)&&(e=e||vj,p.scrollbars="yes");const b=Object.entries(p).reduce((E,[j,L])=>`${E}${j}=${L},`,"");if(L4(y)&&m!=="_self")return _j(e||"",m),new gw(null);const w=window.open(e||"",m,b);Se(w,i,"popup-blocked");try{w.focus()}catch{}return new gw(w)}function _j(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="__/auth/handler",Ej="emulator/auth/handler",Tj=encodeURIComponent("fac");async function pw(i,e,t,r,a,l){Se(i.config.authDomain,i,"auth-domain-config-required"),Se(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:ml,eventId:a};if(e instanceof UT){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",uA(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))u[b]=w}if(e instanceof Iu){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(u.scopes=b.join(","))}i.tenantId&&(u.tid=i.tenantId);const m=u;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const p=await i._getAppCheckToken(),y=p?`#${Tj}=${encodeURIComponent(p)}`:"";return`${Sj(i)}?${gu(m).slice(1)}${y}`}function Sj({config:i}){return i.emulator?P0(i,Ej):`https://${i.authDomain}/${wj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="webStorageSupport";class Aj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KT,this._completeRedirectFn=Xk,this._overrideRedirectResult=Qk}async _openPopup(e,t,r,a){var u;ws((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await pw(e,t,r,Dp(),a);return bj(e,l,q0())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await pw(e,t,r,Dp(),a);return Ck(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ws(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await mj(e),r=new Jk(e);return t.register("authEvent",a=>(Se(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Zg,{type:Zg},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[Zg];l!==void 0&&t(!!l),yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return VT()||IT()||U0()}}const Nj=Aj;var yw="@firebase/auth",xw="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Rj(i){Yo(new Aa("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=r.options;Se(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:u,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OT(i)},y=new G4(r,a,l,p);return ek(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Yo(new Aa("auth-internal",e=>{const t=Di(e.getProvider("auth").getImmediate());return(r=>new Ij(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_i(yw,xw,Cj(i)),_i(yw,xw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=300,jj=zw("authIdTokenMaxAge")||kj;let vw=null;const Dj=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>jj)return;const a=t==null?void 0:t.token;vw!==a&&(vw=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Vj(i=hN()){const e=Up(i,"auth");if(e.isInitialized())return e.getImmediate();const t=Z4(i,{popupRedirectResolver:Nj,persistence:[Lk,Ak,KT]}),r=zw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const u=Dj(l.toString());_k(t,u,()=>u(t.currentUser)),bk(t,m=>u(m))}}const a=X2("auth");return a&&tk(t,`http://${a}`),t}function Oj(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}H4({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const l=Kr("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",Oj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Rj("Browser");const Mj={apiKey:"AIzaSyAwhQ9nr9mDn1SmWAuJrvioLqfIi3Bjyeg",authDomain:"aftras-c1b74.firebaseapp.com",projectId:"aftras-c1b74",storageBucket:"aftras-c1b74.firebasestorage.app",messagingSenderId:"151673073567",appId:"1:151673073567:web:39ad3f206dcb5a87ecd7aa",measurementId:"G-7G51QYFMF6"},ZT=Yw(Mj),Oo=Vj(ZT),di=FR(ZT,{localCache:s4({tabManager:l4()})}),Ae={getAll:async i=>{try{return(await ew(Wg(di,i))).docs.map(t=>({id:t.id,...t.data()}))}catch(e){return(e==null?void 0:e.code)!=="unavailable"&&(e==null?void 0:e.code)!=="permission-denied"&&console.error(`Erreur collection ${i}:`,e),[]}},getById:async(i,e)=>{try{const t=Bo(di,i,e),r=await u4(t);return r.exists()?{id:r.id,...r.data()}:null}catch(t){return(t==null?void 0:t.code)==="permission-denied"&&e==="app_config"||(t==null?void 0:t.code)!=="unavailable"&&console.error(`Erreur document ${e}:`,t),null}},listenById:(i,e,t)=>{const r=Bo(di,i,e);return g4(r,a=>{a.exists()?t({id:a.id,...a.data()}):t(null)},a=>{a.code!=="permission-denied"&&console.error(`Erreur coute document ${e}:`,a),t(null)})},add:async(i,e)=>{try{if(e.id){const{id:t,...r}=e,a=Bo(di,i,t);return await d4(a,r),{id:t}}return await m4(Wg(di,i),e)}catch(t){throw console.error(`Erreur ajout ${i}:`,t),t}},update:async(i,e,t)=>{try{const r=Bo(di,i,e);return await h4(r,t)}catch(r){throw console.error(`Erreur mise  jour ${e}:`,r),r}},delete:async(i,e)=>{try{return await f4(Bo(di,i,e))}catch(t){throw console.error(`Erreur suppression ${e}:`,t),t}},getByQuery:async(i,e,t,r)=>{try{const a=t4(Wg(di,i),n4(e,t,r));return(await ew(a)).docs.map(u=>({id:u.id,...u.data()}))}catch(a){return(a==null?void 0:a.code)!=="unavailable"&&(a==null?void 0:a.code)!=="permission-denied"&&console.error(`Erreur requte ${i}:`,a),[]}}},Oe={USERS:"users",PROSPECTS:"prospects",CLIENTS:"clients",SALES:"sales",NOTIFICATIONS:"notifications",SETTINGS:"settings",ACCESS_CODES:"access_codes",REMOTE_PROSPECTS:"remote_prospects"},bw={name:"AFTRAS CRM",currency:"FCFA",logo:null},ue={getAppSettings:async()=>{try{return await Ae.getById(Oe.SETTINGS,"app_config")||bw}catch{return bw}},updateAppSettings:async i=>{await Ae.update(Oe.SETTINGS,"app_config",i),window.dispatchEvent(new Event("app-settings-changed"))},getAppLogo:async()=>{try{const i=await Ae.getById(Oe.SETTINGS,"app_config");return(i==null?void 0:i.logo)||null}catch{return null}},updateAppLogo:async i=>{await Ae.update(Oe.SETTINGS,"app_config",{logo:i}),window.dispatchEvent(new Event("app-logo-changed"))},getUsers:async()=>await Ae.getAll(Oe.USERS),addUser:async i=>{const e={...i,status:i.status||Mn.PENDING,createdAt:new Date().toISOString()};return await Ae.add(Oe.USERS,e)},updateUserStatus:async(i,e)=>{await Ae.update(Oe.USERS,i,{status:e})},updateUser:async(i,e)=>(await Ae.update(Oe.USERS,i,e),await Ae.getById(Oe.USERS,i)),deleteUser:async i=>{await Ae.delete(Oe.USERS,i)},getProspects:async()=>await Ae.getAll(Oe.PROSPECTS),getProspectsByAgent:async i=>await Ae.getByQuery(Oe.PROSPECTS,"agentId","==",i),addProspect:async i=>{const e={...i,status:$t.PENDING,createdAt:new Date().toISOString()};return await Ae.add(Oe.PROSPECTS,e)},updateProspect:async(i,e)=>{await Ae.update(Oe.PROSPECTS,i,e)},deleteProspect:async i=>{await Ae.delete(Oe.PROSPECTS,i)},convertToClient:async i=>{const e=await Ae.getById(Oe.PROSPECTS,i);if(!e)return;await Ae.update(Oe.PROSPECTS,i,{status:$t.CONVERTED});const t={agentId:e.agentId,prospectId:e.id,fullName:e.fullName,company:e.company||"",email:e.email,phone:e.phone,country:e.country,product:e.productOfInterest,status:"PENDING",createdAt:new Date().toISOString()};await Ae.add(Oe.CLIENTS,t)},getClients:async()=>await Ae.getAll(Oe.CLIENTS),getClientsByAgent:async i=>await Ae.getByQuery(Oe.CLIENTS,"agentId","==",i),deleteClient:async(i,e)=>{await Ae.update(Oe.CLIENTS,i,{status:"CANCELLED",deletionReason:e})},getSales:async()=>await Ae.getAll(Oe.SALES),getSalesByAgent:async i=>{const e=await Ae.getByQuery(Oe.SALES,"agentId","==",i),t=await ue.getClientsByAgent(i);return e.map(r=>{const a=t.find(l=>l.id===r.clientId);return{...r,clientName:(a==null?void 0:a.fullName)||"Client Inconnu"}})},addSale:async i=>{const e={...i,createdAt:new Date().toISOString()};await Ae.add(Oe.SALES,e),await Ae.update(Oe.CLIENTS,i.clientId,{status:"SALE_CONCLUDED"})},updateSale:async(i,e)=>{await Ae.update(Oe.SALES,i,e)},updateSaleStatus:async(i,e)=>{await Ae.update(Oe.SALES,i,{status:e})},getNotifications:async i=>i?await Ae.getByQuery(Oe.NOTIFICATIONS,"userId","==",i):await Ae.getAll(Oe.NOTIFICATIONS),markAllNotificationsAsRead:async i=>{const t=(await ue.getNotifications(i)).map(r=>Ae.update(Oe.NOTIFICATIONS,r.id,{read:!0}));await Promise.all(t)},getAccessCode:async()=>(await Ae.getAll(Oe.ACCESS_CODES))[0]||{code:"",expiresAt:"",isActive:!1},getSupervisorAccessCode:async()=>(await Ae.getAll("supervisor_access_codes"))[0]||{code:"",expiresAt:"",isActive:!1},generateNewCode:async()=>{const i={code:`CRM-${Math.floor(1e3+Math.random()*9e3)}-${new Date().getFullYear()}`,expiresAt:new Date(Date.now()+864e5).toISOString(),isActive:!0},e=await Ae.getAll(Oe.ACCESS_CODES);for(const r of e)await Ae.delete(Oe.ACCESS_CODES,r.id);return{id:(await Ae.add(Oe.ACCESS_CODES,i)).id,...i}},generateNewSupervisorCode:async()=>{const i={code:`SUP-${Math.floor(1e3+Math.random()*9e3)}-${new Date().getFullYear()}`,expiresAt:new Date(Date.now()+864e5).toISOString(),isActive:!0},e=await Ae.getAll("supervisor_access_codes");for(const r of e)await Ae.delete("supervisor_access_codes",r.id);return{id:(await Ae.add("supervisor_access_codes",i)).id,...i}},getRemoteProspectsByAgent:async i=>await Ae.getByQuery(Oe.REMOTE_PROSPECTS,"agentId","==",i),addRemoteLead:async i=>{const e={...i,isVerified:!1,createdAt:new Date().toISOString()};await Ae.add(Oe.REMOTE_PROSPECTS,e),window.dispatchEvent(new Event("remote-leads-updated"))},confirmRemoteProspect:async i=>{const e=await Ae.getById(Oe.REMOTE_PROSPECTS,i);if(!e)return;const{isVerified:t,...r}=e;await ue.addProspect(r),await Ae.delete(Oe.REMOTE_PROSPECTS,i)},deleteRemoteProspect:async i=>{await Ae.delete(Oe.REMOTE_PROSPECTS,i)},getProspectsTodayByAgent:async i=>{const e=await Ae.getByQuery(Oe.PROSPECTS,"agentId","==",i),t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate()).toISOString(),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1).toISOString();return e.filter(l=>l.createdAt>=r&&l.createdAt<a).length},getAgentCommissionTotal:async i=>(await Ae.getByQuery(Oe.SALES,"agentId","==",i)).reduce((t,r)=>t+r.commission,0)},Pj=({user:i,onLogout:e,children:t,activeView:r,setActiveView:a})=>{const[l,u]=ee.useState(window.innerWidth>1024),[m,p]=ee.useState(window.innerWidth<=1024),[y,b]=ee.useState(null),[w,E]=ee.useState({name:"AFTRAS CRM",currency:"FCFA"});ee.useEffect(()=>{(async()=>{const be=await ue.getAppLogo();b(be);const ye=await ue.getAppSettings();E(ye)})();const re=async()=>b(await ue.getAppLogo()),xe=async()=>E(await ue.getAppSettings());return window.addEventListener("app-logo-changed",re),window.addEventListener("app-settings-changed",xe),()=>{window.removeEventListener("app-logo-changed",re),window.removeEventListener("app-settings-changed",xe)}},[]),ee.useEffect(()=>{const ne=()=>{const re=window.innerWidth<=1024;p(re),u(!re)};return window.addEventListener("resize",ne),()=>window.removeEventListener("resize",ne)},[]);const j=ne=>{a(ne),m&&u(!1)},L={dashboard:"text-sky-400","access-code":"text-amber-400",users:"text-indigo-400",prospects:"text-emerald-400",clients:"text-blue-400",sales:"text-rose-400",commissions:"text-orange-400",notifications:"text-purple-400",settings:"text-slate-400",profile:"text-teal-400",prospecting:"text-emerald-400","remote-form":"text-sky-400","my-clients":"text-blue-400","my-commissions":"text-orange-400"},Q={[gn.ADMIN]:[{id:"dashboard",label:"Dashboard",icon:me.Dashboard},{id:"access-code",label:"Code d'accs",icon:me.Lock},{id:"users",label:"Utilisateurs",icon:me.Users},{id:"prospects",label:"Prospects",icon:me.Prospect},{id:"clients",label:"Clients",icon:me.Client},{id:"sales",label:"Ventes",icon:me.Sales},{id:"commissions",label:"Commissions",icon:me.Commission},{id:"notifications",label:"Notifications",icon:me.Notification},{id:"settings",label:"Paramtres",icon:me.Settings},{id:"profile",label:"Profil",icon:me.Profile}],[gn.AGENT]:[{id:"dashboard",label:"Dashboard",icon:me.Dashboard},{id:"prospecting",label:"Prospection",icon:me.Prospect},{id:"remote-form",label:"Formulaire distant",icon:me.Globe},{id:"my-clients",label:"Mes clients",icon:me.Client},{id:"my-commissions",label:"Mes commissions",icon:me.Commission},{id:"notifications",label:"Notifications",icon:me.Notification},{id:"profile",label:"Profil",icon:me.Profile}],[gn.SUPERVISOR]:[{id:"dashboard",label:"Dashboard (Lecture)",icon:me.Dashboard},{id:"access-code",label:"Code d'accs (L)",icon:me.Lock},{id:"users",label:"Utilisateurs (L)",icon:me.Users},{id:"prospects",label:"Prospects (L)",icon:me.Prospect},{id:"clients",label:"Clients (L)",icon:me.Client},{id:"sales",label:"Ventes (L)",icon:me.Sales},{id:"commissions",label:"Commissions (L)",icon:me.Commission},{id:"notifications",label:"Notifications (L)",icon:me.Notification},{id:"settings",label:"Paramtres (L)",icon:me.Settings},{id:"profile",label:"Profil (L)",icon:me.Profile}]}[i.role]||[],ie=()=>{var ne,re;return((ne=w.name)==null?void 0:ne.toUpperCase())==="AFTRAS CRM"?d.jsxs("span",{className:"font-black text-lg tracking-tight whitespace-nowrap overflow-hidden flex items-center gap-1.5",children:[d.jsx("span",{className:"text-white",children:"AFTRAS"}),d.jsx("span",{className:"text-orange-500 border-2 border-orange-500 rounded-full px-2 py-0.5 text-[0.75em]",children:"CRM"})]}):d.jsx("span",{className:"font-bold text-xl text-white tracking-tight whitespace-nowrap overflow-hidden text-ellipsis",children:(re=w.name)==null?void 0:re.split(" ")[0]})};return d.jsxs("div",{className:"min-h-screen flex bg-gray-50 relative overflow-x-hidden",children:[m&&l&&d.jsx("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-sm z-40 lg:hidden transition-opacity duration-300",onClick:()=>u(!1)}),d.jsxs("aside",{className:`
          fixed h-full z-50 bg-blue-950 border-r border-blue-900/50 transition-all duration-300 ease-in-out flex flex-col shadow-2xl
          ${l?"w-64 translate-x-0":m?"w-64 -translate-x-full":"w-20 translate-x-0"}
        `,children:[d.jsxs("div",{className:"p-6 flex items-center justify-between",children:[(l||!m)&&d.jsxs("div",{className:`flex items-center space-x-2 ${!l&&!m?"mx-auto":""}`,children:[y?d.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center overflow-hidden shrink-0 border border-white/20 shadow-lg",children:d.jsx("img",{src:y,alt:"Logo",className:"max-w-full max-h-full object-contain p-1"})}):d.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center text-white font-black shrink-0 shadow-lg shadow-orange-500/20",children:"A"}),l&&ie()]}),m&&l&&d.jsx("button",{onClick:()=>u(!1),className:"p-2 text-blue-300 hover:text-white transition-colors",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M18 6 6 18"}),d.jsx("path",{d:"m6 6 12 12"})]})})]}),d.jsx("nav",{className:"flex-1 mt-4 px-3 space-y-1.5 overflow-y-auto",children:Q.map(ne=>d.jsxs("button",{onClick:()=>j(ne.id),className:`
                w-full flex items-center p-3 rounded-2xl transition-all duration-300 group
                ${r===ne.id?"bg-blue-900/50 text-white shadow-inner border border-white/5":"text-blue-200/60 hover:bg-blue-900/30 hover:text-white"}
              `,title:!l&&!m?ne.label:"",children:[d.jsx("div",{className:`
                shrink-0 transition-all duration-500 
                ${r===ne.id?L[ne.id]||"text-white":"text-blue-300/40 group-hover:scale-125 group-hover:rotate-6 group-hover:translate-x-1"}
                ${!l&&!m?"mx-auto":""}
              `,children:ne.icon}),l&&d.jsx("span",{className:`
                  ml-3 text-sm font-medium transition-all duration-300 truncate
                  ${r===ne.id?"translate-x-1 font-bold":"group-hover:translate-x-1"}
                `,children:ne.label})]},ne.id))}),d.jsx("div",{className:"p-4 border-t border-blue-900/50",children:d.jsxs("button",{onClick:e,className:`
              w-full flex items-center p-3 text-blue-300/60 hover:text-rose-400 hover:bg-rose-500/10 rounded-2xl transition-all group
              ${!l&&!m?"justify-center":""}
            `,children:[d.jsx("div",{className:"shrink-0 transition-transform duration-300 group-hover:-translate-x-1 group-hover:scale-110",children:me.Logout}),l&&d.jsx("span",{className:"ml-3 text-sm font-bold uppercase tracking-widest text-[10px]",children:"Dconnexion"})]})})]}),d.jsxs("main",{className:`
        flex-1 flex flex-col min-w-0 transition-all duration-300 ease-in-out
        ${m?"ml-0":l?"ml-64":"ml-20"}
      `,children:[d.jsxs("header",{className:"h-16 bg-white border-b border-gray-100 flex items-center justify-between px-4 sm:px-8 sticky top-0 z-20",children:[d.jsx("button",{onClick:()=>u(!l),className:"p-2 rounded-lg hover:bg-gray-100 text-gray-500 transition-colors",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),d.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),d.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),d.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[d.jsxs("div",{className:"text-right hidden xs:block",children:[d.jsxs("p",{className:"text-sm font-bold text-gray-900 truncate max-w-[120px]",children:[i.firstName," ",i.lastName]}),d.jsx("p",{className:"text-[10px] text-gray-500 font-black px-2 py-0.5 bg-gray-50 rounded-full inline-block uppercase tracking-tighter",children:i.role})]}),d.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-tr from-blue-600 to-sky-400 flex items-center justify-center text-white font-bold shadow-md shrink-0 ring-2 ring-white",children:i.firstName[0]})]})]}),d.jsx("div",{className:"p-4 sm:p-8 flex-1 overflow-x-hidden",children:t})]})]})},fh=({onNavigate:i})=>{const[e,t]=ee.useState([]),[r,a]=ee.useState([]),[l,u]=ee.useState([]),[m,p]=ee.useState([]),[y,b]=ee.useState(null),[w,E]=ee.useState(!1);ee.useEffect(()=>{(async()=>{const Q=await ue.getSales();t(Q);const ie=await ue.getProspects();a(ie);const ne=await ue.getClients();u(ne.filter(xe=>xe.status!=="CANCELLED"));const re=await ue.getUsers();p(re.filter(xe=>xe.status===Mn.ACTIVE))})()},[]);const j=async()=>{E(!0);try{const F=` ANALYSE STRATGIQUE GNRE LE ${new Date().toLocaleDateString()}
      
 PERFORMANCE COMMERCIALE :
- ${e.length} ventes enregistres pour un CA total de ${e.reduce((Q,ie)=>Q+ie.amount,0).toLocaleString()} FCFA
- ${r.length} prospects en attente de conversion
- ${l.length} clients valids dans le portefeuille

 INDICATEURS CLS :
- Taux de conversion moyen estim : ${Math.round(l.length/(r.length+l.length)*100)}%
- Bnfice net total : ${e.reduce((Q,ie)=>Q+ie.profit,0).toLocaleString()} FCFA
- Commissions  verser : ${e.reduce((Q,ie)=>Q+ie.commission,0).toLocaleString()} FCFA

 RECOMMANDATIONS :
- Focus sur les prospects en attente (${r.length}) pour augmenter le taux de conversion
- Optimiser les cots pour amliorer la marge bnficiaire
- Suivre de prs les paiements en attente pour fluidifier la trsorerie

 CONSEIL : Ciblez les prospects avec un fort potentiel de CA pour maximiser votre rentabilit.`;b(F)}catch(F){console.error(F),b("Erreur lors de l'analyse IA. Vrifiez votre connexion.")}finally{E(!1)}},L=e.reduce((F,Q)=>F+Q.amount,0);return d.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-black text-gray-900 tracking-tight",children:"Tableau de bord Global"}),d.jsx("p",{className:"text-gray-500 font-medium",children:"Vue d'ensemble de la performance de l'entreprise"})]}),d.jsx("div",{className:"flex items-center gap-4",children:d.jsx("button",{onClick:j,disabled:w,className:"bg-indigo-600 text-white px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest border border-indigo-500 hover:bg-indigo-700 transition-all flex items-center shadow-lg disabled:opacity-50 shadow-indigo-100",children:w?"Chargement...":" Analyse Stratgique IA"})})]}),y&&d.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-blue-900 rounded-[2.5rem] p-8 text-white shadow-2xl animate-in zoom-in-95 duration-500 relative overflow-hidden group",children:[d.jsxs("h3",{className:"text-sm font-black uppercase tracking-[0.3em] text-indigo-300 mb-6 flex items-center",children:[d.jsx("span",{className:"mr-2",children:""})," Rapport Stratgique Gemini"]}),d.jsx("div",{className:"prose prose-invert max-w-none text-indigo-50 font-medium leading-relaxed",children:y.split(`
`).map((F,Q)=>d.jsx("p",{className:"mb-2",children:F},Q))}),d.jsx("button",{onClick:()=>b(null),className:"mt-8 text-[9px] font-black uppercase tracking-widest text-indigo-400 hover:text-white transition-colors",children:"Masquer l'analyse"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:[d.jsxs("div",{onClick:()=>i("users"),className:"bg-white rounded-[3rem] p-8 border-0 shadow-xl hover:shadow-2xl transition-all cursor-pointer group",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("div",{className:"w-16 h-16 bg-indigo-600 text-white rounded-2xl flex items-center justify-center text-2xl font-black shadow-lg group-hover:scale-110 transition-transform",children:me.Users}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Agents actifs"}),d.jsx("p",{className:"text-4xl font-black text-gray-900",children:m.length})]})]}),d.jsx("div",{className:"w-16 h-1 bg-indigo-100 rounded-full"})]}),d.jsxs("div",{onClick:()=>i("prospects"),className:"bg-white rounded-[3rem] p-8 border-0 shadow-xl hover:shadow-2xl transition-all cursor-pointer group",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("div",{className:"w-16 h-16 bg-sky-600 text-white rounded-2xl flex items-center justify-center text-2xl font-black shadow-lg group-hover:scale-110 transition-transform",children:me.Prospect}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Prospects totaux"}),d.jsx("p",{className:"text-4xl font-black text-gray-900",children:r.length})]})]}),d.jsx("div",{className:"w-16 h-1 bg-sky-100 rounded-full"})]}),d.jsxs("div",{onClick:()=>i("clients"),className:"bg-white rounded-[3rem] p-8 border-0 shadow-xl hover:shadow-2xl transition-all cursor-pointer group",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("div",{className:"w-16 h-16 bg-emerald-600 text-white rounded-2xl flex items-center justify-center text-2xl font-black shadow-lg group-hover:scale-110 transition-transform",children:me.Client}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Clients valids"}),d.jsx("p",{className:"text-4xl font-black text-gray-900",children:l.length})]})]}),d.jsx("div",{className:"w-16 h-1 bg-emerald-100 rounded-full"})]}),d.jsxs("div",{onClick:()=>i("sales"),className:"bg-white rounded-[3rem] p-8 border-0 shadow-xl hover:shadow-2xl transition-all cursor-pointer group",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("div",{className:"w-16 h-16 bg-amber-600 text-white rounded-2xl flex items-center justify-center text-2xl font-black shadow-lg group-hover:scale-110 transition-transform",children:me.Sales}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"CA Global"}),d.jsxs("p",{className:"text-4xl font-black text-gray-900",children:[L.toLocaleString()," FCFA"]})]})]}),d.jsx("div",{className:"w-16 h-1 bg-amber-100 rounded-full"})]}),d.jsxs("div",{onClick:()=>i("commissions"),className:"bg-white rounded-[3rem] p-8 border-0 shadow-xl hover:shadow-2xl transition-all cursor-pointer group",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("div",{className:"w-16 h-16 bg-rose-600 text-white rounded-2xl flex items-center justify-center text-2xl font-black shadow-lg group-hover:scale-110 transition-transform",children:me.Commission}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Commissions"}),d.jsxs("p",{className:"text-4xl font-black text-gray-900",children:[e.reduce((F,Q)=>F+Q.commission,0).toLocaleString()," FCFA"]})]})]}),d.jsx("div",{className:"w-16 h-1 bg-rose-100 rounded-full"})]})]})]})},_w=({readOnly:i=!1})=>{const[e,t]=ee.useState(null),[r,a]=ee.useState(null);ee.useEffect(()=>{(async()=>{t(await ue.getAccessCode())})()},[]);const l=async()=>{if(i)return;const p=await ue.generateNewCode();t(p)},u=(p,y)=>{navigator.clipboard.writeText(p),a(y),setTimeout(()=>a(null),2e3)};if(!e)return d.jsx("div",{className:"p-12 text-center font-black text-indigo-600",children:"Chargement..."});const m=`${window.location.origin}/?mode=signup&code=${e.code}`;return d.jsx("div",{className:"max-w-xl mx-auto space-y-8 py-12 text-center",children:d.jsxs("div",{className:"bg-white p-10 rounded-[3rem] border border-gray-100 shadow-2xl animate-in zoom-in-95 duration-500",children:[d.jsx("div",{className:"w-20 h-20 bg-indigo-50 text-indigo-600 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-sm",children:me.Lock}),d.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-2 tracking-tight",children:"Code d'accs Agent"}),d.jsx("p",{className:"text-gray-500 mb-10 text-sm font-medium",children:"Grez l'accs des nouveaux agents  votre plateforme."}),d.jsxs("div",{className:"bg-indigo-50/50 border border-indigo-100 p-8 rounded-3xl mb-8 group relative overflow-hidden transition-all hover:bg-indigo-50/80",children:[d.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-3",children:"Code de Scurit Actuel"}),d.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[d.jsx("p",{className:"text-4xl font-black text-indigo-700 font-mono tracking-widest transition-transform group-hover:scale-105",children:e.code}),d.jsx("button",{onClick:()=>u(e.code,"code"),className:`p-3 rounded-xl border transition-all flex items-center gap-2 ${r==="code"?"bg-emerald-600 border-emerald-600 text-white":"bg-white text-indigo-600 border-indigo-100 shadow-sm hover:bg-indigo-50"}`,children:r==="code"?d.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Copi !"}):me.Copy})]})]}),d.jsxs("div",{className:"bg-gray-50/50 border border-gray-100 p-8 rounded-3xl mb-10 text-left",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4 text-gray-400",children:[d.jsx("div",{className:"w-6 h-6",children:me.Globe}),d.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"Lien d'inscription rapide"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"block text-xs font-bold text-indigo-600 bg-white p-4 rounded-xl border border-indigo-50 truncate hover:text-indigo-700 hover:border-indigo-200 transition-all shadow-inner",children:m}),d.jsxs("button",{onClick:()=>u(m,"link"),className:`w-full py-4 rounded-xl border transition-all flex items-center justify-center gap-3 font-black text-[10px] uppercase tracking-widest shadow-sm ${r==="link"?"bg-emerald-600 border-emerald-600 text-white":"bg-white text-gray-600 border-gray-100 hover:bg-gray-50"}`,children:[d.jsx("div",{className:"shrink-0",children:me.Copy}),r==="link"?"Lien copi dans le presse-papier":"Copier le lien complet"]})]})]}),!i&&d.jsx("button",{onClick:l,className:"w-full py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-indigo-700 transition-all shadow-xl shadow-indigo-100 pt-6",children:"Rgnrer un nouveau code"})]})})},ww=({readOnly:i=!1})=>{const[e,t]=ee.useState([]),[r,a]=ee.useState(""),[l,u]=ee.useState("ALL");ee.useEffect(()=>{(async()=>t(await ue.getUsers()))()},[]);const m=async(b,w)=>{i||(await ue.updateUserStatus(b,w),t(await ue.getUsers()))},p=e.filter(b=>{const E=`${b.firstName} ${b.lastName}`.toLowerCase().includes(r.toLowerCase())||b.email.toLowerCase().includes(r.toLowerCase()),j=l==="ALL"||b.role===l;return E&&j}),y=b=>{switch(b){case gn.ADMIN:return"bg-indigo-50 text-indigo-700 border-indigo-100";case gn.SUPERVISOR:return"bg-purple-50 text-purple-700 border-purple-100";case gn.AGENT:return"bg-emerald-50 text-emerald-700 border-emerald-100";default:return"bg-gray-50 text-gray-700 border-gray-100"}};return d.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-black text-gray-900 tracking-tight",children:"Utilisateurs"}),d.jsx("p",{className:"text-gray-500 font-medium",children:"Gestion des agents et superviseurs de l'quipe"})]}),d.jsx("div",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest text-center bg-gray-50/50 px-6 py-3 rounded-xl border border-gray-100",children:"Les superviseurs doivent tre crs manuellement dans Firebase Console"})]}),d.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] border border-gray-100 shadow-sm flex flex-col md:flex-row gap-4 items-center",children:[d.jsxs("div",{className:"flex-1 relative w-full",children:[d.jsx("div",{className:"absolute inset-y-0 left-5 flex items-center pointer-events-none text-indigo-400",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"11",cy:"11",r:"8"}),d.jsx("path",{d:"m21 21-4.3-4.3"})]})}),d.jsx("input",{type:"text",placeholder:"Rechercher par nom ou email...",value:r,onChange:b=>a(b.target.value),className:"w-full pl-14 pr-6 py-4 bg-gray-50 border-none rounded-2xl outline-none font-bold text-gray-700 placeholder:text-gray-300 shadow-inner focus:ring-2 focus:ring-indigo-100 transition-all"})]}),d.jsx("div",{className:"w-full md:w-64",children:d.jsxs("select",{value:l,onChange:b=>u(b.target.value),className:"w-full px-6 py-4 bg-gray-50 border-none rounded-2xl outline-none font-black text-[10px] uppercase tracking-widest cursor-pointer shadow-inner text-gray-600 focus:ring-2 focus:ring-indigo-100",children:[d.jsx("option",{value:"ALL",children:"Tous les rles"}),d.jsx("option",{value:gn.ADMIN,children:"Administrateurs"}),d.jsx("option",{value:gn.AGENT,children:"Agents de vente"}),d.jsx("option",{value:gn.SUPERVISOR,children:"Superviseurs"})]})})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 pb-12",children:p.map(b=>d.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 border border-gray-100 shadow-sm group hover:shadow-xl hover:border-indigo-100 transition-all duration-300",children:[d.jsxs("div",{className:"flex items-center space-x-5 mb-8",children:[d.jsxs("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 border border-indigo-100 flex items-center justify-center text-indigo-600 font-black text-xl shadow-inner group-hover:scale-110 transition-transform",children:[b.firstName[0],b.lastName[0]]}),d.jsxs("div",{className:"min-w-0",children:[d.jsxs("h4",{className:"font-black text-gray-900 text-lg truncate",children:[b.firstName," ",b.lastName]}),d.jsx("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest truncate",children:b.email})]})]}),d.jsxs("div",{className:"flex items-center justify-between py-5 border-t border-gray-50 mb-6 text-[10px] font-black",children:[d.jsx("span",{className:"text-gray-400 uppercase tracking-widest",children:"Rle"}),d.jsx("span",{className:`px-3 py-1 rounded-lg border ${y(b.role)}`,children:b.role})]}),d.jsxs("div",{className:"flex items-center justify-between py-5 border-t border-gray-50 mb-6 text-[10px] font-black",children:[d.jsx("span",{className:"text-gray-400 uppercase tracking-widest",children:"Statut"}),d.jsx("span",{className:b.status===Mn.ACTIVE?"text-emerald-500":b.status===Mn.PENDING?"text-amber-500":"text-rose-500",children:b.status})]}),!i&&d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.status!==Mn.ACTIVE&&d.jsx("button",{onClick:()=>m(b.id,Mn.ACTIVE),className:"py-3.5 bg-emerald-600 text-white text-[10px] font-black uppercase tracking-widest rounded-xl hover:bg-emerald-700 transition-all pt-4",children:"Activer"}),b.status===Mn.ACTIVE&&d.jsx("button",{onClick:()=>m(b.id,Mn.DISABLED),className:"py-3.5 bg-amber-500 text-white text-[10px] font-black uppercase tracking-widest rounded-xl hover:bg-amber-600 transition-all pt-4",children:"Bloquer"}),d.jsx("button",{onClick:async()=>{confirm("Supprimer cet utilisateur ?")&&(await ue.deleteUser(b.id),t(await ue.getUsers()))},className:"py-3.5 bg-rose-50 text-rose-600 text-[10px] font-black uppercase tracking-widest rounded-xl hover:bg-rose-100 transition-all border border-rose-100 pt-4",children:"Supprimer"})]})]},b.id))})]})},Ew=({readOnly:i=!1})=>{const[e,t]=ee.useState([]),[r,a]=ee.useState([]),[l,u]=ee.useState(null),[m,p]=ee.useState("");ee.useEffect(()=>{(async()=>{t(await ue.getProspects()),a(await ue.getUsers())})()},[]);const y=E=>{const j=r.find(L=>L.id===E);return j?`${j.firstName} ${j.lastName}`:"Agent inconnu"},b=e.filter(E=>E.fullName.toLowerCase().includes(m.toLowerCase())||E.email.toLowerCase().includes(m.toLowerCase())||E.city.toLowerCase().includes(m.toLowerCase())||y(E.agentId).toLowerCase().includes(m.toLowerCase())),w=[{border:"border-indigo-200",text:"text-indigo-600",bg:"bg-indigo-50/30"},{border:"border-sky-200",text:"text-sky-600",bg:"bg-sky-50/30"},{border:"border-emerald-200",text:"text-emerald-600",bg:"bg-emerald-50/30"},{border:"border-amber-200",text:"text-amber-600",bg:"bg-amber-50/30"},{border:"border-rose-200",text:"text-rose-600",bg:"bg-rose-50/30"},{border:"border-violet-200",text:"text-violet-600",bg:"bg-violet-50/30"}];return d.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700",children:[d.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-black text-gray-900 tracking-tight",children:"Prospects Globaux"}),d.jsx("p",{className:"text-gray-500 font-medium text-lg",children:"Surveillance centralise de tous les dossiers entrants."})]})}),d.jsx("div",{className:"bg-white p-6 rounded-[3rem] border border-gray-100 shadow-xl flex items-center transition-all focus-within:ring-4 focus-within:ring-indigo-50",children:d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-6 flex items-center pointer-events-none text-indigo-400",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"11",cy:"11",r:"8"}),d.jsx("path",{d:"m21 21-4.3-4.3"})]})}),d.jsx("input",{type:"text",placeholder:"Rechercher par nom, ville, email ou agent...",value:m,onChange:E=>p(E.target.value),className:"w-full pl-16 pr-8 py-5 bg-gray-50 border-none rounded-[2rem] outline-none font-bold text-lg text-gray-800 placeholder:text-gray-300 shadow-inner"})]})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-10 pb-20",children:b.map((E,j)=>{const L=w[j%w.length];return d.jsxs("div",{className:`group bg-white rounded-[4rem] p-10 border-2 transition-all duration-500 animate-in slide-in-from-bottom-12 hover:-translate-y-3 hover:shadow-2xl flex flex-col relative ${L.border} shadow-xl shadow-gray-100/40`,style:{animationDelay:`${j*50}ms`},children:[d.jsxs("div",{className:"flex items-start justify-between mb-8",children:[d.jsx("div",{className:`w-20 h-20 rounded-[2.25rem] flex items-center justify-center text-3xl font-black shadow-lg transition-transform duration-500 group-hover:scale-110 bg-white border border-gray-100 ${L.text}`,children:E.fullName[0]}),d.jsxs("div",{className:"flex flex-col items-end gap-2",children:[d.jsx("span",{className:`px-4 py-2 rounded-2xl text-[9px] font-black uppercase tracking-[0.2em] border shadow-sm ${E.status===$t.CONVERTED?"bg-emerald-600 text-white border-emerald-700":"bg-indigo-50 text-indigo-600 border-indigo-100"}`,children:E.status===$t.PENDING?"En attente":"Confirm"}),d.jsxs("span",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest bg-gray-50 px-2 py-1 rounded-lg border border-gray-100",children:["Agent: ",y(E.agentId)]})]})]}),d.jsxs("div",{className:"mb-6 flex-1",children:[d.jsx("h4",{className:"text-2xl font-black text-gray-900 tracking-tight leading-none mb-3 truncate",children:E.fullName}),d.jsxs("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest flex items-center",children:[d.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${L.text.replace("text-","bg-")}`}),E.company||"Compte Particulier"]})]}),d.jsxs("div",{className:"space-y-6 pt-8 border-t border-gray-50 mb-8",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Localisation"}),d.jsxs("span",{className:"text-xs font-black text-gray-700",children:[E.city,", ",E.country]})]}),d.jsxs("div",{className:`p-6 rounded-[2rem] border-2 transition-colors ${L.bg} ${L.border}`,children:[d.jsx("p",{className:`text-[9px] font-black uppercase tracking-[0.2em] mb-2 ${L.text}`,children:"Offre sollicite"}),d.jsx("p",{className:"font-black text-gray-800 text-sm leading-tight truncate",children:E.productOfInterest})]})]}),d.jsx("button",{onClick:()=>u(E),className:"w-full py-5 bg-indigo-600 text-white rounded-[1.75rem] font-black uppercase text-[10px] tracking-[0.2em] shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all pt-6",children:"Consulter le dossier"})]},E.id)})}),l&&d.jsxs("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 animate-in fade-in duration-300",children:[d.jsx("div",{className:"absolute inset-0 bg-indigo-950/80 backdrop-blur-xl",onClick:()=>u(null)}),d.jsxs("div",{className:"bg-white rounded-[4rem] w-full max-w-2xl overflow-hidden relative shadow-2xl animate-in zoom-in-95 duration-500 border border-white/20",children:[d.jsxs("div",{className:"bg-gradient-to-r from-indigo-700 to-blue-600 p-12 text-white relative",children:[d.jsx("button",{onClick:()=>u(null),className:"absolute top-8 right-8 p-3 text-white/40 hover:text-white hover:bg-white/10 rounded-full transition-all",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M18 6 6 18"}),d.jsx("path",{d:"m6 6 12 12"})]})}),d.jsxs("div",{className:"flex items-center gap-6",children:[d.jsx("div",{className:"w-24 h-24 bg-white/10 backdrop-blur-md rounded-[2.5rem] flex items-center justify-center text-4xl font-black border border-white/20",children:l.fullName[0]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-black tracking-tight",children:l.fullName}),d.jsxs("p",{className:"text-indigo-100/70 text-[10px] font-black uppercase tracking-[0.3em] mt-2",children:["Dossier #",l.id.slice(0,8)]})]})]})]}),d.jsxs("div",{className:"p-12 space-y-10 max-h-[60vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 bg-indigo-50/50 rounded-3xl border border-indigo-100",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:"Agent Responsable"}),d.jsx("p",{className:"font-black text-indigo-700 text-lg",children:y(l.agentId)})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:"Source Capte"}),d.jsx("p",{className:"font-black text-indigo-700 text-lg",children:l.source})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-10",children:[d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Tlphone"}),d.jsxs("p",{className:"font-black text-gray-900 text-xl",children:[l.countryCode," ",l.phone]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Email"}),d.jsx("p",{className:"font-black text-indigo-600 text-lg truncate underline decoration-indigo-200 decoration-2 underline-offset-4",children:l.email})]})]}),d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Ville & Pays"}),d.jsxs("p",{className:"font-black text-gray-900 text-xl",children:[l.city,", ",l.country]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Entreprise"}),d.jsx("p",{className:"font-black text-gray-900 text-xl",children:l.company||"Particulier"})]})]})]}),d.jsxs("div",{className:"p-8 bg-gray-50 rounded-[2.5rem] border-2 border-gray-100",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3",children:"Offre d'intrt"}),d.jsx("p",{className:"text-2xl font-black text-slate-800 tracking-tight leading-tight",children:l.productOfInterest})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Notes & Commentaires"}),d.jsxs("div",{className:"p-8 bg-amber-50/50 border-2 border-amber-100 rounded-[2.5rem] relative",children:[d.jsx("div",{className:"absolute -top-4 -left-4 w-10 h-10 bg-white border-2 border-amber-100 rounded-2xl flex items-center justify-center text-xl shadow-sm",children:""}),d.jsx("p",{className:"text-gray-700 font-medium italic leading-relaxed text-lg",children:l.details||"Aucun commentaire additionnel."})]})]})]}),d.jsx("div",{className:"p-10 border-t border-gray-100",children:d.jsx("button",{onClick:()=>u(null),className:"w-full py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-indigo-700 transition-all pt-6",children:"Terminer la consultation"})})]})]})]})},Tw=({readOnly:i=!1})=>{const[e,t]=ee.useState([]),[r,a]=ee.useState(null),[l,u]=ee.useState(null),[m,p]=ee.useState(null),[y,b]=ee.useState(null),[w,E]=ee.useState(""),[j,L]=ee.useState("ALL"),[F,Q]=ee.useState(0),[ie,ne]=ee.useState(0);ee.useEffect(()=>{re()},[]);const re=async()=>{const A=await ue.getClients();t(A.filter(V=>V.status!=="CANCELLED"))},xe=async A=>{a(A);const C=(await ue.getProspects()).find(Ce=>Ce.id===A.prospectId);u(C||null)},be=F-ie,ye=be*.15,k=async A=>{A.preventDefault(),!(i||!m)&&(await ue.addSale({clientId:m.id,agentId:m.agentId,amount:F,profit:be,commission:ye,status:"PENDING"}),alert("Vente enregistre avec succs !"),p(null),Q(0),ne(0),re())},N=async A=>{if(A.preventDefault(),i||!y)return;const C=new FormData(A.currentTarget).get("reason");await ue.deleteClient(y.id,C),await Ae.add("notifications",{userId:y.agentId,title:"Dossier Client Supprim",message:`Le client ${y.fullName} a t supprim du CRM par l'administration. Motif : ${C}`,type:"alert",read:!1,createdAt:new Date().toISOString()}),alert("Client supprim et agent notifi."),b(null),re()},I=e.filter(A=>{var Ce;const V=A.fullName.toLowerCase().includes(w.toLowerCase())||((Ce=A.company)==null?void 0:Ce.toLowerCase().includes(w.toLowerCase()))||A.product.toLowerCase().includes(w.toLowerCase()),C=j==="ALL"||A.status===j;return V&&C}),R=[{border:"border-indigo-200",text:"text-indigo-600",bg:"bg-indigo-50/30"},{border:"border-emerald-200",text:"text-emerald-600",bg:"bg-emerald-50/30"},{border:"border-amber-200",text:"text-amber-600",bg:"bg-amber-50/30"},{border:"border-sky-200",text:"text-sky-600",bg:"bg-sky-50/30"},{border:"border-rose-200",text:"text-rose-600",bg:"bg-rose-50/30"}];return d.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700",children:[d.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-black text-gray-900 tracking-tight",children:"Portefeuille Clients"}),d.jsx("p",{className:"text-gray-500 font-medium text-lg",children:"Gestion globale des contrats valids par les agents."})]})}),d.jsxs("div",{className:"bg-white p-6 rounded-[3rem] border border-gray-100 shadow-xl flex flex-col md:flex-row gap-4 transition-all focus-within:ring-4 focus-within:ring-indigo-50",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-6 flex items-center pointer-events-none text-indigo-400",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"11",cy:"11",r:"8"}),d.jsx("path",{d:"m21 21-4.3-4.3"})]})}),d.jsx("input",{type:"text",placeholder:"Rechercher par nom, entreprise, produit...",value:w,onChange:A=>E(A.target.value),className:"w-full pl-16 pr-8 py-5 bg-gray-50 border-none rounded-[2rem] outline-none font-bold text-lg text-gray-800 placeholder:text-gray-300 shadow-inner"})]}),d.jsx("div",{className:"w-full md:w-64",children:d.jsxs("select",{value:j,onChange:A=>L(A.target.value),className:"w-full px-6 py-5 bg-gray-50 border-none rounded-[1.75rem] outline-none font-black text-[10px] uppercase tracking-widest cursor-pointer shadow-inner text-gray-600",children:[d.jsx("option",{value:"ALL",children:"Tous les statuts"}),d.jsx("option",{value:"PENDING",children:"En attente"}),d.jsx("option",{value:"SALE_CONCLUDED",children:"Vente conclue"})]})})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-10 pb-20",children:I.map((A,V)=>{const C=R[V%R.length];return d.jsxs("div",{className:`group bg-white rounded-[4rem] p-10 border-2 transition-all duration-500 animate-in slide-in-from-bottom-12 hover:-translate-y-3 hover:shadow-2xl flex flex-col relative ${C.border} shadow-xl shadow-gray-100/40`,style:{animationDelay:`${V*50}ms`},children:[d.jsxs("div",{className:"flex items-start justify-between mb-8",children:[d.jsx("div",{className:`w-20 h-20 rounded-[2.25rem] flex items-center justify-center text-3xl font-black bg-white border border-gray-100 ${C.text}`,children:A.fullName[0]}),d.jsx("span",{className:`px-4 py-2 rounded-2xl text-[9px] font-black uppercase tracking-[0.2em] border shadow-sm ${A.status==="SALE_CONCLUDED"?"bg-emerald-600 text-white border-emerald-700":"bg-amber-50 text-amber-600 border-amber-100"}`,children:A.status==="SALE_CONCLUDED"?"Pay":"En attente"})]}),d.jsxs("div",{className:"mb-6 flex-1",children:[d.jsx("h4",{className:"text-2xl font-black text-gray-900 mb-2 truncate",children:A.fullName}),d.jsx("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest",children:A.company||"Compte Particulier"})]}),d.jsx("div",{className:"space-y-4 pt-8 border-t border-gray-50 mb-8",children:d.jsxs("div",{className:"p-6 rounded-[2rem] border-2 transition-colors bg-gray-50 border-gray-100",children:[d.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.2em] mb-2 text-gray-400",children:"Contrat de service"}),d.jsx("p",{className:"font-black text-gray-800 text-sm leading-tight truncate",children:A.product})]})}),d.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[d.jsx("button",{onClick:()=>xe(A),className:"w-full py-4 bg-blue-600 text-white rounded-[1.5rem] font-black uppercase text-[10px] tracking-widest shadow-lg hover:bg-blue-700 transition-all pt-5",children:"Consulter Dossier"}),!i&&d.jsxs(d.Fragment,{children:[A.status==="PENDING"&&d.jsx("button",{onClick:()=>p(A),className:"w-full py-4 bg-emerald-600 text-white rounded-[1.5rem] font-black uppercase text-[10px] tracking-widest shadow-lg hover:bg-emerald-700 transition-all pt-5",children:"Conclure la vente"}),d.jsx("button",{onClick:()=>b(A),className:"w-full py-4 bg-rose-50 text-rose-600 border border-rose-100 rounded-[1.5rem] font-black uppercase text-[10px] tracking-widest hover:bg-rose-100 transition-all pt-5",children:"Supprimer"})]})]})]},A.id)})}),r&&d.jsxs("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 animate-in fade-in",children:[d.jsx("div",{className:"absolute inset-0 bg-indigo-950/80 backdrop-blur-xl",onClick:()=>{a(null),u(null)}}),d.jsxs("div",{className:"bg-white rounded-[4rem] w-full max-w-2xl overflow-hidden relative shadow-2xl animate-in zoom-in-95 border border-white/20",children:[d.jsxs("div",{className:"bg-indigo-700 p-12 text-white flex items-center gap-6",children:[d.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-[2.5rem] flex items-center justify-center text-4xl font-black",children:r.fullName[0]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-black",children:r.fullName}),d.jsxs("p",{className:"text-indigo-100 text-[10px] font-black uppercase tracking-widest",children:["Client ID #",r.id.slice(0,8)]})]})]}),d.jsxs("div",{className:"p-12 space-y-8 max-h-[60vh] overflow-y-auto",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Coordonnes"}),d.jsx("p",{className:"font-black text-gray-900",children:r.phone}),d.jsx("p",{className:"font-bold text-indigo-600 text-sm",children:r.email})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Localisation"}),d.jsx("p",{className:"font-black text-gray-900",children:r.country})]})]}),d.jsxs("div",{className:"p-8 bg-gray-50 rounded-[2.5rem] border-2 border-gray-100",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3",children:"Produit souscrit"}),d.jsx("p",{className:"text-xl font-black text-slate-800 leading-tight",children:r.product})]}),l&&d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Dtails Prospect initiaux"}),d.jsxs("div",{className:"p-8 bg-indigo-50/50 border-2 border-indigo-100 rounded-[2.5rem] italic font-medium",children:[l.details||"Aucun dtail saisi dans le formulaire prospect.",d.jsxs("p",{className:"mt-4 text-[9px] font-black uppercase text-indigo-400 not-italic tracking-widest",children:["Source: ",l.source]})]})]})]}),d.jsx("div",{className:"p-10 border-t border-gray-100",children:d.jsx("button",{onClick:()=>{a(null),u(null)},className:"w-full py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase text-[10px] pt-6 shadow-xl shadow-indigo-100",children:"Fermer la consultation"})})]})]}),m&&d.jsxs("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-indigo-950/80 backdrop-blur-md",onClick:()=>p(null)}),d.jsxs("div",{className:"bg-white rounded-[4rem] w-full max-w-md relative shadow-2xl animate-in zoom-in-95 border-2 border-emerald-100",children:[d.jsxs("div",{className:"p-10 border-b-2 border-gray-50 bg-emerald-50/30 rounded-t-[4rem] text-center",children:[d.jsx("h3",{className:"text-2xl font-black text-emerald-700 tracking-tight leading-none mb-2",children:"Finalisation de la vente"}),d.jsxs("p",{className:"text-emerald-600 font-bold text-xs uppercase tracking-widest",children:["Dossier: ",m.fullName]})]}),d.jsxs("form",{onSubmit:k,className:"p-10 space-y-6",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Chiffre d'Affaires (FCFA)"}),d.jsx("input",{name:"amount",type:"number",required:!0,onChange:A=>Q(Number(A.target.value)),className:"w-full px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-emerald-200 rounded-2xl outline-none font-black text-lg",placeholder:"Ex: 500000"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Montant Rel (Charges)"}),d.jsx("input",{name:"realCost",type:"number",required:!0,onChange:A=>ne(Number(A.target.value)),className:"w-full px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-emerald-200 rounded-2xl outline-none font-black text-lg",placeholder:"Ex: 350000"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Bnfice Net"}),d.jsx("div",{className:"w-full px-6 py-4 bg-indigo-50 border-2 border-indigo-100 rounded-2xl font-black text-indigo-700",children:be.toLocaleString()})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Commission (15%)"}),d.jsx("div",{className:"w-full px-6 py-4 bg-amber-50 border-2 border-amber-100 rounded-2xl font-black text-amber-700",children:ye.toLocaleString()})]})]}),d.jsx("button",{type:"submit",className:"w-full py-5 bg-emerald-600 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl pt-6 hover:bg-emerald-700 transition-all",children:"Valider et Enregistrer la vente"})]})]})]}),y&&d.jsxs("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-indigo-950/80 backdrop-blur-md",onClick:()=>b(null)}),d.jsxs("div",{className:"bg-white rounded-[4rem] w-full max-w-md relative shadow-2xl animate-in zoom-in-95 border-2 border-rose-100",children:[d.jsxs("div",{className:"p-10 border-b-2 border-gray-50 bg-rose-50/30 rounded-t-[4rem] text-center",children:[d.jsx("h3",{className:"text-2xl font-black text-rose-700 tracking-tight leading-none mb-2",children:"Confirmer la suppression"}),d.jsxs("p",{className:"text-rose-600 font-bold text-xs uppercase tracking-widest",children:["Dossier: ",y.fullName]})]}),d.jsxs("form",{onSubmit:N,className:"p-10 space-y-6",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2 text-center block",children:"Motif de la suppression"}),d.jsx("textarea",{name:"reason",required:!0,rows:4,className:"w-full px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-rose-200 rounded-3xl outline-none font-bold italic text-gray-600 resize-none",placeholder:"Indiquez  l'agent pourquoi ce dossier est annul..."}),d.jsx("p",{className:"text-[9px] text-gray-400 font-medium italic text-center px-4 mt-2",children:"* Une notification sera immdiatement envoye  l'agent."})]}),d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsx("button",{type:"submit",className:"w-full py-5 bg-rose-600 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl pt-6 hover:bg-rose-700 transition-all",children:"Supprimer dfinitivement"}),d.jsx("button",{type:"button",onClick:()=>b(null),className:"w-full py-5 bg-gray-100 text-gray-500 rounded-2xl font-black uppercase text-[10px] tracking-widest pt-6",children:"Annuler l'action"})]})]})]})]})]})},Sw=({readOnly:i=!1})=>{var N;const[e,t]=ee.useState([]),[r,a]=ee.useState([]),[l,u]=ee.useState([]),[m,p]=ee.useState(""),[y,b]=ee.useState(null),[w,E]=ee.useState(0),[j,L]=ee.useState(0);ee.useEffect(()=>{F()},[]);const F=async()=>{const[I,R,A]=await Promise.all([ue.getSales(),ue.getClients(),ue.getUsers()]);t(I),a(R),u(A)},Q=I=>r.find(R=>R.id===I),ie=I=>l.find(R=>R.id===I),ne=e.filter(I=>{const R=Q(I.clientId),A=ie(I.agentId),V=(R==null?void 0:R.fullName.toLowerCase())||"",C=A?`${A.firstName} ${A.lastName}`.toLowerCase():"",Ce=m.toLowerCase();return V.includes(Ce)||C.includes(Ce)}),re=I=>{i||(b(I),E(I.amount),L(I.amount-I.profit))},xe=w-j,be=xe*.15,ye=async I=>{I.preventDefault(),!(!y||i)&&(await ue.updateSale(y.id,{amount:w,profit:xe,commission:be}),alert("Vente corrige avec succs !"),b(null),F())},k=[{border:"border-indigo-200",accent:"text-indigo-600",bg:"bg-indigo-50/30"},{border:"border-emerald-200",accent:"text-emerald-600",bg:"bg-emerald-50/30"},{border:"border-amber-200",accent:"text-amber-600",bg:"bg-amber-50/30"},{border:"border-sky-200",accent:"text-sky-600",bg:"bg-sky-50/30"},{border:"border-rose-200",accent:"text-rose-600",bg:"bg-rose-50/30"},{border:"border-violet-200",accent:"text-violet-600",bg:"bg-violet-50/30"}];return d.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700 pb-20",children:[d.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-black text-gray-900 tracking-tight",children:"Journal des Ventes"}),d.jsx("p",{className:"text-gray-500 font-medium text-lg",children:"Suivi analytique et financier de toutes les transactions."})]})}),d.jsx("div",{className:"bg-white p-6 rounded-[3rem] border border-gray-100 shadow-xl flex items-center transition-all focus-within:ring-4 focus-within:ring-indigo-50",children:d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-6 flex items-center pointer-events-none text-indigo-400",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"11",cy:"11",r:"8"}),d.jsx("path",{d:"m21 21-4.3-4.3"})]})}),d.jsx("input",{type:"text",placeholder:"Rechercher par client ou agent responsable...",value:m,onChange:I=>p(I.target.value),className:"w-full pl-16 pr-8 py-5 bg-gray-50 border-none rounded-[2rem] outline-none font-bold text-lg text-gray-800 placeholder:text-gray-300 shadow-inner"})]})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-10",children:ne.map((I,R)=>{const A=Q(I.clientId),V=ie(I.agentId),C=k[R%k.length];return d.jsxs("div",{className:`group bg-white rounded-[4rem] p-10 border-2 transition-all duration-500 animate-in slide-in-from-bottom-12 hover:-translate-y-3 hover:shadow-2xl flex flex-col relative ${C.border} shadow-xl shadow-gray-100/40`,style:{animationDelay:`${R*50}ms`},children:[d.jsxs("div",{className:"flex items-start justify-between mb-8",children:[d.jsx("div",{className:`w-16 h-16 rounded-[1.75rem] flex items-center justify-center text-2xl font-black bg-white border border-gray-100 ${C.accent} shadow-sm group-hover:scale-110 transition-transform`,children:(A==null?void 0:A.fullName[0])||"C"}),d.jsxs("div",{className:"flex flex-col items-end gap-2",children:[d.jsx("span",{className:`px-4 py-1.5 rounded-xl text-[8px] font-black uppercase tracking-widest border ${I.status==="PAID"?"bg-emerald-600 text-white border-emerald-700":"bg-amber-50 text-amber-600 border-amber-100"}`,children:I.status==="PAID"?"Dj Pay":" Rgler"}),!i&&d.jsxs("button",{onClick:()=>re(I),className:"text-[9px] font-black text-indigo-500 uppercase tracking-widest hover:text-indigo-700 flex items-center gap-1 transition-colors",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),d.jsx("path",{d:"m15 5 4 4"})]}),"Modifier"]})]})]}),d.jsxs("div",{className:"mb-8",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Chiffre d'Affaires"}),d.jsxs("h3",{className:"text-4xl font-black text-indigo-700 tracking-tight leading-none mb-4",children:[I.amount.toLocaleString()," ",d.jsx("span",{className:"text-sm",children:"FCFA"})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("div",{className:"flex-1 bg-emerald-50/50 p-4 rounded-2xl border border-emerald-100",children:[d.jsx("p",{className:"text-[8px] font-black text-emerald-600 uppercase tracking-widest mb-1",children:"Bnfice"}),d.jsxs("p",{className:"font-black text-emerald-700 text-sm",children:["+",I.profit.toLocaleString()]})]}),d.jsxs("div",{className:"flex-1 bg-amber-50/50 p-4 rounded-2xl border border-amber-100",children:[d.jsx("p",{className:"text-[8px] font-black text-amber-600 uppercase tracking-widest mb-1",children:"Commission"}),d.jsx("p",{className:"font-black text-amber-700 text-sm",children:I.commission.toLocaleString()})]})]})]}),d.jsxs("div",{className:"space-y-6 pt-8 border-t border-gray-50 mt-auto",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Client"}),d.jsx("p",{className:"font-black text-gray-800 text-lg leading-tight truncate",children:(A==null?void 0:A.fullName)||"Client Inconnu"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Agent Resp."}),d.jsx("p",{className:"font-bold text-gray-600 text-xs truncate",children:V?`${V.firstName} ${V.lastName}`:"N/A"})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Produit"}),d.jsx("p",{className:"font-bold text-indigo-600 text-xs truncate",children:(A==null?void 0:A.product)||"Service V6"})]})]})]}),d.jsxs("div",{className:"flex items-center justify-between mt-8 text-[8px] font-black text-gray-300 uppercase tracking-[0.2em]",children:[d.jsxs("span",{children:["#",I.id.slice(0,8)]}),d.jsx("span",{children:new Date(I.createdAt).toLocaleDateString()})]})]},I.id)})}),y&&d.jsxs("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-indigo-950/80 backdrop-blur-md",onClick:()=>b(null)}),d.jsxs("div",{className:"bg-white rounded-[4rem] w-full max-w-md relative shadow-2xl animate-in zoom-in-95 border-2 border-indigo-100",children:[d.jsxs("div",{className:"p-10 border-b-2 border-gray-50 bg-indigo-50/30 rounded-t-[4rem] text-center",children:[d.jsx("h3",{className:"text-2xl font-black text-indigo-700 tracking-tight leading-none mb-2",children:"Correction de la vente"}),d.jsxs("p",{className:"text-indigo-600 font-bold text-xs uppercase tracking-widest",children:["Client: ",(N=Q(y.clientId))==null?void 0:N.fullName]})]}),d.jsxs("form",{onSubmit:ye,className:"p-10 space-y-6",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Chiffre d'Affaires (FCFA)"}),d.jsx("input",{name:"amount",type:"number",required:!0,value:w,onChange:I=>E(Number(I.target.value)),className:"w-full px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-indigo-200 rounded-2xl outline-none font-black text-lg shadow-inner transition-all",placeholder:"Ex: 500000"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Montant Rel (Charges)"}),d.jsx("input",{name:"realCost",type:"number",required:!0,value:j,onChange:I=>L(Number(I.target.value)),className:"w-full px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-indigo-200 rounded-2xl outline-none font-black text-lg shadow-inner transition-all",placeholder:"Ex: 350000"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Nouv. Bnfice"}),d.jsx("div",{className:"w-full px-6 py-4 bg-emerald-50 border-2 border-emerald-100 rounded-2xl font-black text-emerald-700",children:xe.toLocaleString()})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Nouv. Commission"}),d.jsx("div",{className:"w-full px-6 py-4 bg-amber-50 border-2 border-amber-100 rounded-2xl font-black text-amber-700",children:be.toLocaleString()})]})]}),d.jsxs("div",{className:"flex flex-col gap-3 pt-4",children:[d.jsx("button",{type:"submit",className:"w-full py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl pt-6 hover:bg-indigo-700 transition-all",children:"Enregistrer les corrections"}),d.jsx("button",{type:"button",onClick:()=>b(null),className:"w-full py-5 bg-gray-50 text-gray-400 rounded-2xl font-black uppercase text-[10px] pt-6 tracking-widest hover:bg-gray-100 transition-all",children:"Annuler"})]})]})]})]}),ne.length===0&&d.jsxs("div",{className:"py-40 text-center bg-gray-50/50 rounded-[5rem] border-4 border-dashed border-gray-100",children:[d.jsx("div",{className:"w-24 h-24 bg-white rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 shadow-sm text-gray-200",children:me.Sales}),d.jsx("p",{className:"text-gray-300 font-black uppercase text-xl tracking-[0.2em] italic",children:"Aucune vente correspondante"})]})]})},Aw=({readOnly:i=!1})=>{const[e,t]=ee.useState([]),[r,a]=ee.useState([]),[l,u]=ee.useState([]),[m,p]=ee.useState(null);ee.useEffect(()=>{(async()=>{const[j,L,F]=await Promise.all([ue.getSales(),ue.getClients(),ue.getUsers()]);t(j),a(L),u(F)})()},[]);const y=async E=>{if(i)return;await ue.updateSaleStatus(E.id,"PAID");const j=await ue.getSales();t(j),p(null)},b=E=>{var j;return((j=r.find(L=>L.id===E))==null?void 0:j.fullName)||"Inconnu"},w=E=>{const j=l.find(L=>L.id===E);return j?`${j.firstName} ${j.lastName}`:"Inconnu"};return d.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700 pb-20",children:[d.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-black text-gray-900 tracking-tight",children:"Commissions Agents"}),d.jsx("p",{className:"text-gray-500 font-medium text-lg",children:"Suivi des rglements et reversements financiers."})]})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10",children:e.map((E,j)=>{const L=E.status==="PAID",F=b(E.clientId),Q=w(E.agentId);return d.jsxs("div",{className:`group bg-white rounded-[4rem] p-10 border-2 transition-all duration-500 animate-in slide-in-from-bottom-12 hover:-translate-y-3 hover:shadow-2xl flex flex-col relative shadow-xl shadow-gray-100/40 
                ${L?"border-emerald-200 bg-emerald-50/20":"border-amber-200 bg-amber-50/20"}`,style:{animationDelay:`${j*50}ms`},children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("div",{className:`w-14 h-14 rounded-[1.5rem] flex items-center justify-center font-black text-white shadow-lg transition-transform group-hover:rotate-12
                  ${L?"bg-emerald-600 shadow-emerald-100":"bg-amber-500 shadow-amber-100"}`,children:L?"":""}),d.jsx("span",{className:`px-4 py-1.5 rounded-xl text-[8px] font-black uppercase tracking-widest border shadow-sm
                  ${L?"bg-emerald-600 text-white border-emerald-700":"bg-white text-amber-600 border-amber-100"}`,children:L?"Paiement effectu":"En attente"})]}),d.jsxs("div",{className:"mb-8",children:[d.jsx("p",{className:`text-[10px] font-black uppercase tracking-widest mb-1 ${L?"text-emerald-500":"text-amber-500"}`,children:"Commission due"}),d.jsxs("h3",{className:`text-4xl font-black tracking-tight leading-none mb-6 
                  ${L?"text-emerald-700":"text-amber-700"}`,children:[E.commission.toLocaleString()," ",d.jsx("span",{className:"text-xs",children:"FCFA"})]})]}),d.jsxs("div",{className:"space-y-6 pt-8 border-t border-gray-100 flex-1",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Bnficiaire (Agent)"}),d.jsx("p",{className:"font-black text-gray-800 text-lg leading-tight truncate",children:Q})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Provenance (Client)"}),d.jsx("p",{className:"font-bold text-gray-500 text-sm truncate",children:F})]})]}),d.jsxs("div",{className:"mt-8",children:[!i&&E.status==="PENDING"&&d.jsx("button",{onClick:()=>p(E),className:"w-full py-5 bg-indigo-600 text-white rounded-[1.75rem] font-black uppercase text-[10px] tracking-widest pt-6 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all",children:"Valider Rglement"}),L&&d.jsx("div",{className:"w-full py-5 bg-emerald-100/50 text-emerald-600 rounded-[1.75rem] font-black uppercase text-[10px] tracking-widest pt-6 border border-emerald-100 text-center",children:"Transaction Rgle"})]})]},E.id)})}),m&&d.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 animate-in fade-in duration-300",children:[d.jsx("div",{className:"absolute inset-0 bg-indigo-950/80 backdrop-blur-md",onClick:()=>p(null)}),d.jsxs("div",{className:"bg-white rounded-[4rem] w-full max-w-md relative shadow-2xl animate-in zoom-in-95 border-2 border-indigo-50",children:[d.jsxs("div",{className:"p-10 border-b-2 border-gray-50 bg-gray-50/50 rounded-t-[4rem] text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-emerald-100 text-emerald-600 rounded-[2rem] flex items-center justify-center mx-auto mb-6 text-4xl shadow-inner",children:""}),d.jsx("h3",{className:"text-2xl font-black text-gray-900 tracking-tight leading-none mb-2",children:"Confirmer le rglement"}),d.jsx("p",{className:"text-gray-500 font-bold text-xs uppercase tracking-widest",children:"Action Dfinitive"})]}),d.jsxs("div",{className:"p-10 space-y-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center py-4 border-b border-gray-50",children:[d.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Agent"}),d.jsx("span",{className:"font-black text-gray-800",children:w(m.agentId)})]}),d.jsxs("div",{className:"flex justify-between items-center py-4 border-b border-gray-50",children:[d.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Client"}),d.jsx("span",{className:"font-black text-gray-800",children:b(m.clientId)})]}),d.jsxs("div",{className:"flex justify-between items-center py-4",children:[d.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Montant due"}),d.jsxs("span",{className:"text-2xl font-black text-emerald-600",children:[m.commission.toLocaleString()," FCFA"]})]})]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx("button",{onClick:()=>y(m),className:"w-full py-5 bg-emerald-600 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl pt-6 hover:bg-emerald-700 transition-all",children:"Confirmer le paiement"}),d.jsx("button",{onClick:()=>p(null),className:"w-full py-5 bg-gray-100 text-gray-400 rounded-2xl font-black uppercase text-[10px] pt-6 tracking-widest hover:bg-gray-200 transition-all",children:"Annuler"})]})]})]})]})]})},Nw=({readOnly:i=!1})=>{const[e,t]=ee.useState([]);return ee.useEffect(()=>{(async()=>t(await ue.getNotifications()))()},[]),d.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in duration-700",children:[d.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"Alertes & Systme"}),d.jsx("div",{className:"space-y-4",children:e.map(r=>d.jsxs("div",{className:`p-6 rounded-[2rem] border ${r.read?"bg-white":"bg-indigo-50/50 border-indigo-100"}`,children:[d.jsx("h4",{className:"font-black text-gray-900",children:r.title}),d.jsx("p",{className:"text-gray-600 text-sm",children:r.message})]},r.id))})]})},Iw=({readOnly:i=!1})=>{const[e,t]=ee.useState({name:"AFTRAS CRM",currency:"FCFA"}),[r,a]=ee.useState(null),l=ee.useRef(null);ee.useEffect(()=>{(async()=>{t(await ue.getAppSettings()),a(await ue.getAppLogo())})()},[]);const u=async m=>{if(m.preventDefault(),i)return;const p=new FormData(m.currentTarget);await ue.updateAppSettings({name:p.get("name"),currency:p.get("currency")}),alert("Enregistr !")};return d.jsxs("div",{className:"max-w-2xl mx-auto space-y-12 py-10 animate-in fade-in duration-700",children:[d.jsx("h1",{className:"text-3xl font-black text-gray-900 text-center",children:"Paramtres"}),d.jsxs("div",{className:"bg-white p-10 rounded-[3rem] border border-gray-100 shadow-xl space-y-10",children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("div",{className:"w-32 h-32 bg-gray-50 rounded-[2.5rem] border-4 border-dashed border-gray-100 flex items-center justify-center overflow-hidden",children:r?d.jsx("img",{src:r,alt:"Logo",className:"w-full h-full object-contain p-4"}):""}),!i&&d.jsx("button",{onClick:()=>{var m;return(m=l.current)==null?void 0:m.click()},className:"mt-4 text-[10px] font-black text-indigo-600 uppercase tracking-widest",children:"Changer le logo"}),d.jsx("input",{type:"file",ref:l,className:"hidden",onChange:async m=>{var p;if((p=m.target.files)!=null&&p[0]){const y=new FileReader;y.onloadend=async()=>{await ue.updateAppLogo(y.result),a(y.result)},y.readAsDataURL(m.target.files[0])}}})]}),d.jsxs("form",{onSubmit:u,className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Nom de l'App"}),d.jsx("input",{name:"name",defaultValue:e.name,required:!0,className:"w-full px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-indigo-100 rounded-2xl outline-none font-bold"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Devise"}),d.jsx("input",{name:"currency",defaultValue:e.currency,required:!0,className:"w-full px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-indigo-100 rounded-2xl outline-none font-bold"})]}),!i&&d.jsx("button",{type:"submit",className:"w-full py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase text-[10px] pt-6 shadow-xl shadow-indigo-100",children:"Mettre  jour"})]})]})]})},Cw=({user:i,onUpdate:e,readOnly:t=!1})=>{const r=async a=>{if(a.preventDefault(),t)return;const l=new FormData(a.currentTarget),u=await ue.updateUser(i.id,{firstName:l.get("firstName"),lastName:l.get("lastName"),phone:l.get("phone")});e(u),alert("Profil mis  jour !")};return d.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 py-12 animate-in fade-in duration-700",children:[d.jsx("h1",{className:"text-4xl font-black text-gray-900 text-center tracking-tight",children:"Profil Admin"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[d.jsxs("div",{className:"bg-white p-10 rounded-[3.5rem] border-2 border-gray-50 shadow-xl flex flex-col",children:[d.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.25em] text-gray-400 mb-10",children:"Infos Personnelles"}),d.jsxs("form",{onSubmit:r,className:"space-y-6 flex-1",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[d.jsx("input",{name:"firstName",defaultValue:i.firstName,placeholder:"Prnom",required:!0,className:"w-full px-6 py-4 bg-gray-50 rounded-2xl font-bold border-2 border-transparent focus:border-indigo-100"}),d.jsx("input",{name:"lastName",defaultValue:i.lastName,placeholder:"Nom",required:!0,className:"w-full px-6 py-4 bg-gray-50 rounded-2xl font-bold border-2 border-transparent focus:border-indigo-100"})]}),d.jsx("input",{value:i.email,readOnly:!0,className:"w-full px-6 py-4 bg-gray-100/50 rounded-2xl font-bold cursor-not-allowed text-gray-400 border-2 border-transparent"}),d.jsx("input",{name:"phone",defaultValue:i.phone,placeholder:"Tlphone",className:"w-full px-6 py-4 bg-gray-50 rounded-2xl font-bold border-2 border-transparent focus:border-indigo-100"}),!t&&d.jsx("button",{type:"submit",className:"w-full py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase text-[10px] pt-6 shadow-xl shadow-indigo-100",children:"Enregistrer"})]})]}),d.jsxs("div",{className:"bg-white p-10 rounded-[3.5rem] border-2 border-gray-50 shadow-xl flex flex-col",children:[d.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.25em] text-gray-400 mb-10",children:"Scurit Accs"}),d.jsx("div",{className:"p-8 bg-gray-50 rounded-3xl border-2 border-dashed border-gray-200",children:d.jsx("p",{className:"text-sm font-medium text-gray-500 text-center italic leading-relaxed",children:"Le changement de mot de passe administrateur s'effectue via la console d'authentification Firebase pour des raisons de haute scurit."})})]})]})]})},ep=({label:i,value:e,subValue:t,trend:r,icon:a,color:l="indigo",onClick:u})=>{const m={indigo:{bg:"bg-indigo-50/50",text:"text-indigo-600",title:"text-indigo-700",border:"border-indigo-100",hover:"hover:border-indigo-300 hover:shadow-indigo-200/50",shadow:"shadow-indigo-100/50",iconBg:"bg-white"},emerald:{bg:"bg-emerald-50/50",text:"text-emerald-600",title:"text-emerald-700",border:"border-emerald-100",hover:"hover:border-emerald-300 hover:shadow-emerald-200/50",shadow:"shadow-emerald-100/50",iconBg:"bg-white"},amber:{bg:"bg-amber-50/50",text:"text-amber-600",title:"text-amber-700",border:"border-amber-100",hover:"hover:border-amber-300 hover:shadow-amber-200/50",shadow:"shadow-amber-100/50",iconBg:"bg-white"},rose:{bg:"bg-rose-50/50",text:"text-rose-600",title:"text-rose-700",border:"border-rose-100",hover:"hover:border-rose-300 hover:shadow-rose-200/50",shadow:"shadow-rose-100/50",iconBg:"bg-white"},sky:{bg:"bg-sky-50/50",text:"text-sky-600",title:"text-sky-700",border:"border-sky-100",hover:"hover:border-sky-300 hover:shadow-sky-200/50",shadow:"shadow-sky-100/50",iconBg:"bg-white"}},p=m[l]||m.indigo;return d.jsxs("div",{onClick:u,className:`
        ${p.bg} p-6 rounded-[2rem] shadow-sm border-2 transition-all duration-500 group relative overflow-hidden
        ${p.border} ${p.shadow} ${p.hover}
        ${u?"cursor-pointer hover:-translate-y-2 active:scale-95":""}
      `,children:[d.jsx("div",{className:`absolute -right-4 -bottom-4 w-24 h-24 rounded-full blur-3xl opacity-0 group-hover:opacity-40 transition-opacity duration-700 ${p.bg.replace("/50","")}`}),d.jsxs("div",{className:"flex items-start justify-between relative z-10",children:[d.jsxs("div",{className:"flex-1 pr-2",children:[d.jsx("p",{className:`text-[10px] font-black uppercase tracking-[0.2em] mb-2 transition-colors ${p.title}`,children:i}),d.jsx("h3",{className:"text-2xl font-black text-gray-900 tracking-tight leading-none group-hover:scale-105 transition-transform origin-left duration-300",children:e}),t&&d.jsxs("div",{className:"flex items-center mt-4",children:[r==="up"&&d.jsxs("span",{className:"text-[10px] text-emerald-600 font-black flex items-center bg-white/80 backdrop-blur-sm px-2.5 py-1 rounded-xl border border-emerald-100 shadow-sm",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1.5",children:[d.jsx("polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17"}),d.jsx("polyline",{points:"16 7 22 7 22 13"})]}),t]}),r==="down"&&d.jsxs("span",{className:"text-[10px] text-rose-600 font-black flex items-center bg-white/80 backdrop-blur-sm px-2.5 py-1 rounded-xl border border-rose-100 shadow-sm",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1.5",children:[d.jsx("polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7"}),d.jsx("polyline",{points:"16 17 22 17 22 11"})]}),t]}),!r&&d.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-tighter bg-white/80 backdrop-blur-sm px-2.5 py-1 rounded-xl border border-gray-100 shadow-sm",children:t})]})]}),d.jsx("div",{className:`p-4 rounded-2xl transition-all duration-500 group-hover:scale-110 group-hover:rotate-12 shadow-md shrink-0 border border-white/50 ${p.iconBg} ${p.text}`,children:a})]})]})},Rw={"+225":"Cte d'Ivoire","+221":"Sngal","+237":"Cameroun","+212":"Maroc","+213":"Algrie","+216":"Tunisie","+223":"Mali","+226":"Burkina Faso","+227":"Niger","+228":"Togo","+229":"Bnin","+241":"Gabon","+242":"Congo-Brazzaville","+243":"RD Congo","+261":"Madagascar","+234":"Nigria","+254":"Kenya","+27":"Afrique du Sud"},kw=({user:i,onNavigate:e})=>{const[t,r]=ee.useState({prospects:0,pending:0,clients:0}),[a,l]=ee.useState([]),[u,m]=ee.useState({name:"AFTRAS CRM",currency:"FCFA"}),[p,y]=ee.useState(0),[b,w]=ee.useState(0),[E,j]=ee.useState(0);return ee.useEffect(()=>{(async()=>{try{const[F,Q,ie,ne,re,xe,be]=await Promise.all([ue.getProspectsByAgent(i.id),ue.getClientsByAgent(i.id),ue.getNotifications(i.id),ue.getAppSettings(),ue.getProspectsTodayByAgent(i.id),ue.getAgentCommissionTotal(i.id),ue.getSalesByAgent(i.id)]),ye=Q.filter(N=>N.status!=="CANCELLED"),k=be.filter(N=>N.status==="PENDING").reduce((N,I)=>N+I.commission,0);r({prospects:F.length,pending:F.filter(N=>N.status===$t.PENDING).length,clients:ye.length}),l(ie),m(ne),y(re),w(xe),j(k)}catch(F){console.error("Erreur lors du chargement des donnes:",F),r({prospects:0,pending:0,clients:0}),l([]),m({name:"AFTRAS CRM",currency:"FCFA"}),y(0),w(0),j(0)}})()},[i.id]),d.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-3xl font-black text-gray-900 tracking-tight",children:["Salut, ",i.firstName," "]}),d.jsxs("p",{className:"text-gray-500 font-medium text-lg",children:["Bonne journe de prospection sur votre espace ",u.name,"."]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsxs("div",{onClick:()=>e("prospecting"),className:"bg-white rounded-[3rem] p-8 border-0 shadow-xl hover:shadow-2xl transition-all cursor-pointer group",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("div",{className:"w-16 h-16 bg-indigo-600 text-white rounded-2xl flex items-center justify-center text-2xl font-black shadow-lg group-hover:scale-110 transition-transform",children:me.Prospect}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Mes Prospects"}),d.jsx("p",{className:"text-4xl font-black text-gray-900",children:t.prospects}),d.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:[p," aujourd'hui"]})]})]}),d.jsx("div",{className:"w-16 h-1 bg-indigo-100 rounded-full"})]}),d.jsxs("div",{onClick:()=>e("prospecting"),className:"bg-white rounded-[3rem] p-8 border-0 shadow-xl hover:shadow-2xl transition-all cursor-pointer group",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("div",{className:"w-16 h-16 bg-amber-500 text-white rounded-2xl flex items-center justify-center text-2xl font-black shadow-lg group-hover:scale-110 transition-transform",children:me.Notification}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"En attente"}),d.jsx("p",{className:"text-4xl font-black text-gray-900",children:t.pending}),d.jsx("p",{className:"text-sm font-bold text-amber-500",children:"Action requise"})]})]}),d.jsx("div",{className:"w-16 h-1 bg-amber-100 rounded-full"})]}),d.jsxs("div",{onClick:()=>e("my-clients"),className:"bg-white rounded-[3rem] p-8 border-0 shadow-xl hover:shadow-2xl transition-all cursor-pointer group",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("div",{className:"w-16 h-16 bg-emerald-600 text-white rounded-2xl flex items-center justify-center text-2xl font-black shadow-lg group-hover:scale-110 transition-transform",children:me.Client}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Prospects Confirms"}),d.jsx("p",{className:"text-4xl font-black text-gray-900",children:t.clients}),d.jsx("p",{className:"text-sm font-bold text-emerald-600",children:"Portefeuille client"})]})]}),d.jsx("div",{className:"w-16 h-1 bg-emerald-100 rounded-full"})]}),d.jsxs("div",{onClick:()=>e("my-commissions"),className:"bg-white rounded-[3rem] p-8 border-0 shadow-xl hover:shadow-2xl transition-all cursor-pointer group",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("div",{className:"w-16 h-16 bg-sky-600 text-white rounded-2xl flex items-center justify-center text-2xl font-black shadow-lg group-hover:scale-110 transition-transform",children:me.Commission}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Ma Commission"}),d.jsxs("p",{className:"text-4xl font-black text-gray-900",children:[Math.round(b).toLocaleString()," ",u.currency]}),d.jsxs("p",{className:"text-sm font-bold text-sky-600",children:[Math.round(E).toLocaleString()," ",u.currency," en attente"]})]})]}),d.jsx("div",{className:"w-16 h-1 bg-sky-100 rounded-full"})]})]}),a.length>0&&d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("h3",{className:"font-black text-lg text-gray-900 flex items-center",children:[d.jsx("span",{className:"mr-2 text-rose-500",children:me.Notification}),"Alertes rcentes"]}),d.jsx("button",{onClick:()=>e("notifications"),className:"text-xs font-black text-indigo-600 uppercase tracking-widest hover:underline",children:"Voir tout"})]}),d.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.filter(L=>!L.read).slice(0,3).map(L=>d.jsxs("div",{className:"bg-white border-2 border-rose-100 p-6 rounded-3xl shadow-sm animate-in slide-in-from-left-4",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsx("h4",{className:"font-black text-rose-600 uppercase text-xs tracking-widest",children:L.title}),d.jsx("span",{className:"text-[10px] font-medium text-gray-400",children:new Date(L.createdAt).toLocaleDateString()})]}),d.jsx("p",{className:"mt-2 text-sm text-gray-700 font-medium",children:L.message})]},L.id))})]}),d.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-800 rounded-[3rem] p-10 text-white relative overflow-hidden shadow-2xl shadow-indigo-100",children:[d.jsxs("div",{className:"relative z-10",children:[d.jsx("h3",{className:"text-2xl font-black mb-3 tracking-tight",children:"Formulaire de Capture Actif"}),d.jsx("p",{className:"text-indigo-100 max-w-md mb-8 font-medium",children:"Partagez votre lien unique pour capturer des leads automatiquement dans votre dashboard CRM."}),d.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[d.jsxs("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 px-6 py-4 rounded-2xl flex-1 font-mono text-sm overflow-hidden truncate",children:[window.location.origin,"/form/",i.agentCode||i.id]}),d.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/form/${i.agentCode||i.id}`),alert("Lien copi !")},className:"bg-white text-indigo-700 px-10 py-4 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-gray-100 transition-all flex items-center justify-center shrink-0 shadow-xl",children:[d.jsx("span",{className:"mr-2",children:me.Copy})," Copier"]})]})]}),d.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-white/10 rounded-full -mr-20 -mt-20 blur-3xl"}),d.jsx("div",{className:"absolute bottom-0 left-1/2 w-64 h-64 bg-sky-400/20 rounded-full blur-3xl"})]})]})},Lj=({user:i})=>{const[e,t]=ee.useState([]);ee.useEffect(()=>{(async()=>t(await ue.getNotifications(i.id)))()},[i.id]);const r=async()=>{await ue.markAllNotificationsAsRead(i.id),t(await ue.getNotifications(i.id))},a=u=>{switch(u){case"cash":return d.jsx("span",{className:"text-emerald-500",children:""});case"alert":return d.jsx("span",{className:"text-rose-500",children:""});case"lead":return d.jsx("span",{className:"text-indigo-500",children:""});case"sys":return d.jsx("span",{className:"text-slate-500",children:""});default:return d.jsx("span",{className:"text-blue-500",children:""})}},l=u=>{if(!u.read)switch(u.type){case"cash":return"border-emerald-100 bg-emerald-50/30";case"alert":return"border-rose-100 bg-rose-50/30";default:return"border-indigo-100 bg-indigo-50/30"}return"border-gray-50 bg-white grayscale-[0.5] opacity-80"};return d.jsxs("div",{className:"max-w-4xl mx-auto space-y-10 animate-in fade-in duration-500 pb-20",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-black text-gray-900 tracking-tight",children:"Notifications"}),d.jsx("p",{className:"text-gray-500 font-medium text-lg",children:"Historique complet des actions effectues par l'administration."})]}),d.jsx("button",{onClick:r,className:"bg-white border-2 border-indigo-100 text-indigo-600 px-8 py-4 rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-indigo-50 transition-all shadow-sm",children:"Tout marquer comme lu"})]}),d.jsx("div",{className:"space-y-6",children:e.length>0?e.map((u,m)=>d.jsxs("div",{className:`
                group p-8 rounded-[2.5rem] border-2 transition-all duration-500 
                animate-in slide-in-from-bottom-8 relative overflow-hidden
                ${l(u)}
              `,style:{animationDelay:`${m*50}ms`},children:[!u.read&&d.jsx("div",{className:"absolute top-0 right-10 w-20 h-1 rounded-full bg-indigo-500/20"}),d.jsxs("div",{className:"flex items-start gap-6",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white shadow-sm flex items-center justify-center text-2xl border border-gray-100 transition-transform group-hover:scale-110",children:a(u.type)}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex justify-between items-center mb-1",children:[d.jsx("h4",{className:`text-lg font-black tracking-tight ${u.read?"text-gray-600":"text-gray-900"}`,children:u.title}),d.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:new Date(u.createdAt).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",hour:"2-digit",minute:"2-digit"})})]}),d.jsx("p",{className:`font-medium ${u.read?"text-gray-400":"text-gray-600"}`,children:u.message}),!u.read&&d.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-pulse"}),d.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-indigo-400",children:"Nouveau message"})]})]})]})]},u.id)):d.jsxs("div",{className:"py-40 text-center bg-gray-50/50 rounded-[5rem] border-4 border-dashed border-gray-100",children:[d.jsx("div",{className:"w-24 h-24 bg-white rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 shadow-sm text-gray-200 text-4xl",children:""}),d.jsx("p",{className:"text-gray-300 font-black uppercase text-xl tracking-[0.2em] italic",children:"Aucune notification pour le moment"})]})})]})},Uj=({user:i})=>{const[e,t]=ee.useState([]),[r,a]=ee.useState(!1),[l,u]=ee.useState(!1),[m,p]=ee.useState(null),[y,b]=ee.useState(null),[w,E]=ee.useState("Cte d'Ivoire"),[j,L]=ee.useState(""),[F,Q]=ee.useState("ALL");ee.useEffect(()=>{ie()},[i.id]);const ie=async()=>{t(await ue.getProspectsByAgent(i.id))},ne=R=>{E(Rw[R.target.value]||"Autre")},re=async R=>{R.preventDefault();const A=new FormData(R.currentTarget),V={agentId:i.id,fullName:A.get("fullName"),company:A.get("company"),email:A.get("email"),phone:A.get("phone"),countryCode:A.get("countryCode"),country:w,city:A.get("city"),source:l&&(m==null?void 0:m.source)||"Direct Agent",productOfInterest:A.get("product"),details:A.get("details")};l&&m?(await ue.updateProspect(m.id,V),alert("Prospect mis  jour avec succs !")):(await ue.addProspect(V),alert("Prospect ajout avec succs !")),a(!1),u(!1),p(null),await ie()},xe=async R=>{await ue.convertToClient(R),b(null),await ie(),alert("Prospect confirm et converti en client avec succs !")},be=async R=>{window.confirm("tes-vous sr de vouloir supprimer dfinitivement ce prospect ? Cette action est irrversible.")&&(await ue.deleteProspect(R),await ie(),alert("Prospect supprim."))},ye=R=>{p(R),E(R.country),u(!0),a(!0)},k=e.filter(R=>{var C;const A=R.fullName.toLowerCase().includes(j.toLowerCase())||R.city.toLowerCase().includes(j.toLowerCase())||((C=R.company)==null?void 0:C.toLowerCase().includes(j.toLowerCase())),V=F==="ALL"||R.status===F;return A&&V}),N=R=>{switch(R){case $t.CONVERTED:return"border-emerald-500 bg-emerald-50/30 text-emerald-700 shadow-emerald-100/50";case $t.PENDING:return"border-indigo-500 bg-indigo-50/30 text-indigo-700 shadow-indigo-100/50";default:return"border-gray-200 bg-gray-50/30 text-gray-600 shadow-gray-100/50"}},I=R=>R===$t.PENDING?"En attente":"Converti";return d.jsxs("div",{className:"space-y-10 animate-in fade-in duration-500 pb-20",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-black text-gray-900 tracking-tight",children:"Gestion Prospection"}),d.jsx("p",{className:"text-gray-500 font-medium text-lg",children:"Centralisez vos opportunits (En attente / Confirmes)."})]}),d.jsxs("button",{onClick:()=>{u(!1),p(null),a(!0)},className:"bg-indigo-600 text-white px-10 py-5 rounded-[2rem] flex items-center justify-center font-black uppercase text-xs tracking-widest hover:bg-indigo-700 transition-all shadow-2xl shadow-indigo-200 hover:scale-105 pt-6",children:[d.jsx("span",{className:"mr-3",children:me.Plus}),"Nouveau Prospect"]})]}),d.jsxs("div",{className:"bg-white p-8 rounded-[3rem] border border-gray-100 shadow-xl flex flex-col md:flex-row gap-6 items-center transition-all focus-within:ring-4 focus-within:ring-indigo-50",children:[d.jsxs("div",{className:"flex-1 relative w-full",children:[d.jsx("div",{className:"absolute inset-y-0 left-6 flex items-center pointer-events-none text-indigo-400",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"11",cy:"11",r:"8"}),d.jsx("path",{d:"m21 21-4.3-4.3"})]})}),d.jsx("input",{type:"text",placeholder:"Filtrer vos prospects par identit, ville ou entreprise...",value:j,onChange:R=>L(R.target.value),className:"w-full pl-16 pr-8 py-5 bg-gray-50 border-none rounded-[1.75rem] outline-none font-bold text-lg text-gray-800 placeholder:text-gray-300 transition-all shadow-inner"})]}),d.jsx("div",{className:"w-full md:w-80",children:d.jsxs("select",{value:F,onChange:R=>Q(R.target.value),className:"w-full px-8 py-5 bg-gray-50 border-none rounded-[1.75rem] outline-none font-black text-[10px] uppercase tracking-widest cursor-pointer shadow-inner text-gray-600",children:[d.jsx("option",{value:"ALL",children:"Tous les statuts"}),d.jsx("option",{value:$t.PENDING,children:" En attente"}),d.jsx("option",{value:$t.CONVERTED,children:" Confirms"})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10",children:[k.map((R,A)=>{const V=N(R.status);return d.jsxs("div",{className:`
                group bg-white rounded-[4rem] p-10 border-2 transition-all duration-500 
                animate-in slide-in-from-bottom-12 hover:-translate-y-4 hover:shadow-2xl flex flex-col relative
                ${V}
              `,style:{animationDelay:`${A*50}ms`},children:[d.jsxs("div",{className:"flex items-start justify-between mb-8",children:[d.jsx("div",{className:`w-20 h-20 rounded-[2.25rem] flex items-center justify-center text-3xl font-black shadow-lg transition-transform duration-500 group-hover:rotate-6 group-hover:scale-110 
                  ${R.status===$t.CONVERTED?"bg-emerald-600 text-white":"bg-indigo-600 text-white"}`,children:R.fullName[0]}),d.jsxs("div",{className:"flex flex-col items-end gap-2",children:[d.jsx("span",{className:`px-4 py-2 rounded-2xl text-[9px] font-black uppercase tracking-[0.2em] border shadow-sm ${R.status===$t.CONVERTED?"bg-emerald-600 text-white border-emerald-700":"bg-white border-gray-100 group-hover:border-indigo-200 transition-colors"}`,children:I(R.status)}),R.status===$t.PENDING&&d.jsx("button",{onClick:()=>be(R.id),className:"p-2 bg-rose-50 text-rose-500 rounded-xl hover:bg-rose-100 transition-colors border border-rose-100/50",title:"Supprimer ce prospect",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M3 6h18"}),d.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),d.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),d.jsx("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),d.jsx("line",{x1:"14",x2:"14",y1:"11",y2:"17"})]})})]})]}),d.jsxs("div",{className:"mb-6 flex-1",children:[d.jsx("h4",{className:"text-2xl font-black text-gray-900 group-hover:text-indigo-600 transition-colors tracking-tight leading-none mb-3",children:R.fullName}),d.jsxs("div",{className:"flex items-center text-gray-400 text-[10px] font-black uppercase tracking-widest",children:[d.jsx("span",{className:"w-2 h-2 rounded-full bg-gray-200 mr-2 group-hover:bg-indigo-400 transition-colors"}),R.company||"Compte Particulier"]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-6 py-8 border-y border-gray-100 mb-8 group-hover:border-indigo-50 transition-colors",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Localisation"}),d.jsxs("p",{className:"font-bold text-gray-700 text-xs truncate",children:[R.city,", ",R.country]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Source"}),d.jsx("p",{className:"font-bold text-indigo-600 text-xs truncate",children:R.source})]})]}),d.jsxs("div",{className:"space-y-4",children:[R.status!==$t.CONVERTED&&d.jsx("button",{onClick:()=>b(R.id),className:"w-full py-5 bg-emerald-600 text-white rounded-[1.75rem] font-black uppercase text-[10px] tracking-[0.2em] hover:bg-emerald-700 shadow-xl shadow-emerald-100 transition-all pt-6",children:"Confirmer le prospect"}),d.jsx("button",{onClick:()=>R.status===$t.PENDING?ye(R):p(R),className:`w-full py-5 rounded-[1.75rem] font-black uppercase text-[10px] tracking-[0.2em] transition-all pt-6 border-2 
                    ${R.status===$t.CONVERTED?"bg-white border-emerald-100 text-emerald-600 hover:bg-emerald-50":"bg-white border-gray-100 text-gray-400 hover:text-indigo-600 hover:border-indigo-100 hover:bg-indigo-50/50"}`,children:R.status===$t.PENDING?"Modifier / Corriger":"Inspecter Dossier"})]})]},R.id)}),k.length===0&&d.jsxs("div",{className:"col-span-full py-40 text-center bg-gray-50/50 rounded-[5rem] border-4 border-dashed border-gray-100",children:[d.jsx("div",{className:"w-24 h-24 bg-white rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 shadow-sm text-gray-200",children:me.Prospect}),d.jsx("p",{className:"text-gray-300 font-black uppercase text-xl tracking-[0.2em] italic",children:"Aucun dossier prospect trouv"})]})]}),y&&d.jsxs("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 animate-in fade-in duration-200",children:[d.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md",onClick:()=>b(null)}),d.jsxs("div",{className:"bg-white rounded-[3rem] p-10 max-w-sm w-full relative shadow-2xl text-center space-y-6 animate-in zoom-in-95",children:[d.jsx("div",{className:"w-24 h-24 bg-emerald-100 text-emerald-600 rounded-[2rem] flex items-center justify-center mx-auto text-5xl shadow-lg shadow-emerald-100",children:""}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-2xl font-black text-gray-900 tracking-tight",children:"Confirmer ce prospect ?"}),d.jsx("p",{className:"text-gray-500 mt-2 text-sm font-medium",children:"Le prospect sera converti en client et ajout  votre portefeuille. L'administration recevra une notification automatique pour traitement."})]}),d.jsxs("div",{className:"flex flex-col space-y-3 pt-4",children:[d.jsx("button",{onClick:()=>xe(y),className:"w-full py-5 bg-emerald-600 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl shadow-emerald-100 hover:bg-emerald-700 transition-all",children:"CONFIRMER LE PROSPECT"}),d.jsx("button",{onClick:()=>b(null),className:"w-full py-5 bg-gray-50 text-gray-400 rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-gray-100 transition-all",children:"Annuler"})]})]})]}),r&&d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md",onClick:()=>{a(!1),u(!1),p(null)}}),d.jsxs("div",{className:"bg-white rounded-[3rem] w-full max-w-2xl overflow-hidden relative shadow-2xl animate-in zoom-in-95 duration-300",children:[d.jsxs("div",{className:"p-8 border-b-2 border-gray-100 flex items-center justify-between bg-gray-50/50",children:[d.jsx("h3",{className:"text-2xl font-black text-gray-900 tracking-tight",children:l?"Modifier Prospect":"Nouveau Prospect"}),d.jsx("button",{onClick:()=>{a(!1),u(!1),p(null)},className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-all",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M18 6 6 18"}),d.jsx("path",{d:"m6 6 12 12"})]})})]}),d.jsxs("form",{onSubmit:re,className:"p-10 space-y-6 overflow-y-auto max-h-[75vh]",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Identit ou Raison Sociale"}),d.jsx("input",{name:"fullName",defaultValue:(m==null?void 0:m.fullName)||"",required:!0,className:"w-full px-6 py-4 bg-gray-50 border-2 border-gray-100 rounded-2xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all font-bold",placeholder:"Ex: Paul Durand ou SARL Tech"})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Indicatif Pays"}),d.jsx("select",{name:"countryCode",defaultValue:(m==null?void 0:m.countryCode)||"+225",onChange:ne,className:"w-full px-6 py-4 bg-gray-50 border-2 border-gray-100 rounded-2xl focus:ring-2 focus:ring-indigo-500 outline-none font-bold",children:Object.entries(Rw).map(([R,A])=>d.jsxs("option",{value:R,children:[R," - ",A]},R))})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Numro Mobile"}),d.jsx("input",{name:"phone",type:"tel",defaultValue:(m==null?void 0:m.phone)||"",required:!0,className:"w-full px-6 py-4 bg-gray-50 border-2 border-gray-100 rounded-2xl focus:ring-2 focus:ring-indigo-500 outline-none font-bold",placeholder:"0102030405"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Pays"}),d.jsx("input",{value:w,readOnly:!0,className:"w-full px-6 py-4 bg-indigo-50 border-2 border-indigo-100 rounded-2xl text-indigo-700 font-black outline-none cursor-not-allowed"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Ville"}),d.jsx("input",{name:"city",defaultValue:(m==null?void 0:m.city)||"",required:!0,className:"w-full px-6 py-4 bg-gray-50 border-2 border-gray-100 rounded-2xl focus:ring-2 focus:ring-indigo-500 outline-none font-bold",placeholder:"Dakar, Abidjan..."})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Email Professionnel"}),d.jsx("input",{name:"email",type:"email",defaultValue:(m==null?void 0:m.email)||"",required:!0,className:"w-full px-6 py-4 bg-gray-50 border-2 border-gray-100 rounded-2xl focus:ring-2 focus:ring-indigo-500 outline-none font-bold",placeholder:"contact@prospect.com"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Offre d'intrt"}),d.jsx("input",{name:"product",defaultValue:(m==null?void 0:m.productOfInterest)||"",required:!0,className:"w-full px-6 py-4 bg-gray-50 border-2 border-gray-100 rounded-2xl focus:ring-2 focus:ring-indigo-500 outline-none font-bold",placeholder:"Saisir le pack ou service..."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Dtails & Commentaires"}),d.jsx("textarea",{name:"details",defaultValue:(m==null?void 0:m.details)||"",rows:3,className:"w-full px-6 py-4 bg-gray-50 border-2 border-gray-100 rounded-2xl focus:ring-2 focus:ring-indigo-500 outline-none font-bold resize-none",placeholder:"Notes importantes sur le prospect..."})]}),d.jsx("button",{type:"submit",className:"w-full py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all pt-4",children:l?"Mettre  jour":"Enregistrer dans la base"})]})]})]}),m&&!l&&d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:()=>p(null)}),d.jsxs("div",{className:"bg-white rounded-[3rem] w-full max-w-xl overflow-hidden relative shadow-2xl animate-in slide-in-from-bottom-8 duration-300",children:[d.jsxs("div",{className:"h-32 bg-indigo-600 p-8 flex items-start justify-between",children:[d.jsxs("div",{className:"text-white",children:[d.jsx("h4",{className:"text-2xl font-black tracking-tight",children:m.fullName}),d.jsxs("p",{className:"text-indigo-100 text-[10px] font-black uppercase tracking-widest mt-1 opacity-80",children:[m.city,", ",m.country]})]}),d.jsx("button",{onClick:()=>p(null),className:"p-2 text-white/50 hover:text-white transition-colors",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M18 6 6 18"}),d.jsx("path",{d:"m6 6 12 12"})]})})]}),d.jsxs("div",{className:"p-10 space-y-8",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Mobile"}),d.jsxs("p",{className:"font-black text-gray-900 text-lg",children:[m.countryCode," ",m.phone]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Email"}),d.jsx("p",{className:"font-bold text-indigo-600 truncate",children:m.email})]})]}),d.jsxs("div",{className:"p-6 bg-indigo-50 rounded-[1.5rem] border-2 border-indigo-100",children:[d.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:"Produit sollicit"}),d.jsx("p",{className:"font-black text-indigo-900 text-lg",children:m.productOfInterest})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Commentaires / Dtails"}),d.jsx("p",{className:"text-gray-700 font-medium bg-gray-50 p-4 rounded-2xl border-2 border-gray-100 italic",children:m.details||"Aucun commentaire additionnel n'a t saisi pour ce prospect."})]}),d.jsx("div",{className:"flex space-x-4 pt-4",children:d.jsx("button",{onClick:()=>p(null),className:"flex-1 py-5 bg-gray-100 text-gray-400 rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-gray-100 transition-all pt-4",children:"Fermer"})})]})]})]})]})},zj=({user:i})=>{const[e,t]=ee.useState([]),[r,a]=ee.useState(""),[l,u]=ee.useState("ALL");ee.useEffect(()=>{(async()=>{const w=await ue.getClientsByAgent(i.id);t(w.filter(E=>E.status!=="CANCELLED"))})()},[i.id]);const m=e.filter(b=>{const w=b.fullName.toLowerCase().includes(r.toLowerCase())||b.product.toLowerCase().includes(r.toLowerCase())||b.company&&b.company.toLowerCase().includes(r.toLowerCase()),E=l==="ALL"||b.status===l;return w&&E}),p=b=>{switch(b){case"SALE_CONCLUDED":return{label:"Vente conclue",style:"bg-emerald-600 text-white border-emerald-700 shadow-lg shadow-emerald-100",icon:""};case"PENDING":default:return{label:"En attente",style:"bg-indigo-50 text-indigo-600 border-indigo-100",icon:""}}},y=[{border:"border-indigo-200",hoverBorder:"border-indigo-500",bg:"bg-indigo-50/50",icon:"text-indigo-500",shadow:"hover:shadow-indigo-100",avatar:"bg-indigo-100 text-indigo-700"},{border:"border-sky-200",hoverBorder:"border-sky-500",bg:"bg-sky-50/50",icon:"text-sky-500",shadow:"hover:shadow-sky-100",avatar:"bg-sky-100 text-sky-700"},{border:"border-emerald-200",hoverBorder:"border-emerald-500",bg:"bg-emerald-50/50",icon:"text-emerald-500",shadow:"hover:shadow-emerald-100",avatar:"bg-emerald-100 text-emerald-700"},{border:"border-amber-200",hoverBorder:"border-amber-500",bg:"bg-amber-50/50",icon:"text-amber-500",shadow:"hover:shadow-amber-100",avatar:"bg-amber-100 text-amber-700"},{border:"border-rose-200",hoverBorder:"border-rose-500",bg:"bg-rose-50/50",icon:"text-rose-500",shadow:"hover:shadow-rose-100",avatar:"bg-rose-100 text-rose-700"},{border:"border-violet-200",hoverBorder:"border-violet-500",bg:"bg-violet-50/50",icon:"text-violet-500",shadow:"hover:shadow-violet-100",avatar:"bg-violet-100 text-violet-700"}];return d.jsxs("div",{className:"space-y-10 animate-in fade-in duration-500 pb-20",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-black text-gray-900 tracking-tight",children:"Portefeuille Clients"}),d.jsx("p",{className:"text-gray-500 font-medium text-lg",children:"Suivi en temps rel de vos contrats valids par l'administration."})]}),d.jsxs("div",{className:"bg-white px-8 py-4 rounded-[2rem] border border-gray-100 shadow-sm flex items-center space-x-3",children:[d.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500 animate-pulse"}),d.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400",children:[m.length," Dossiers Actifs"]})]})]}),d.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] border border-gray-100 shadow-xl flex flex-col md:flex-row gap-4 focus-within:ring-4 focus-within:ring-indigo-50 transition-all",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-6 flex items-center pointer-events-none text-gray-400",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}),d.jsx("path",{d:"M2 12h20"})]})}),d.jsx("input",{type:"text",placeholder:"Filtrer votre portefeuille (Nom, Entreprise, Produit...)",value:r,onChange:b=>a(b.target.value),className:"w-full pl-16 pr-8 py-5 bg-gray-50 border-none rounded-[1.75rem] outline-none font-bold text-lg text-gray-800 placeholder:text-gray-300 shadow-inner"})]}),d.jsx("div",{className:"w-full md:w-80",children:d.jsxs("select",{value:l,onChange:b=>u(b.target.value),className:"w-full px-8 py-5 bg-gray-50 border-none rounded-[1.75rem] outline-none font-black text-[10px] uppercase tracking-widest cursor-pointer shadow-inner text-gray-600",children:[d.jsx("option",{value:"ALL",children:"Tous les tats"}),d.jsx("option",{value:"PENDING",children:" En attente"}),d.jsx("option",{value:"SALE_CONCLUDED",children:" Vente conclue"})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[m.map((b,w)=>{const E=p(b.status),j=y[w%y.length];return d.jsxs("div",{className:`
                  bg-white rounded-[3rem] p-6 border-2 transition-all duration-700 
                  group relative animate-in slide-in-from-bottom-12 flex flex-col
                  ${j.border} ${j.shadow} ${j.hoverBorder}
                  hover:-translate-y-2 hover:shadow-2xl shadow-xl
                `,style:{animationDelay:`${w*50}ms`},children:[d.jsxs("div",{className:"flex justify-between items-start mb-6",children:[d.jsx("div",{className:`w-16 h-16 rounded-[1.75rem] flex items-center justify-center text-2xl font-black shadow-lg transition-transform duration-500 group-hover:scale-110 group-hover:rotate-6 
                    ${j.avatar}`,children:b.fullName[0]}),d.jsxs("div",{className:`px-4 py-2 rounded-xl text-[8px] font-black uppercase tracking-[0.15em] border flex items-center shadow-sm ${E.style}`,children:[d.jsx("span",{className:"mr-2",children:E.icon}),E.label]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h4",{className:"font-black text-gray-900 text-xl tracking-tight leading-none group-hover:text-indigo-600 transition-colors",children:b.fullName}),d.jsxs("p",{className:"text-[9px] text-gray-400 font-black uppercase tracking-[0.2em] mt-2 flex items-center",children:[d.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${j.icon.replace("text-","bg-")}`}),b.company||"Compte Particulier"]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-4 border-t border-gray-50 mb-4 group-hover:border-indigo-50 transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:`w-8 h-8 bg-gray-50 rounded-lg flex items-center justify-center ${j.icon}`,children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}),d.jsx("path",{d:"M2 12h20"})]})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest",children:"Pays"}),d.jsx("p",{className:"font-black text-gray-800 text-xs",children:b.country})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:`w-8 h-8 bg-gray-50 rounded-lg flex items-center justify-center ${j.icon}`,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest",children:"Tel"}),d.jsx("p",{className:"font-black text-gray-800 text-xs",children:b.phone})]})]}),d.jsxs("div",{className:"flex items-center space-x-3 col-span-2",children:[d.jsx("div",{className:`w-8 h-8 bg-gray-50 rounded-lg flex items-center justify-center ${j.icon}`,children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),d.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest",children:"Email"}),d.jsx("p",{className:"font-black text-indigo-600 text-xs truncate",children:b.email})]})]}),d.jsxs("div",{className:`col-span-2 p-4 rounded-xl border transition-colors ${j.bg} ${j.border}`,children:[d.jsx("p",{className:`text-[8px] font-black uppercase tracking-[0.15em] mb-1 ${j.icon}`,children:"Offre"}),d.jsx("p",{className:"font-black text-slate-800 text-xs leading-tight truncate",children:b.product})]})]}),d.jsxs("div",{className:"flex items-center justify-between pt-3",children:[d.jsx("div",{className:"text-[8px] font-black text-gray-300 uppercase tracking-[0.15em]",children:new Date(b.createdAt).toLocaleDateString("fr-FR")}),d.jsxs("div",{className:`text-[8px] font-black uppercase tracking-[0.15em] opacity-40 ${j.icon}`,children:["#",b.id.slice(0,5)]})]})]},b.id)}),m.length===0&&d.jsxs("div",{className:"col-span-full py-40 text-center bg-gray-50/50 rounded-[5rem] border-4 border-dashed border-gray-100",children:[d.jsx("div",{className:"w-24 h-24 bg-white rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 shadow-sm text-gray-200",children:me.Client}),d.jsx("p",{className:"text-gray-300 font-black uppercase text-xl tracking-[0.2em] italic",children:"Aucun client correspondant  vos filtres"})]})]})]})},Bj=({user:i})=>{const[e,t]=ee.useState([]),[r,a]=ee.useState(""),[l,u]=ee.useState("ALL"),[m,p]=ee.useState({name:"AFTRAS CRM",currency:"FCFA"});ee.useEffect(()=>{(async()=>{t(await ue.getSalesByAgent(i.id)),p(await ue.getAppSettings())})();const j=async()=>p(await ue.getAppSettings());return window.addEventListener("app-settings-changed",j),()=>window.removeEventListener("app-settings-changed",j)},[i.id]);const y=e.filter(E=>{const j=E.clientName.toLowerCase().includes(r.toLowerCase()),L=l==="ALL"||E.status===l;return j&&L}),b={total:e.reduce((E,j)=>E+j.commission,0),pending:e.filter(E=>E.status==="PENDING").reduce((E,j)=>E+j.commission,0),paid:e.filter(E=>E.status==="PAID").reduce((E,j)=>E+j.commission,0)},w=[{border:"border-indigo-100",accent:"bg-indigo-600",text:"text-indigo-600",shadow:"shadow-indigo-100/40",gradient:"from-indigo-50"},{border:"border-sky-100",accent:"bg-sky-600",text:"text-sky-600",shadow:"shadow-sky-100/40",gradient:"from-sky-50"},{border:"border-emerald-100",accent:"bg-emerald-600",text:"text-emerald-600",shadow:"shadow-emerald-100/40",gradient:"from-emerald-50"},{border:"border-amber-100",accent:"bg-amber-600",text:"text-amber-600",shadow:"shadow-amber-100/40",gradient:"from-amber-50"},{border:"border-violet-100",accent:"bg-violet-600",text:"text-violet-600",shadow:"shadow-violet-100/40",gradient:"from-violet-50"},{border:"border-rose-100",accent:"bg-rose-600",text:"text-rose-600",shadow:"shadow-rose-100/40",gradient:"from-rose-50"}];return d.jsxs("div",{className:"space-y-10 animate-in fade-in duration-500 pb-20",children:[d.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-black text-gray-900 tracking-tight",children:"Revenus & Commissions"}),d.jsx("p",{className:"text-gray-500 font-medium text-lg",children:"Historique de vos reversements par vente valide."})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"bg-white p-10 rounded-[3.5rem] border-2 border-gray-50 shadow-xl shadow-gray-100/50 relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-50 rounded-full -mr-16 -mt-16 transition-transform group-hover:scale-110"}),d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 relative z-10",children:"Total Gnr"}),d.jsxs("p",{className:"text-4xl font-black text-indigo-600 relative z-10",children:[Math.round(b.total).toLocaleString()," ",d.jsx("span",{className:"text-xs",children:m.currency})]}),d.jsx("div",{className:"mt-4 w-12 h-1 bg-indigo-100 rounded-full relative z-10"})]}),d.jsxs("div",{className:"bg-white p-10 rounded-[3.5rem] border-2 border-gray-50 shadow-xl shadow-gray-100/50 relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-amber-50 rounded-full -mr-16 -mt-16 transition-transform group-hover:scale-110"}),d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 relative z-10",children:"En Attente"}),d.jsxs("p",{className:"text-4xl font-black text-amber-500 relative z-10",children:[Math.round(b.pending).toLocaleString()," ",d.jsx("span",{className:"text-xs",children:m.currency})]}),d.jsx("div",{className:"mt-4 w-12 h-1 bg-amber-100 rounded-full relative z-10"})]}),d.jsxs("div",{className:"bg-white p-10 rounded-[3.5rem] border-2 border-gray-50 shadow-xl shadow-gray-100/50 relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-emerald-50 rounded-full -mr-16 -mt-16 transition-transform group-hover:scale-110"}),d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 relative z-10",children:"Dj Pay"}),d.jsxs("p",{className:"text-4xl font-black text-emerald-500 relative z-10",children:[Math.round(b.paid).toLocaleString()," ",d.jsx("span",{className:"text-xs",children:m.currency})]}),d.jsx("div",{className:"mt-4 w-12 h-1 bg-emerald-100 rounded-full relative z-10"})]})]}),d.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] border border-gray-100 shadow-xl flex flex-col md:flex-row gap-4 focus-within:ring-4 focus-within:ring-indigo-50 transition-all",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-6 flex items-center pointer-events-none text-gray-400",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"11",cy:"11",r:"8"}),d.jsx("path",{d:"m21 21-4.3-4.3"})]})}),d.jsx("input",{type:"text",placeholder:"Filtrer par nom client...",value:r,onChange:E=>a(E.target.value),className:"w-full pl-16 pr-8 py-5 bg-gray-50 border-none rounded-[1.75rem] outline-none font-bold text-lg text-gray-800 placeholder:text-gray-300 shadow-inner"})]}),d.jsx("div",{className:"w-full md:w-80",children:d.jsxs("select",{value:l,onChange:E=>u(E.target.value),className:"w-full px-8 py-5 bg-gray-50 border-none rounded-[1.75rem] outline-none font-black text-[10px] uppercase tracking-widest cursor-pointer shadow-inner text-gray-600",children:[d.jsx("option",{value:"ALL",children:"Tous les paiements"}),d.jsx("option",{value:"PENDING",children:" En attente"}),d.jsx("option",{value:"PAID",children:" Valids / Pays"})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[y.map((E,j)=>{const L=w[j%w.length],F=E.status==="PAID";return d.jsxs("div",{className:`
                bg-white rounded-[3.5rem] p-10 border-2 transition-all duration-500
                group relative animate-in slide-in-from-bottom-12 flex flex-col
                ${L.border} ${L.shadow} hover:-translate-y-3 hover:shadow-2xl
              `,style:{animationDelay:`${j*50}ms`},children:[d.jsx("div",{className:`absolute top-0 left-10 w-20 h-1 rounded-full ${L.accent} opacity-50`}),d.jsxs("div",{className:"flex justify-between items-start mb-8",children:[d.jsx("div",{className:`p-4 rounded-2xl ${F?"bg-emerald-50 text-emerald-600":"bg-amber-50 text-amber-600"} shadow-sm`,children:F?d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),d.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),d.jsx("div",{className:`px-4 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest border ${F?"bg-emerald-600 text-white border-emerald-700":"bg-white text-amber-600 border-amber-100"}`,children:F?"Valid & Pay":"En attente"})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Gains Commission"}),d.jsxs("div",{className:"flex items-baseline space-x-2",children:[d.jsx("h3",{className:`text-5xl font-black tracking-tighter ${L.text} group-hover:scale-105 transition-transform duration-500`,children:Math.round(E.commission).toLocaleString()}),d.jsx("span",{className:"text-sm font-black text-gray-300 uppercase",children:m.currency})]})]}),d.jsxs("div",{className:"space-y-6 pt-8 border-t border-gray-50 mb-8 flex-1",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Source Client"}),d.jsx("p",{className:"font-black text-gray-800 text-lg tracking-tight leading-none group-hover:text-indigo-600 transition-colors",children:E.clientName})]}),d.jsxs("div",{className:"flex justify-between items-end",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Valeur Contrat"}),d.jsxs("p",{className:"font-bold text-gray-500 text-sm",children:[Math.round(E.amount).toLocaleString()," ",m.currency]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Date Vente"}),d.jsx("p",{className:"font-black text-gray-400 text-[10px] uppercase tracking-tighter",children:new Date(E.createdAt).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"})})]})]})]}),d.jsxs("div",{className:"flex items-center justify-between text-[8px] font-black text-gray-200 uppercase tracking-[0.3em]",children:[d.jsx("span",{children:"KPI CRM V6"}),d.jsxs("span",{children:["#",E.id.slice(0,6)]})]})]},E.id)}),y.length===0&&d.jsxs("div",{className:"col-span-full py-40 text-center bg-gray-50/50 rounded-[5rem] border-4 border-dashed border-gray-100",children:[d.jsx("div",{className:"w-24 h-24 bg-white rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 shadow-sm text-gray-200 text-4xl",children:""}),d.jsx("p",{className:"text-gray-300 font-black uppercase text-xl tracking-[0.2em] italic",children:"Aucune commission enregistre"})]})]})]})},qj=({user:i,onUpdate:e})=>{const[t,r]=ee.useState(!1),[a,l]=ee.useState(!1),[u,m]=ee.useState(!1),p=async b=>{b.preventDefault();const w=new FormData(b.currentTarget),E=await ue.updateUser(i.id,{firstName:w.get("firstName"),lastName:w.get("lastName"),phone:w.get("phone")});e(E),alert("Informations personnelles mises  jour !")},y=b=>{b.preventDefault();const w=new FormData(b.currentTarget),E=w.get("newPassword"),j=w.get("confirmPassword");if(E!==j){alert("Les mots de passe ne correspondent pas.");return}alert("Votre mot de passe a t rinitialis avec succs !"),b.currentTarget.reset()};return d.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 py-12 animate-in fade-in duration-700",children:[d.jsxs("div",{className:"text-center space-y-2",children:[d.jsx("h1",{className:"text-4xl font-black text-gray-900 tracking-tight",children:"Mon Profil Agent"}),d.jsx("p",{className:"text-gray-400 font-medium",children:"Grez vos informations et la scurit de votre accs CRM V6."})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[d.jsxs("div",{className:"bg-white p-10 rounded-[3.5rem] border-2 border-gray-50 shadow-xl shadow-gray-100/50 flex flex-col",children:[d.jsxs("div",{className:"flex items-center space-x-4 mb-10",children:[d.jsx("div",{className:"w-12 h-12 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center text-xl shadow-sm",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),d.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.25em] text-gray-400",children:"Informations Personnelles"})]}),d.jsxs("form",{onSubmit:p,className:"space-y-6 flex-1",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Prnom"}),d.jsx("input",{name:"firstName",defaultValue:i.firstName,required:!0,className:"w-full px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-indigo-100 rounded-2xl outline-none font-bold transition-all focus:ring-4 focus:ring-indigo-50"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Nom"}),d.jsx("input",{name:"lastName",defaultValue:i.lastName,required:!0,className:"w-full px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-indigo-100 rounded-2xl outline-none font-bold transition-all focus:ring-4 focus:ring-indigo-50"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Email (Non modifiable)"}),d.jsx("input",{value:i.email,readOnly:!0,className:"w-full px-6 py-4 bg-gray-100/50 border-2 border-gray-100 rounded-2xl font-bold cursor-not-allowed text-gray-400"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Tlphone Mobile"}),d.jsx("input",{name:"phone",defaultValue:i.phone,className:"w-full px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-indigo-100 rounded-2xl outline-none font-bold transition-all focus:ring-4 focus:ring-indigo-50",placeholder:"+225 00 00 00 00"})]}),d.jsx("button",{type:"submit",className:"w-full py-5 bg-indigo-600 text-white rounded-[1.75rem] font-black uppercase text-[10px] tracking-[0.2em] shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all pt-6 mt-4",children:"Enregistrer les infos"})]})]}),d.jsxs("div",{className:"bg-white p-10 rounded-[3.5rem] border-2 border-gray-50 shadow-xl shadow-gray-100/50 flex flex-col",children:[d.jsxs("div",{className:"flex items-center space-x-4 mb-10",children:[d.jsx("div",{className:"w-12 h-12 bg-rose-50 text-rose-600 rounded-2xl flex items-center justify-center text-xl shadow-sm",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),d.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),d.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.25em] text-gray-400",children:"Scurit du Compte"})]}),d.jsxs("form",{onSubmit:y,className:"space-y-6 flex-1",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Mot de passe actuel"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{name:"currentPassword",type:t?"text":"password",required:!0,className:"w-full px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-rose-100 rounded-2xl outline-none font-bold transition-all focus:ring-4 focus:ring-rose-50 pr-14",placeholder:""}),d.jsx("button",{type:"button",onClick:()=>r(!t),className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 text-gray-300 hover:text-gray-500 transition-colors",children:t?me.EyeOff:me.Eye})]})]}),d.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-50",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Nouveau mot de passe"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{name:"newPassword",type:a?"text":"password",required:!0,className:"w-full px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-rose-100 rounded-2xl outline-none font-bold transition-all focus:ring-4 focus:ring-rose-50 pr-14",placeholder:""}),d.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-indigo-600 transition-colors",children:a?me.EyeOff:me.Eye})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Confirmer le nouveau mot de passe"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{name:"confirmPassword",type:u?"text":"password",required:!0,className:"w-full px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-rose-100 rounded-2xl outline-none font-bold transition-all focus:ring-4 focus:ring-rose-50 pr-14",placeholder:""}),d.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-indigo-600 transition-colors",children:u?me.EyeOff:me.Eye})]})]}),d.jsx("button",{type:"submit",className:"w-full py-5 bg-gray-900 text-white rounded-[1.75rem] font-black uppercase text-[10px] tracking-[0.2em] shadow-xl shadow-gray-200 hover:bg-black transition-all pt-6 mt-4",children:"Changer le mot de passe"})]})]})]})]})},Fj=({user:i})=>{const[e,t]=ee.useState([]);`${i.agentCode||i.id}`;const r=async()=>{t(await ue.getRemoteProspectsByAgent(i.id))};ee.useEffect(()=>{r();const p=()=>r();return window.addEventListener("remote-leads-updated",p),()=>window.removeEventListener("remote-leads-updated",p)},[i.id]);const a=async p=>{await ue.confirmRemoteProspect(p),await r(),alert("Prospect valid ! Il a t inject dans votre liste principale.")},l=async p=>{window.confirm("Supprimer dfinitivement ce lead entrant ?")&&(await ue.deleteRemoteProspect(p),await r())},[u,m]=ee.useState({total:0,pending:0,convertedToday:0});return ee.useEffect(()=>{(async()=>{const y=await ue.getProspectsByAgent(i.id);m({total:e.length,pending:e.filter(b=>!b.isVerified).length,convertedToday:y.filter(b=>b.source.includes("Web Form")).length})})()},[e,i.id]),d.jsxs("div",{className:"max-w-6xl mx-auto space-y-12 py-12 animate-in fade-in duration-700 pb-32",children:[d.jsxs("div",{className:"bg-white p-12 rounded-[4rem] border border-gray-100 shadow-2xl relative overflow-hidden text-center group",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-sky-400 to-indigo-600"}),d.jsx("div",{className:"w-24 h-24 bg-sky-50 text-sky-600 rounded-[2.5rem] flex items-center justify-center mx-auto text-4xl shadow-sm mb-8 transition-transform group-hover:rotate-6 group-hover:scale-110",children:me.Globe}),d.jsx("h2",{className:"text-3xl font-black text-gray-900 tracking-tight",children:"Capture de Leads Distants"}),d.jsx("p",{className:"text-gray-500 font-medium mt-4 max-w-2xl mx-auto",children:"Chaque soumission sur ce lien cre un lead temporaire ci-dessous et vous envoie une notification immdiate pour traitement."}),d.jsxs("div",{className:"mt-12 flex flex-col sm:flex-row gap-4 items-center justify-center",children:[d.jsxs("div",{className:"bg-gray-50 px-8 py-5 rounded-[2rem] border-2 border-dashed border-gray-200 font-mono text-sm break-all text-indigo-600 font-bold select-all flex-1 text-center shadow-inner",children:[window.location.origin,"/form/",i.agentCode||i.id]}),d.jsx("div",{className:"flex gap-2",children:d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/form/${i.agentCode||i.id}`),alert("Lien copi avec succs !")},className:"px-10 py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase text-[10px] tracking-[0.2em] shadow-xl hover:bg-indigo-700 transition-all pt-6 shrink-0",children:"Copier le lien"})})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[d.jsx(ep,{label:"Total Leads Entrants",value:u.total,subValue:"Historique captures",icon:me.Globe,color:"indigo"}),d.jsx(ep,{label:" Vrifier",value:u.pending,subValue:"Ncessite action",icon:me.Lock,color:"amber"}),d.jsx(ep,{label:"Convertis CRM",value:u.convertedToday,subValue:"Dossiers officiels",icon:me.Client,color:"emerald"})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between px-6",children:[d.jsx("h3",{className:"text-xl font-black text-gray-900 tracking-tight",children:"Flux des nouveaux leads"}),d.jsx("button",{onClick:r,className:"p-3 text-gray-400 hover:text-indigo-600 transition-colors",children:me.Refresh})]}),d.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.length>0?e.map((p,y)=>d.jsxs("div",{className:"bg-white rounded-[3rem] p-8 border-2 border-dashed border-amber-200 bg-amber-50/5 flex flex-col md:flex-row items-center gap-8 animate-in slide-in-from-bottom-8 hover:border-indigo-300 hover:bg-indigo-50/5 transition-all duration-500 group shadow-sm hover:shadow-xl",style:{animationDelay:`${y*50}ms`},children:[d.jsxs("div",{className:"flex items-center gap-6 flex-1 min-w-0",children:[d.jsx("div",{className:"w-16 h-16 rounded-[1.75rem] bg-amber-500 text-white flex items-center justify-center text-2xl font-black shadow-lg shadow-amber-200 group-hover:rotate-6 transition-transform",children:p.fullName[0]}),d.jsxs("div",{className:"truncate",children:[d.jsx("h4",{className:"font-black text-gray-900 text-xl tracking-tight leading-none mb-2",children:p.fullName}),d.jsxs("div",{className:"flex items-center text-[10px] font-bold text-gray-400 uppercase tracking-widest gap-3",children:[d.jsxs("span",{className:"flex items-center gap-1.5",children:[" ",p.city,", ",p.country]}),d.jsx("span",{className:"w-1 h-1 rounded-full bg-gray-200"}),d.jsxs("span",{className:"flex items-center gap-1.5 text-indigo-600 font-black",children:[" ",p.source]})]})]})]}),d.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl px-6 py-4 min-w-[200px] text-center shadow-sm",children:[d.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Offre d'intrt"}),d.jsx("p",{className:"font-black text-gray-800 text-xs truncate",children:p.productOfInterest})]}),d.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[d.jsx("button",{onClick:()=>a(p.id),className:"px-10 py-5 bg-emerald-600 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl shadow-emerald-100 hover:bg-emerald-700 transition-all pt-6",children:"Vrifier & Valider"}),d.jsx("button",{onClick:()=>l(p.id),className:"p-5 bg-rose-50 text-rose-500 rounded-2xl hover:bg-rose-100 transition-colors border border-rose-100",title:"Rejeter ce lead",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M18 6 6 18"}),d.jsx("path",{d:"m6 6 12 12"})]})})]})]},p.id)):d.jsxs("div",{className:"py-24 text-center bg-gray-50/50 rounded-[5rem] border-4 border-dashed border-gray-100",children:[d.jsx("div",{className:"w-24 h-24 bg-white rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 shadow-sm text-gray-200 text-4xl",children:""}),d.jsx("p",{className:"text-gray-300 font-black uppercase text-xl tracking-[0.2em] italic",children:"Aucun nouveau lead distant dtect"}),d.jsx("p",{className:"text-gray-400 mt-4 font-medium max-w-sm mx-auto",children:'Partagez votre lien public ou utilisez le bouton "Simuler" pour tester le workflow.'})]})})]})]})},jw={"+225":"Cte d'Ivoire","+221":"Sngal","+237":"Cameroun","+212":"Maroc","+213":"Algrie","+216":"Tunisie","+223":"Mali","+226":"Burkina Faso","+227":"Niger","+228":"Togo","+229":"Bnin","+241":"Gabon","+242":"Congo-Brazzaville","+243":"RD Congo","+261":"Madagascar","+234":"Nigria","+254":"Kenya","+27":"Afrique du Sud"},Gj=({agentId:i})=>{const[e,t]=ee.useState({fullName:"",company:"",email:"",phone:"",countryCode:"+225",country:"Cte d'Ivoire",city:"",product:"",details:""}),[r,a]=ee.useState(!1),[l,u]=ee.useState("idle"),[m,p]=ee.useState(""),y=L=>{const F=L.target.value;t(Q=>({...Q,countryCode:F,country:jw[F]||"Autre"}))},b=L=>{const{name:F,value:Q}=L.target;t(ie=>({...ie,[F]:Q}))},w=()=>e.fullName.trim()?e.email.trim()?/\S+@\S+\.\S+/.test(e.email)?e.phone.trim()?e.city.trim()?e.product.trim()?null:"Veuillez indiquer le produit ou service qui vous intresse":"Veuillez saisir votre ville":"Veuillez saisir votre numro de tlphone":"Veuillez saisir un email valide":"Veuillez saisir votre email":"Veuillez saisir votre nom complet",E=L=>{setTimeout(()=>{const Q=L.target.getBoundingClientRect(),ie=window.pageYOffset||document.documentElement.scrollTop,ne=Q.top+ie;Q.top<150&&window.scrollTo({top:ne-100,behavior:"smooth"})},100)},j=async L=>{L.preventDefault();const F=w();if(F){p(F),u("error");return}a(!0),u("idle"),p("");try{await ue.addRemoteLead({agentId:i,fullName:e.fullName,company:e.company||"",email:e.email,phone:e.phone,countryCode:e.countryCode,country:e.country,city:e.city,source:"Formulaire Web Public",productOfInterest:e.product,details:e.details,createdAt:new Date().toISOString()}),u("success"),t({fullName:"",company:"",email:"",phone:"",countryCode:"+225",country:"Cte d'Ivoire",city:"",product:"",details:""})}catch(Q){console.error("Erreur lors de la soumission du formulaire:",Q),p("Une erreur est survenue lors de l'envoi de votre demande. Veuillez ressayer."),u("error")}finally{a(!1)}};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-sky-50 py-8 px-4 sm:py-12 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[d.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-indigo-600 rounded-3xl flex items-center justify-center text-white text-2xl sm:text-3xl font-black mx-auto mb-4 sm:mb-6 shadow-2xl",children:me.Prospect}),d.jsx("h1",{className:"text-3xl sm:text-4xl font-black text-gray-900 tracking-tight mb-3 sm:mb-4",children:"Formulaire de Contact"}),d.jsx("p",{className:"text-base sm:text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Remplissez ce formulaire pour exprimer votre intrt et tre contact par notre quipe commerciale"})]}),l==="success"&&d.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-2xl p-6 sm:p-8 mb-8 text-center animate-in slide-in-from-top-8",children:[d.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4",children:d.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),d.jsx("h3",{className:"text-lg sm:text-xl font-black text-emerald-900 mb-2",children:"Demande envoye avec succs !"}),d.jsx("p",{className:"text-sm sm:text-base text-emerald-700 leading-relaxed",children:"Merci pour votre intrt. Notre quipe commerciale vous contactera trs prochainement."})]}),d.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-xl border border-gray-100 overflow-hidden animate-in slide-in-from-bottom-8",children:[d.jsx("div",{className:"p-6 sm:p-8",children:d.jsxs("form",{onSubmit:j,className:"space-y-6 sm:space-y-8",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-xs sm:text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Nom complet *"}),d.jsx("input",{type:"text",name:"fullName",value:e.fullName,onChange:b,onFocus:E,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 border border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all text-sm sm:text-base",placeholder:"Votre nom et prnom"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-xs sm:text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Entreprise (optionnel)"}),d.jsx("input",{type:"text",name:"company",value:e.company,onChange:b,onFocus:E,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 border border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all text-sm sm:text-base",placeholder:"Nom de votre entreprise"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-xs sm:text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Pays *"}),d.jsx("select",{name:"countryCode",value:e.countryCode,onChange:y,onFocus:E,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 border border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all text-sm sm:text-base",children:Object.entries(jw).map(([L,F])=>d.jsxs("option",{value:L,children:[L," - ",F]},L))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-xs sm:text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Ville *"}),d.jsx("input",{type:"text",name:"city",value:e.city,onChange:b,onFocus:E,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 border border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all text-sm sm:text-base",placeholder:"Votre ville"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-xs sm:text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Tlphone *"}),d.jsx("input",{type:"tel",name:"phone",value:e.phone,onChange:b,onFocus:E,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 border border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all text-sm sm:text-base",placeholder:"Votre numro de tlphone"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-xs sm:text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Email *"}),d.jsx("input",{type:"email",name:"email",value:e.email,onChange:b,onFocus:E,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 border border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all text-sm sm:text-base",placeholder:"votre@email.com"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-xs sm:text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Produit ou service d'intrt *"}),d.jsx("input",{type:"text",name:"product",value:e.product,onChange:b,onFocus:E,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 border border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all text-sm sm:text-base",placeholder:"Quel produit ou service vous intresse ?"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-xs sm:text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Dtails et commentaires"}),d.jsx("textarea",{name:"details",value:e.details,onChange:b,onFocus:E,rows:3,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 border border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all resize-none text-sm sm:text-base",placeholder:"Informations complmentaires, besoins spcifiques, etc."})]}),l==="error"&&m&&d.jsx("div",{className:"bg-rose-50 border border-rose-200 rounded-lg sm:rounded-xl p-3 sm:p-4 animate-in slide-in-from-top-4",children:d.jsx("p",{className:"text-rose-700 text-xs sm:text-sm",children:m})}),d.jsx("div",{className:"pt-4",children:d.jsx("button",{type:"submit",disabled:r,className:"w-full bg-indigo-600 text-white py-3 sm:py-4 px-4 sm:px-6 rounded-lg sm:rounded-xl font-black uppercase tracking-widest hover:bg-indigo-700 focus:ring-4 focus:ring-indigo-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg text-sm sm:text-base",children:r?d.jsxs("span",{className:"flex items-center justify-center",children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 sm:-ml-1 sm:mr-3 h-4 sm:h-5 w-4 sm:w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Envoi en cours..."]}):"Envoyer ma demande"})})]})}),d.jsx("div",{className:"bg-gray-50 px-6 sm:px-8 py-4 sm:py-6 border-t border-gray-100",children:d.jsxs("div",{className:"flex items-center justify-center text-xs sm:text-sm text-gray-500",children:[d.jsx("span",{className:"mr-2",children:""}),"Vos informations sont confidentielles et ne seront partages qu'avec l'quipe commerciale"]})})]})]})})},hi={auth:Oo,login:(i,e)=>vk(Oo,i,e),register:(i,e)=>xk(Oo,i,e),logout:()=>Ek(Oo),sendResetEmail:i=>yk(Oo,i),getCurrentUser:i=>wk(Oo,i)},Hj=()=>{const[i,e]=ee.useState(null),[t,r]=ee.useState("dashboard"),[a,l]=ee.useState("home"),[u,m]=ee.useState(null),[p,y]=ee.useState(null),[b,w]=ee.useState(!1),[E,j]=ee.useState(""),[L,F]=ee.useState(!0),[Q,ie]=ee.useState(null),[ne,re]=ee.useState({name:"AFTRAS CRM",currency:"FCFA"});ee.useEffect(()=>{let A=null;const V=hi.getCurrentUser(C=>{A&&(A(),A=null),C?(F(!0),A=Ae.listenById("users",C.uid,Ce=>{Ce?Ce.status===Mn.ACTIVE?(e({...Ce,id:C.uid}),m(null)):Ce.status===Mn.DISABLED?(m("Votre compte a t dsactiv par un administrateur."),e(null)):(m("Compte en attente de validation par l'administration."),e(null)):(m("Profil utilisateur introuvable dans la base de donnes."),e(null)),F(!1)})):(e(null),m(null),F(!1))});return()=>{V(),A&&A()}},[]),ee.useEffect(()=>{const A=new URLSearchParams(window.location.search),V=A.get("mode"),C=A.get("code");V==="signup"&&l("signup"),C&&j(C)},[]),ee.useEffect(()=>{(async()=>{try{ie(await ue.getAppLogo()),re(await ue.getAppSettings())}catch(V){console.warn("Could not load brand settings:",V)}})()},[]);const xe=async A=>{A.preventDefault(),F(!0),m(null);const V=new FormData(A.currentTarget),C=V.get("email"),Ce=V.get("password");try{await hi.login(C,Ce)}catch{m("Identifiants invalides ou erreur de connexion."),F(!1)}},be=async A=>{A.preventDefault(),F(!0),m(null),y(null);const C=new FormData(A.currentTarget).get("email");try{await hi.sendResetEmail(C),y("Un email de rinitialisation a t envoy  "+C)}catch{m("Erreur : impossible d'envoyer l'email. Vrifiez l'adresse saisie.")}finally{F(!1)}},ye=async A=>{A.preventDefault(),F(!0),m(null);const V=new FormData(A.currentTarget),C=V.get("accessCode"),Ce=V.get("email"),yt=V.get("password");try{const Y=await ue.getSupervisorAccessCode();if(C===Y.code&&new Date<=new Date(Y.expiresAt)){const $e=await hi.register(Ce,yt);await ue.addUser({firstName:V.get("firstName"),lastName:V.get("lastName"),email:Ce,role:gn.SUPERVISOR,status:Mn.ACTIVE,id:$e.user.uid}),alert("Inscription russie ! Votre compte superviseur est activ immdiatement."),l("login");return}const _e=await ue.getAccessCode();if(C!==_e.code){m("Code d'accs invalide."),F(!1);return}if(new Date>new Date(_e.expiresAt)){m("Code d'accs expir (validit 24h)."),F(!1);return}const Fe=await hi.register(Ce,yt);await ue.addUser({firstName:V.get("firstName"),lastName:V.get("lastName"),email:Ce,role:gn.AGENT,status:Mn.ACTIVE,id:Fe.user.uid}),alert("Inscription russie ! Votre compte est en attente de validation par un admin."),l("login")}catch(Y){m(Y.message||"Erreur lors de l'inscription.")}finally{F(!1)}},k=A=>(A==null?void 0:A.toUpperCase())==="AFTRAS CRM"?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx("span",{className:"text-blue-600",children:"AFTRAS"}),d.jsx("span",{className:"text-orange-500 border border-orange-500/30 rounded-full px-3 py-0.5 text-[0.85em]",children:"CRM"})]}):d.jsx("span",{children:A});if(L&&!i)return d.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:d.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[d.jsx("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"}),d.jsx("p",{className:"text-indigo-600 font-black text-xs uppercase tracking-widest",children:"Initialisation scurise..."})]})});const N=window.location.pathname.split("/").filter(Boolean),I=N.findIndex(A=>A==="form");if(I!==-1&&I+1<N.length){const A=N[I+1];return d.jsx(Gj,{agentId:A})}if(!i)return d.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-6 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-indigo-100 via-white to-sky-50 animate-in fade-in duration-700",children:[a==="home"&&d.jsxs("div",{className:"max-w-md w-full text-center space-y-12",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"w-20 h-20 bg-indigo-600 rounded-3xl flex items-center justify-center text-white text-3xl font-black mx-auto shadow-2xl shadow-indigo-200 overflow-hidden",children:Q?d.jsx("img",{src:Q,alt:"Logo",className:"w-full h-full object-contain p-2 bg-white"}):"V6"}),d.jsx("h1",{className:"text-4xl font-black tracking-tight",children:k(ne.name)}),d.jsx("p",{className:"text-gray-500 text-lg",children:"Plateforme de gestion commerciale haute performance."})]}),d.jsxs("div",{className:"grid gap-4",children:[d.jsxs("button",{onClick:()=>l("signup"),className:"w-full bg-white text-gray-900 border border-gray-200 py-4 rounded-2xl font-bold shadow-sm hover:bg-gray-50 transition-all flex items-center justify-center group",children:[d.jsx("span",{className:"mr-2 group-hover:scale-110 transition-transform",children:me.Plus}),"S'inscrire"]}),d.jsxs("button",{onClick:()=>l("login"),className:"w-full bg-indigo-600 text-white py-4 rounded-2xl font-bold shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all flex items-center justify-center group",children:[d.jsx("span",{className:"mr-2 group-hover:scale-110 transition-transform",children:me.Lock}),"Se connecter"]})]})]}),(a==="login"||a==="signup"||a==="forgot-password")&&d.jsxs("div",{className:"bg-white w-full max-w-md p-10 rounded-[2.5rem] shadow-2xl shadow-indigo-100 border border-gray-100 relative animate-in zoom-in-95 duration-300",children:[d.jsx("button",{onClick:()=>{l(a==="forgot-password"?"login":"home"),m(null),y(null),w(!1)},className:"absolute top-8 left-8 p-2 hover:bg-gray-100 rounded-xl transition-all text-gray-400",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"m15 18-6-6 6-6"})})}),d.jsx("h2",{className:"text-2xl font-black text-center mb-8 mt-4",children:a==="login"?"Connexion":a==="signup"?"Nouvel Agent":"Rinitialisation"}),a==="forgot-password"?d.jsxs("form",{onSubmit:be,className:"space-y-5",children:[d.jsx("p",{className:"text-sm text-gray-500 text-center mb-4",children:"Saisissez votre email pour recevoir un lien de rinitialisation de mot de passe."}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider ml-1",children:"Email professionnel"}),d.jsx("input",{name:"email",type:"email",required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"nom@entreprise.com"})]}),u&&d.jsx("p",{className:"text-xs font-bold text-rose-500 text-center bg-rose-50 p-3 rounded-lg border border-rose-100",children:u}),p&&d.jsx("p",{className:"text-xs font-bold text-emerald-600 text-center bg-emerald-50 p-3 rounded-lg border border-emerald-100",children:p}),d.jsx("button",{type:"submit",disabled:L,className:"w-full bg-indigo-600 text-white py-4 rounded-xl font-bold shadow-lg shadow-indigo-100 hover:bg-indigo-700 transition-all mt-4 disabled:opacity-50",children:L?"Action en cours...":"Envoyer le lien"})]}):d.jsxs("form",{onSubmit:a==="login"?xe:ye,className:"space-y-5",children:[a==="signup"&&d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider ml-1",children:"Prnom"}),d.jsx("input",{name:"firstName",required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider ml-1",children:"Nom"}),d.jsx("input",{name:"lastName",required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider ml-1",children:"Email professionnel"}),d.jsx("input",{name:"email",type:"email",required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"nom@entreprise.com"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider ml-1",children:"Mot de passe"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{name:"password",type:b?"text":"password",required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all pr-12",placeholder:""}),d.jsx("button",{type:"button",onClick:()=>w(!b),className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-indigo-600 transition-colors",title:b?"Masquer":"Afficher",children:b?me.EyeOff:me.Eye})]}),a==="login"&&d.jsx("div",{className:"text-right mt-1",children:d.jsx("button",{type:"button",onClick:()=>{l("forgot-password"),m(null)},className:"text-[10px] font-bold text-indigo-600 hover:underline uppercase tracking-tighter",children:"Mot de passe oubli ?"})})]}),a==="signup"&&d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider ml-1",children:"Code d'accs"}),d.jsx("input",{name:"accessCode",required:!0,defaultValue:E,className:"w-full px-4 py-3 bg-indigo-50 border border-indigo-100 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all font-mono font-bold text-indigo-600",placeholder:"Code Admin"},E)]}),u&&d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"text-xs font-bold text-rose-500 text-center bg-rose-50 p-3 rounded-lg border border-rose-100",children:u}),hi.auth.currentUser&&d.jsx("button",{type:"button",onClick:()=>hi.logout(),className:"w-full text-[10px] font-black text-indigo-400 hover:text-indigo-600 uppercase tracking-widest text-center transition-colors",children:"Annuler et se dconnecter"})]}),d.jsx("button",{type:"submit",disabled:L,className:"w-full bg-indigo-600 text-white py-4 rounded-xl font-bold shadow-lg shadow-indigo-100 hover:bg-indigo-700 transition-all mt-4 disabled:opacity-50",children:L?"Action en cours...":a==="login"?"Entrer dans l'espace":"Finaliser l'inscription"})]})]})]});const R=()=>{if(i.role===gn.ADMIN)switch(t){case"dashboard":return d.jsx(fh,{onNavigate:r});case"access-code":return d.jsx(_w,{});case"users":return d.jsx(ww,{});case"prospects":return d.jsx(Ew,{});case"clients":return d.jsx(Tw,{});case"sales":return d.jsx(Sw,{});case"commissions":return d.jsx(Aw,{});case"notifications":return d.jsx(Nw,{});case"settings":return d.jsx(Iw,{});case"profile":return d.jsx(Cw,{user:i,onUpdate:e});default:return d.jsx(fh,{onNavigate:r})}if(i.role===gn.SUPERVISOR)switch(t){case"dashboard":return d.jsx(fh,{onNavigate:r});case"access-code":return d.jsx(_w,{readOnly:!0});case"users":return d.jsx(ww,{readOnly:!0});case"prospects":return d.jsx(Ew,{readOnly:!0});case"clients":return d.jsx(Tw,{readOnly:!0});case"sales":return d.jsx(Sw,{readOnly:!0});case"commissions":return d.jsx(Aw,{readOnly:!0});case"notifications":return d.jsx(Nw,{readOnly:!0});case"settings":return d.jsx(Iw,{readOnly:!0});case"profile":return d.jsx(Cw,{user:i,onUpdate:e,readOnly:!0});default:return d.jsx(fh,{onNavigate:r})}if(i.role===gn.AGENT)switch(t){case"dashboard":return d.jsx(kw,{user:i,onNavigate:r});case"prospecting":return d.jsx(Uj,{user:i});case"my-clients":return d.jsx(zj,{user:i});case"my-commissions":return d.jsx(Bj,{user:i});case"profile":return d.jsx(qj,{user:i,onUpdate:e});case"remote-form":return d.jsx(Fj,{user:i});case"notifications":return d.jsx(Lj,{user:i});default:return d.jsx(kw,{user:i,onNavigate:r})}return d.jsx("div",{children:"Accs non autoris"})};return d.jsx(Pj,{user:i,onLogout:async()=>{await hi.logout(),e(null),r("dashboard"),l("home")},activeView:t,setActiveView:r,children:R()})},eS=document.getElementById("root");if(!eS)throw new Error("Could not find root element to mount to");const Kj=q2.createRoot(eS);Kj.render(d.jsx(V2.StrictMode,{children:d.jsx(Hj,{})}));
